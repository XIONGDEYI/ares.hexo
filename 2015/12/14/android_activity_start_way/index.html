<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Activity中的四种启动模式 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="前言在Android中每个界面都是一个Activity，切换界面操作其实是多个不同Activity之间的实例化操作。在Android中 Activity的启动模式决定了Activity的启动运行方式。Android总Activity的启动模式分为四种：  standard singleTop singleTask singleInstance  Activity启动模式设置：123&amp;lt;acti">
<meta name="keywords" content="activity">
<meta property="og:type" content="article">
<meta property="og:title" content="Activity中的四种启动模式">
<meta property="og:url" content="http://yoursite.com/2015/12/14/android_activity_start_way/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="前言在Android中每个界面都是一个Activity，切换界面操作其实是多个不同Activity之间的实例化操作。在Android中 Activity的启动模式决定了Activity的启动运行方式。Android总Activity的启动模式分为四种：  standard singleTop singleTask singleInstance  Activity启动模式设置：123&amp;lt;acti">
<meta property="og:image" content="http://www.linuxidc.com/upload/2012_07/120721093646151.gif">
<meta property="og:image" content="http://www.linuxidc.com/upload/2012_07/120721093646152.gif">
<meta property="og:image" content="http://www.linuxidc.com/upload/2012_07/120721093646153.gif">
<meta property="og:image" content="http://www.linuxidc.com/upload/2012_07/120721093646154.gif">
<meta property="og:image" content="http://www.linuxidc.com/upload/2012_07/120721093646155.gif">
<meta property="og:image" content="http://pic002.cnblogs.com/images/2012/302664/2012082519471692.png">
<meta property="og:image" content="http://pic002.cnblogs.com/images/2012/302664/2012082519483568.png">
<meta property="og:image" content="http://pic002.cnblogs.com/images/2012/302664/2012082519484221.png">
<meta property="og:image" content="http://pic002.cnblogs.com/images/2012/302664/2012082519525961.png">
<meta property="og:image" content="http://pic002.cnblogs.com/images/2012/302664/2012082522001566.png">
<meta property="og:image" content="http://pic002.cnblogs.com/images/2012/302664/2012082522013733.png">
<meta property="og:image" content="http://pic002.cnblogs.com/images/2012/302664/2012082522002968.png">
<meta property="og:image" content="http://pic002.cnblogs.com/images/2012/302664/2012082522013733.png">
<meta property="og:image" content="http://pic002.cnblogs.com/images/2012/302664/2012082522360528.png">
<meta property="og:image" content="http://pic002.cnblogs.com/images/2012/302664/2012082522360956.png">
<meta property="og:image" content="http://pic002.cnblogs.com/images/2012/302664/2012082522361480.png">
<meta property="og:image" content="http://pic002.cnblogs.com/images/2012/302664/2012082522413124.png">
<meta property="og:image" content="http://pic002.cnblogs.com/images/2012/302664/2012082522362022.png">
<meta property="og:updated_time" content="2017-07-11T17:45:09.130Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Activity中的四种启动模式">
<meta name="twitter:description" content="前言在Android中每个界面都是一个Activity，切换界面操作其实是多个不同Activity之间的实例化操作。在Android中 Activity的启动模式决定了Activity的启动运行方式。Android总Activity的启动模式分为四种：  standard singleTop singleTask singleInstance  Activity启动模式设置：123&amp;lt;acti">
<meta name="twitter:image" content="http://www.linuxidc.com/upload/2012_07/120721093646151.gif">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-android_activity_start_way" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/14/android_activity_start_way/" class="article-date">
  <time datetime="2015-12-14T08:49:29.000Z" itemprop="datePublished">2015-12-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/android/">android</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Activity中的四种启动模式
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>在Android中每个界面都是一个Activity，切换界面操作其实是多个不同Activity之间的实例化操作。在Android中 Activity的启动模式决定了Activity的启动运行方式。<br>Android总Activity的启动模式分为四种：</p>
<ul>
<li>standard</li>
<li>singleTop</li>
<li>singleTask</li>
<li>singleInstance</li>
</ul>
<p>Activity启动模式设置：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;activity android:name=&quot;.MainActivity&quot; android:launchMode=&quot;standard&quot; /&gt;</div><div class="line">//在AndroidManifest.xml中的标签的android:launchMode属性设置.</div><div class="line">//启动模式有4种，分别为standard、singleTop、singleTask、singleInstance.</div></pre></td></tr></table></figure></p>
<h2 id="启动模式介绍"><a href="#启动模式介绍" class="headerlink" title="启动模式介绍"></a>启动模式介绍</h2><p> <strong> Activity的四种启动模式</strong><br> 1.standard：每次激活Activity时都会创建Activity，并放入任务栈中。<br> 2.singleTop:如果在任务的栈顶正好存在该Activity的实例， 就重用该实例，否者就会创建新的实例并放入栈顶(即使栈中已经存在该Activity实例，只要不在栈顶，都会创建实例)。<br> 3.singleTask:如果在栈中已经有该Activity的实例，就重用该实例(会调用实例的onNewIntent())。重用时，会让该实例回到栈顶，因此在它上面的实例将会被移除栈。如果栈中不存在该实例，将会创建新的实例放入栈中。<br> 4.singleInstance:在一个新栈中创建该Activity实例，并让多个应用共享该栈中的该Activity实例。一旦该模式的Activity的实例存在于某个栈中，任何应用再激活该Activity时都会重用该栈中的实例，其效果相当于多个应用程序共享一个应用，不管谁激活该Activity都会进入同一个应用中。</p>
<p>其中standard是系统默认的启动模式。</p>
<p><strong> 任务栈</strong><br>每个应用都有一个任务栈，是用来存放Activity的，功能类似于函数调用的栈，先后顺序代表了Activity的出现顺序；比如Activity1–&gt;Activity2–&gt;Activity3,则任务栈为：<br><img src="http://www.linuxidc.com/upload/2012_07/120721093646151.gif" alt=""></p>
<p><strong> 启动模式图解</strong><br>(1)standard：每次激活Activity时(startActivity)，都创建Activity实例，并放入任务栈；<br><img src="http://www.linuxidc.com/upload/2012_07/120721093646152.gif" alt=""><br>(2)singleTop：如果某个Activity自己激活自己，即任务栈栈顶就是该Activity，则不需要创建，其余情况都要创建Activity实例；<br><img src="http://www.linuxidc.com/upload/2012_07/120721093646153.gif" alt=""><br>(3)singleTask：如果要激活的那个Activity在任务栈中存在该实例，则不需要创建，只需要把此Activity放入栈顶，并把该Activity以上的Activity实例都pop；<br><img src="http://www.linuxidc.com/upload/2012_07/120721093646154.gif" alt=""><br>(4)singleInstance：如果应用1的任务栈中创建了MainActivity实例，如果应用2也要激活MainActivity，则不需要创建，两应用共享该Activity实例；<br><img src="http://www.linuxidc.com/upload/2012_07/120721093646155.gif" alt=""></p>
<p>SingTask的应用：<br>可以用来退出整个应用。将主Activity设为SingTask模式，然后在要退出的Activity中转到主Activity，然后重写主Activity的onNewIntent函数，并在函数中加上一句finish。</p>
<p>附：退出单个Activity方法：</p>
<ul>
<li>1.调用finish</li>
<li>2.杀死该进程：killprocess(Process.mId)</li>
<li>3.终止正在运行的虚拟机：system.exit()</li>
</ul>
<h2 id="各种启动模式详解"><a href="#各种启动模式详解" class="headerlink" title="各种启动模式详解"></a>各种启动模式详解</h2><p>下面通过代码解释各种模式的运行机制</p>
<p><strong> 1.standard</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">private TextView text_show;</div><div class="line">     private Button btn_mode;</div><div class="line">     </div><div class="line">     @Override</div><div class="line">     public void onCreate(Bundle savedInstanceState) &#123;</div><div class="line">         super.onCreate(savedInstanceState);</div><div class="line">         setContentView(R.layout.activity_main);</div><div class="line">         </div><div class="line">         text_show = (TextView) this.findViewById(R.id.text_show);</div><div class="line">         </div><div class="line">         text_show.setText(this.toString());</div><div class="line">         </div><div class="line">         btn_mode = (Button) this.findViewById(R.id.btn_mode);</div><div class="line">         </div><div class="line">     &#125;</div><div class="line">     </div><div class="line">　　　　//按钮单击事件</div><div class="line">     public void LaunchStandard(View v)&#123;</div><div class="line">         startActivity(new Intent(this,MainActivity.class));</div><div class="line">         </div><div class="line">         text_show.setText(this.toString());</div><div class="line">     &#125;</div></pre></td></tr></table></figure>
<p>初始化界面如下：<br><img src="http://pic002.cnblogs.com/images/2012/302664/2012082519471692.png" alt=""></p>
<p>当点击按钮时，会创建新的Activity，通过TextView@后16进制数的显示即可看出，点击两次分别界面如下:<br><img src="http://pic002.cnblogs.com/images/2012/302664/2012082519483568.png" alt=""><br><img src="http://pic002.cnblogs.com/images/2012/302664/2012082519484221.png" alt=""></p>
<p>此时，我们分析栈内部的运行机制：（依次从栈顶向上）<br><img src="http://pic002.cnblogs.com/images/2012/302664/2012082519525961.png" alt=""></p>
<p>因此，这种Standard模式是每次都会创建新的Activity对象，当点击返回按钮时，他会将栈顶(当前Activity)消灭，然后跳到下一 层，例如如果现在Activity是44ed8c50，那么当我们点击返回时Activity会变为44f28a48，不过此时在这个Activity中 再次点击按钮创建对象时，它会另外创建新的Activity对象，这种模式可能大多数情况下不是我们需要的，因为对系统性能的消耗过大。</p>
<p>下面我们介绍两种能使用当前栈中Activity的启动模式：</p>
<p><strong> 2. singleTop</strong></p>
<p>从上面的解释中即可知道，在每次使用新的Activity时会自动检测栈顶的当前Activity是否是需要引用的Activity，如果是则直接引用此Activity，而不会创建新的Activity。</p>
<p>我们在刚才的界面中加入一个”启动singletop模式”按钮，当点击时出现我们创建的singletop中，在Activity singletop中有一个按钮，启动singletop模式，表示启动当前Activity，由于我们在清单文件中配置Activity的启动模式为 singleTop，因此此时不会再创建而是利用当前栈顶的singleTop Activity：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;activity</div><div class="line">    android:name=&quot;.SingleTopActivity&quot;</div><div class="line">    android:label=&quot;@string/singletop&quot;</div><div class="line">    android:launchMode=&quot;singleTop&quot; &gt;</div><div class="line">&lt;/activity&gt;</div></pre></td></tr></table></figure></p>
<p>界面初始化：<br><img src="http://pic002.cnblogs.com/images/2012/302664/2012082522001566.png" alt=""></p>
<p>点击”启动singleTop模式”按钮：<br><img src="http://pic002.cnblogs.com/images/2012/302664/2012082522013733.png" alt=""></p>
<p>我们分析它的运行机制，可知，当程序运行到此时，栈中的数据形式为：<br><img src="http://pic002.cnblogs.com/images/2012/302664/2012082522002968.png" alt=""></p>
<p>当我们在上面界面中点击”启动singleTop模式”按钮时，由于此Activity设置的启动模式为singleTop，因此它首先会检测当 前栈顶是否为我们要请求的Activity对象，经验证成立，因此它不会创建新的Activity，而是引用当前栈顶的Activity。<br><img src="http://pic002.cnblogs.com/images/2012/302664/2012082522013733.png" alt=""></p>
<p>虽然它不会创建新的Activity对象，不过它每次回调用onNewIntent()方法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">@Override</div><div class="line">     protected void onNewIntent(Intent intent) &#123;</div><div class="line">         // TODO Auto-generated method stub</div><div class="line">         super.onNewIntent(intent);</div><div class="line">         </div><div class="line">         Toast.makeText(this, new Date().toString(), 1).show();</div><div class="line">     &#125;</div></pre></td></tr></table></figure></p>
<p>我们为此方法编写代码输出当前日期，则在每次点击上面按钮时会输出当前日期。</p>
<p><strong> 3.singleTask</strong></p>
<p>此启动模式和singleTop在名字上即可看出区别，即singleTop每次只检测当前栈顶的Activity是否是我们需要请求创建的，而 singleTask则会检测栈中全部的Activity对象，从上向下，如果检测到是我们所请求的则会消灭此Activity对象上面的对象，直接把检测到的我们需要的Activity置为栈顶。</p>
<p>我们创建一个SingleTaskActivity，此界面中包含一个启动MainActivity和启动SingleTaskActivity 按钮。</p>
<p>初始化:<br><img src="http://pic002.cnblogs.com/images/2012/302664/2012082522360528.png" alt=""></p>
<p>点击”启动singleTask模式”按钮：<br><img src="http://pic002.cnblogs.com/images/2012/302664/2012082522360956.png" alt=""></p>
<p>在此界面中点击第二个按钮”启动singleTask模式”按钮，根据定义会检测当前栈中是否有此Activity对象，因此显示的还是当前的 Activity，不会重新创建；</p>
<p>再点击”启动Standard模式”按钮，由于MainActivity的启动模式为standard，所以在此会重新创建一个 MainActivity对象：<br><img src="http://pic002.cnblogs.com/images/2012/302664/2012082522361480.png" alt=""></p>
<p>此时栈中数据格式为：<br><img src="http://pic002.cnblogs.com/images/2012/302664/2012082522413124.png" alt=""></p>
<p>当在上面界面中点击”启动singleTask模式”按钮时，由于检测到当期栈中第二个为我们要创建的Activity，会将最上面的 MainActivity消灭，然后将SingleTaskActivity设置为栈顶：<br><img src="http://pic002.cnblogs.com/images/2012/302664/2012082522362022.png" alt=""></p>
<p><strong> 4.SingleInstance</strong><br>此启动模式和我们使用的浏览器工作原理类似，我们都知道在多个程序中访问浏览器时，如果当前浏览器没有打开，则打开浏览器，否则会在当前打开的浏 览器中访问。此模式会节省大量的系统资源，因为他能保证要请求的Activity对象在当前的栈中只存在一个。</p>
<h2 id="退出整个应用"><a href="#退出整个应用" class="headerlink" title="退出整个应用"></a>退出整个应用</h2><p>通过singleTop的原理，退出整个应用。具体实现是添加退出类：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">public class CloseActivity</div><div class="line">&#123;</div><div class="line">    private static LinkedList&lt;Activity&gt; acys = new LinkedList&lt;Activity&gt;();</div><div class="line"></div><div class="line">    public static Activity curActivity;</div><div class="line">    </div><div class="line">    public static void add(Activity acy)</div><div class="line">    &#123;</div><div class="line">        acys.add(acy);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public static void remove(Activity acy) &#123;</div><div class="line">        acys.remove(acy);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    public static void close()</div><div class="line">    &#123;</div><div class="line">        Activity acy;</div><div class="line">        while (acys.size() != 0)</div><div class="line">        &#123;</div><div class="line">            acy = acys.poll();</div><div class="line">            if (!acy.isFinishing())</div><div class="line">            &#123;</div><div class="line">                acy.finish();</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">//        android.os.Process.killProcess(android.os.Process.myPid());</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Android的窗口类提供了历史栈，我们可以通过stack的原理实现，我们在D窗口打开A窗口时在Intent中直接加入标志Intent.FLAG_ACTIVITY_CLEAR_TOP，再次开启A时将会清除该进程空间的所有Activity。 在D中使用下面的代码:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Intent intent = new Intent(); </div><div class="line">intent.setClass(D.this, A.class); </div><div class="line">intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);  //注意本行的FLAG设置 </div><div class="line">startActivity(intent); </div><div class="line">finish();</div></pre></td></tr></table></figure></p>
<p>关掉自己 在A中加入代码： </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">@Override</div><div class="line">protected void onNewIntent(Intent intent) &#123; </div><div class="line"></div><div class="line">super.onNewIntent(intent);</div><div class="line">//退出</div><div class="line">    if ((Intent.FLAG_ACTIVITY_CLEAR_TOP &amp; intent.getFlags()) != 0) &#123;</div><div class="line"></div><div class="line">           finish();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>A的Manifest.xml配置成android:launchMode=”singleTop”</p>
<p>原理总结：<br>一般A是程序的入口点，从D起一个A的activity，加入标识Intent.FLAG_ACTIVITY_CLEAR_TOP这个过程中会把栈中B，C，都清理掉。因为A是android:launchMode=”singleTop” 不会调用oncreate(),而是响应onNewIntent（）这时候判断Intent.FLAG_ACTIVITY_CLEAR_TOP，然后把A finish（）掉。 栈中A,B,C,D全部被清理。所以整个程序退出了。</p>
<h2 id="Developers官网解释"><a href="#Developers官网解释" class="headerlink" title="Developers官网解释"></a>Developers官网解释</h2><p>android:launchMode<br>An instruction on how the activity should be launched. There are four modes that work in conjunction with activity flags (FLAG<em>ACTIVITY</em>* constants) in Intent objects to determine what should happen when the activity is called upon to handle an intent. They are:</p>
<ul>
<li>“standard”</li>
<li>“singleTop”</li>
<li>“singleTask”</li>
<li>“singleInstance”</li>
</ul>
<p>The default mode is “standard”.</p>
<p>As shown in the table below, the modes fall into two main groups, with “standard” and “singleTop” activities on one side, and “singleTask” and “singleInstance” activities on the other. An activity with the “standard” or “singleTop” launch mode can be instantiated multiple times. The instances can belong to any task and can be located anywhere in the activity stack. Typically, they’re launched into the task that called startActivity() (unless the Intent object contains a FLAG_ACTIVITY_NEW_TASK instruction, in which case a different task is chosen — see the taskAffinity attribute).</p>
<p>In contrast, “singleTask” and “singleInstance” activities can only begin a task. They are always at the root of the activity stack. Moreover, the device can hold only one instance of the activity at a time — only one such task.</p>
<p>The “standard” and “singleTop” modes differ from each other in just one respect: Every time there’s a new intent for a “standard” activity, a new instance of the class is created to respond to that intent. Each instance handles a single intent. Similarly, a new instance of a “singleTop” activity may also be created to handle a new intent. However, if the target task already has an existing instance of the activity at the top of its stack, that instance will receive the new intent (in an onNewIntent() call); a new instance is not created. In other circumstances — for example, if an existing instance of the “singleTop” activity is in the target task, but not at the top of the stack, or if it’s at the top of a stack, but not in the target task — a new instance would be created and pushed on the stack.</p>
<p>Similarly, if you navigate up to an activity on the current stack, the behavior is determined by the parent activity’s launch mode. If the parent activity has launch mode singleTop (or the up intent contains FLAG_ACTIVITY_CLEAR_TOP), the parent is brought to the top of the stack, and its state is preserved. The navigation intent is received by the parent activity’s onNewIntent() method. If the parent activity has launch mode standard (and the up intent does not contain FLAG_ACTIVITY_CLEAR_TOP), the current activity and its parent are both popped off the stack, and a new instance of the parent activity is created to receive the navigation intent.</p>
<p>The “singleTask” and “singleInstance” modes also differ from each other in only one respect: A “singleTask” activity allows other activities to be part of its task. It’s always at the root of its task, but other activities (necessarily “standard” and “singleTop” activities) can be launched into that task. A “singleInstance” activity, on the other hand, permits no other activities to be part of its task. It’s the only activity in the task. If it starts another activity, that activity is assigned to a different task — as if FLAG_ACTIVITY_NEW_TASK was in the intent.</p>
<table><tr><th width="10%">Use Cases</th><th width="10%">Launch Mode</th><th width="10%">Multiple Instances?</th><th width="80%">Comments</th></tr><tr><td rowspan="2">Normal launches for most activities</td><td>“standard”</td><td>Yes</td><td>Default. The system always creates a new instance of the activity in the target task and routes the intent to it.</td></tr><tr><td>“singleTop”</td><td>Conditionally</td><td>If an instance of the activity already exists at the top of the target task, the system routes the intent to that instance through a call to its onNewIntent() method, rather than creating a new instance of the activity.</td></tr><tr><td rowspan="2">Specialized launches(not recommended for general use)</td><td>“singleTask”</td><td>No</td><td>The system creates the activity at the root of a new task and routes the intent to it. However, if an instance of the activity already exists, the system routes the intent to existing instance through a call to its onNewIntent() method, rather than creating a new one.</td></tr><tr><td>“singleInstance”</td><td>No</td><td>Same as “singleTask”, except that the system doesn’t launch any other activities into the task holding the instance. The activity is always the single and only member of its task.</td></tr></table>

<p>As shown in the table above, standard is the default mode and is appropriate for most types of activities. SingleTop is also a common and useful launch mode for many types of activities. The other modes — singleTask and singleInstance — are not appropriate for most applications, since they result in an interaction model that is likely to be unfamiliar to users and is very different from most other applications.</p>
<p>Regardless of the launch mode that you choose, make sure to test the usability of the activity during launch and when navigating back to it from other activities and tasks using the Back button.</p>
<p>For more information on launch modes and their interaction with Intent flags, see the <a href="http://developer.android.com/guide/components/tasks-and-back-stack.html" target="_blank" rel="external">Tasks and Back Stack document</a>.</p>
<p>上面即为Android中的四种启动模式以及应用场景，我们在开发Android项目时会经常使用到，巧妙设置Activity的启动模式会节省系统开销和程序运行效率。</p>
<h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><ul>
<li><a href="http://developer.android.com/intl/zh-cn/guide/topics/manifest/activity-element.html#lmode" target="_blank" rel="external">Developers-launchMode</a></li>
<li><a href="http://www.android100.org/html/201402/18/5634.html" target="_blank" rel="external">Android中Activity启动模式详解</a></li>
<li><a href="http://www.cnblogs.com/meizixiong/archive/2013/07/03/3170591.html" target="_blank" rel="external">Android入门：Activity四种启动模式</a></li>
<li><a href="http://aresxiong.com/2015/12/03/android_activity_stack/" target="_blank" rel="external">Intent Flag之FLAG_ACTIVITY_CLEAR_TOP</a></li>
<li><a href="http://blog.csdn.net/caiwenfeng_for_23/article/details/12710617" target="_blank" rel="external">Android 退出整个应用程序解决方案</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/12/14/android_activity_start_way/" data-id="cj4zvsg7g000a0gnhkj4f7hct" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/activity/">activity</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2015/12/15/android_application_security/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          开发安全的android应用
        
      </div>
    </a>
  
  
    <a href="/2015/12/14/android_book_SmashingAndroidUI/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Smashing Android UI</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/algorithm/">algorithm</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/android/">android</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/article/">article</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/coding/">coding</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/">database</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/framework/">framework</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/humanism/">humanism</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/message-push/">message_push</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/music/">music</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/ndk/">ndk</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/note/">note</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/protocol/">protocol</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/reading/">reading</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/springmvc/">springmvc</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/string/">string</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/study/">study</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/tools/">tools</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/versioncontroll/">versioncontroll</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/">web</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/好文/">好文</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/电影/">电影</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/AliPay/">AliPay</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Einstein/">Einstein</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GreenDao/">GreenDao</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ORMLite/">ORMLite</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WXPay/">WXPay</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/activity/">activity</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/android-studio/">android_studio</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/android-ui/">android_ui</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/androidstudio/">androidstudio</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/application/">application</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/book/">book</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/broadcast/">broadcast</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bugfix/">bugfix</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/chinese-weman/">chinese_weman</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/code-collection/">code_collection</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/context/">context</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/database/">database</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/decomplication/">decomplication</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/design-model/">design model</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/eclipse/">eclipse</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/eventbus/">eventbus</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/feminism/">feminism</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fullstack/">fullstack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/">github</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/google/">google</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gradle/">gradle</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/handle/">handle</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/handler/">handler</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/http/">http</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/https/">https</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/humanism/">humanism</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iframe/">iframe</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/image/">image</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/imageloader/">imageloader</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/intent/">intent</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/intentflag/">intentflag</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iphone/">iphone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jni/">jni</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/listview/">listview</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/markdown/">markdown</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/material-design/">material_design</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/maven/">maven</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/music/">music</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mvp/">mvp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nd/">nd</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/notification/">notification</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/obfuscation/">obfuscation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/observer/">observer</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/opensource/">opensource</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/otto/">otto</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pageradapter/">pageradapter</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pay/">pay</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/placeholder/">placeholder</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/project-build/">project_build</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pulltorefresh/">pulltorefresh</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pulltorefreshlistview/">pulltorefreshlistview</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/saxophone/">saxophone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/screen-record/">screen-record</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shortkey/">shortkey</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/snack/">snack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/socket/">socket</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sort/">sort</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spannable/">spannable</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/speech/">speech</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/springmvc/">springmvc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sqlite/">sqlite</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssl/">ssl</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sublime/">sublime</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/svg/">svg</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/svn/">svn</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/templates/">templates</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/textview/">textview</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tomcat/">tomcat</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/translate/">translate</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/viewpager/">viewpager</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/volley/">volley</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/website/">website</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webview/">webview</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xpnet/">xpnet</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/书单/">书单</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/史玉柱/">史玉柱</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/感悟/">感悟</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/电影/">电影</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/贾樟柯/">贾樟柯</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/AliPay/" style="font-size: 10px;">AliPay</a> <a href="/tags/Einstein/" style="font-size: 10px;">Einstein</a> <a href="/tags/GreenDao/" style="font-size: 10px;">GreenDao</a> <a href="/tags/ORMLite/" style="font-size: 10px;">ORMLite</a> <a href="/tags/WXPay/" style="font-size: 10px;">WXPay</a> <a href="/tags/activity/" style="font-size: 10px;">activity</a> <a href="/tags/android-studio/" style="font-size: 10px;">android_studio</a> <a href="/tags/android-ui/" style="font-size: 10px;">android_ui</a> <a href="/tags/androidstudio/" style="font-size: 20px;">androidstudio</a> <a href="/tags/animation/" style="font-size: 20px;">animation</a> <a href="/tags/application/" style="font-size: 10px;">application</a> <a href="/tags/book/" style="font-size: 10px;">book</a> <a href="/tags/broadcast/" style="font-size: 10px;">broadcast</a> <a href="/tags/bugfix/" style="font-size: 13.33px;">bugfix</a> <a href="/tags/chinese-weman/" style="font-size: 10px;">chinese_weman</a> <a href="/tags/code-collection/" style="font-size: 10px;">code_collection</a> <a href="/tags/context/" style="font-size: 10px;">context</a> <a href="/tags/database/" style="font-size: 10px;">database</a> <a href="/tags/decomplication/" style="font-size: 10px;">decomplication</a> <a href="/tags/design-model/" style="font-size: 13.33px;">design model</a> <a href="/tags/eclipse/" style="font-size: 10px;">eclipse</a> <a href="/tags/eventbus/" style="font-size: 10px;">eventbus</a> <a href="/tags/feminism/" style="font-size: 10px;">feminism</a> <a href="/tags/fullstack/" style="font-size: 10px;">fullstack</a> <a href="/tags/github/" style="font-size: 13.33px;">github</a> <a href="/tags/google/" style="font-size: 10px;">google</a> <a href="/tags/gradle/" style="font-size: 16.67px;">gradle</a> <a href="/tags/handle/" style="font-size: 10px;">handle</a> <a href="/tags/handler/" style="font-size: 10px;">handler</a> <a href="/tags/hexo/" style="font-size: 16.67px;">hexo</a> <a href="/tags/http/" style="font-size: 10px;">http</a> <a href="/tags/https/" style="font-size: 10px;">https</a> <a href="/tags/humanism/" style="font-size: 10px;">humanism</a> <a href="/tags/iframe/" style="font-size: 10px;">iframe</a> <a href="/tags/image/" style="font-size: 10px;">image</a> <a href="/tags/imageloader/" style="font-size: 20px;">imageloader</a> <a href="/tags/intent/" style="font-size: 10px;">intent</a> <a href="/tags/intentflag/" style="font-size: 13.33px;">intentflag</a> <a href="/tags/iphone/" style="font-size: 10px;">iphone</a> <a href="/tags/jni/" style="font-size: 10px;">jni</a> <a href="/tags/listview/" style="font-size: 10px;">listview</a> <a href="/tags/markdown/" style="font-size: 10px;">markdown</a> <a href="/tags/material-design/" style="font-size: 10px;">material_design</a> <a href="/tags/maven/" style="font-size: 10px;">maven</a> <a href="/tags/music/" style="font-size: 13.33px;">music</a> <a href="/tags/mvp/" style="font-size: 10px;">mvp</a> <a href="/tags/mysql/" style="font-size: 16.67px;">mysql</a> <a href="/tags/nd/" style="font-size: 10px;">nd</a> <a href="/tags/notification/" style="font-size: 10px;">notification</a> <a href="/tags/obfuscation/" style="font-size: 10px;">obfuscation</a> <a href="/tags/observer/" style="font-size: 10px;">observer</a> <a href="/tags/opensource/" style="font-size: 13.33px;">opensource</a> <a href="/tags/otto/" style="font-size: 10px;">otto</a> <a href="/tags/pageradapter/" style="font-size: 10px;">pageradapter</a> <a href="/tags/pay/" style="font-size: 13.33px;">pay</a> <a href="/tags/placeholder/" style="font-size: 10px;">placeholder</a> <a href="/tags/project-build/" style="font-size: 10px;">project_build</a> <a href="/tags/pulltorefresh/" style="font-size: 10px;">pulltorefresh</a> <a href="/tags/pulltorefreshlistview/" style="font-size: 13.33px;">pulltorefreshlistview</a> <a href="/tags/saxophone/" style="font-size: 10px;">saxophone</a> <a href="/tags/screen-record/" style="font-size: 10px;">screen-record</a> <a href="/tags/shortkey/" style="font-size: 10px;">shortkey</a> <a href="/tags/snack/" style="font-size: 10px;">snack</a> <a href="/tags/socket/" style="font-size: 10px;">socket</a> <a href="/tags/sort/" style="font-size: 13.33px;">sort</a> <a href="/tags/spannable/" style="font-size: 10px;">spannable</a> <a href="/tags/speech/" style="font-size: 10px;">speech</a> <a href="/tags/springmvc/" style="font-size: 10px;">springmvc</a> <a href="/tags/sqlite/" style="font-size: 10px;">sqlite</a> <a href="/tags/ssl/" style="font-size: 13.33px;">ssl</a> <a href="/tags/sublime/" style="font-size: 10px;">sublime</a> <a href="/tags/svg/" style="font-size: 13.33px;">svg</a> <a href="/tags/svn/" style="font-size: 13.33px;">svn</a> <a href="/tags/templates/" style="font-size: 10px;">templates</a> <a href="/tags/textview/" style="font-size: 10px;">textview</a> <a href="/tags/tomcat/" style="font-size: 16.67px;">tomcat</a> <a href="/tags/translate/" style="font-size: 10px;">translate</a> <a href="/tags/viewpager/" style="font-size: 13.33px;">viewpager</a> <a href="/tags/volley/" style="font-size: 10px;">volley</a> <a href="/tags/website/" style="font-size: 13.33px;">website</a> <a href="/tags/webview/" style="font-size: 10px;">webview</a> <a href="/tags/xpnet/" style="font-size: 13.33px;">xpnet</a> <a href="/tags/书单/" style="font-size: 10px;">书单</a> <a href="/tags/史玉柱/" style="font-size: 10px;">史玉柱</a> <a href="/tags/感悟/" style="font-size: 10px;">感悟</a> <a href="/tags/电影/" style="font-size: 10px;">电影</a> <a href="/tags/贾樟柯/" style="font-size: 10px;">贾樟柯</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">February 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/11/11/study_my_website_collection/">常用网站收集</a>
          </li>
        
          <li>
            <a href="/2016/05/04/web_develop_config/">WEB开发之环境配置</a>
          </li>
        
          <li>
            <a href="/2016/05/04/web_springmvc1/">Spring MVC入门(一)</a>
          </li>
        
          <li>
            <a href="/2016/04/07/android_network_ssl/">为你的Android App实现自签名的SSL证书</a>
          </li>
        
          <li>
            <a href="/2016/03/28/android_notification_push/">Android实现推送方式解决方案</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>