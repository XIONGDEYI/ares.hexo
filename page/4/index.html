<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>ARESXIONG</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="ARESXIONG">
<meta property="og:url" content="http://yoursite.com/page/4/index.html">
<meta property="og:site_name" content="ARESXIONG">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ARESXIONG">
  
    <link rel="alternate" href="/atom.xml" title="ARESXIONG" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">ARESXIONG</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-android_app_obfuscation" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/10/android_app_obfuscation/" class="article-date">
  <time datetime="2015-12-10T08:32:29.000Z" itemprop="datePublished">2015-12-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/android/">android</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/10/android_app_obfuscation/">android应用代码混淆</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>上一篇文章讲解了android应用的反编译，为了保证应用的安全性，代码混淆是必须的。<br>代码混淆(Obfuscated code)亦称花指令，是将计算机程序的代码，转换成一种功能上等价，但是难于阅读和理解的形式的行为。代码混淆可以用于程序源代码，也可以用于程序编译而成的中间代码。执行代码混淆的程序被称作代码混淆器。目前已经存在许多种功能各异的代码混淆器。<br>将代码中的各种元素，如变量，函数，类的名字改写成无意义的名字。比如改写成单个字母，或是简短的无意义字母组合，甚至改写成“__”这样的符号，使得阅读的人无法根据名字猜测其用途。重写代码中的部分逻辑，将其变成功能上等价，但是更难理解的形式。比如将for循环改写成while循环，将循环改写成递归，精简中间变量，等等。打乱代码的格式。比如删除空格，将多行代码挤到一行中，或者将一行代码断成多行等等。<br>下面讲解在android studio代码混淆的具体流程。</p>
<h2 id="混淆步骤"><a href="#混淆步骤" class="headerlink" title="混淆步骤"></a>混淆步骤</h2><p>1.生成签名文件。（参考后文的“创建KeyStore文件”）<br>2.修改Module下的build.gradle文件，将minifyEnabled false改为minifyEnabled true。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">signingConfigs &#123;</div><div class="line">        release &#123;</div><div class="line">            // 下面各值的意思将在后续进行讲解</div><div class="line">            storeFile file(&apos;release.keystore&apos;)</div><div class="line">            storePassword &quot;123456&quot;</div><div class="line">            keyAlias &quot;androiddebugkey&quot;</div><div class="line">            keyPassword &quot;123456&quot;</div><div class="line">        &#125;</div><div class="line">        debug &#123;</div><div class="line">            storeFile file(&apos;release.keystore&apos;)</div><div class="line">            storePassword &quot;123456&quot;</div><div class="line">            keyAlias &quot;androiddebugkey&quot;</div><div class="line">            keyPassword &quot;123456&quot;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    buildTypes &#123;</div><div class="line">        release &#123;</div><div class="line">            minifyEnabled true // 设置代码进行混淆</div><div class="line">            proguardFiles getDefaultProguardFile(&apos;proguard-android.txt&apos;), &apos;proguard-rules.pro&apos;</div><div class="line">            signingConfig signingConfigs.release // 签名配置</div><div class="line">        &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p><strong> 说明：</strong></p>
<ul>
<li>proguardFiles getDefaultProguardFile(‘proguard-android.txt’)表示获取SDK下’proguard-android.txt‘文件中的默认混淆规则。</li>
<li>proguard-project.txt文件中添加混淆的项目规则，可参考后文“混淆规则”。</li>
<li>proguard-rules.pro表示使用项目根目录下的 ‘proguard-rules.pro’文件中的混淆规则。</li>
</ul>
<p>提示：proguard-rules.pro文件名可以任意，只要在配置文件中指明即可。比如，从其它项目中复制一个proguard.cfg混淆规则文件，只需将上面的代码改成 proguardFiles getDefaultProguardFile(‘proguard-android.txt’), ‘proguard.cfg’即可，这句话表示使用项目中根目录下的proguard.cfg文件作为本项目的混淆规则文件。</p>
<p>3.打包项目，使用Build菜单下的Generate Signed APK进行打包即可。注意，记得在Build Type：选项下选择release，否则只打包不会混淆。<br>混淆的基本步骤就是这样，但是真正的核心部分在于混淆规则的定义。</p>
<h2 id="创建KeyStore文件"><a href="#创建KeyStore文件" class="headerlink" title="创建KeyStore文件"></a>创建KeyStore文件</h2><p>安装android studio后，在系统盘的用户目录下有一个.android文件夹，签名工具就在这个文件夹下面。<br><img src="http://images.cnitblog.com/blog/141063/201501/101506035464910.jpg" alt=""></p>
<p>进入此文件下，我们可以看到我们已经有的*.keysotre文件。<br><img src="http://images.cnitblog.com/blog/141063/201501/101508165461011.jpg" alt=""></p>
<p>我这里已经有了一个debug.keystore文件了，不过我暂时用不着，也不记得密码啥子的了。<br>所以我们重新生成一个，也可以删除原有内容，然后重新生成一个文件。<br><img src="http://images.cnitblog.com/blog/141063/201501/101511480469596.jpg" alt=""></p>
<p>当然，我们要先进入.android文件夹下面才能操作。运行cmd =&gt; 输入：cd .android =&gt;再输入我们的命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">keytool -genkey -v -keystore release.keystore -alias androiddebugkey -keyalg RSA -validity 10000</div></pre></td></tr></table></figure></p>
<p>完成后续的生成这样一个release.keystore文件我们就生成了。生成的文件，我们需要拷贝到和上面的配置（build.gradle），同目录下即可。</p>
<h2 id="混淆规则"><a href="#混淆规则" class="headerlink" title="混淆规则"></a>混淆规则</h2><p>Android是使用Java开发的，所以开发者可以使用ProGuard对代码进行混淆。SDK已经集成了ProGuard工具，开发者可以从SDK目录下的\tools\proguard目录中进行查看。</p>
<blockquote>
<p>ProGuard是一个免费的Java类文件收缩，优化，混淆和预校验器。它可以检测并删除未使用的类，字段，方法和属性。它可以优化字节码，并删除未使用的指令。它可以将类、字段和方法使用短无意义的名称进行重命名。最后，预校验的Java6或针对Java MicroEdition的所述处理后的码。</p>
</blockquote>
<p>下面就和大家分享一下对使用了第三方库的项目进行混淆的经验。</p>
<p>ProGuard默认会对第三方库也进行混淆的，而第三方库有的已经混淆过了，有的使用了Java反射技术，所以我们在进行代码混淆的时候要排除这些第三方库。排除对第三方库的混淆需要在混淆规则文件（通常是：proguard-project.txt或proguard.cfg或proguard-rules.pro或proguard-rules.txt也可以是其它的文件名只要在配置文件中将含有混淆规则的文件名配置进去就行了）中添加如下规则：</p>
<ul>
<li>1.如果使用了Gson之类的工具要使JavaBean类即实体类不被混淆。</li>
<li>2.如果使用了自定义控件那么要保证它们不参与混淆。</li>
<li>3.如果使用了枚举要保证枚举不被混淆。</li>
<li>4.对第三方库中的类不进行混淆</li>
</ul>
<p>A.混淆时保护引用的第三方jar包,如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">-libraryjars libs/baidumapapi_v3_2_0.jar  #保护引用的第三方jar包不被混淆</div></pre></td></tr></table></figure></p>
<p>注意：在使用Eclipse+ADT时需要加入-libraryjars libs/…，如果你是使用Android Studio开发的项目则不需要加入libs包中的jar包，这是因为，通过Android Studio进行混淆代码时，默认已经将 lib目录中的 jar 都已经添加到打包脚本中，所以不需要再次手动添加，否则会出现“ java.io.IOException: The same input jar is specified twice” 错误。</p>
<p>B.混淆时保护第三方jar包中的类不被混淆,如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">-keep class com.baidu.** &#123; *; &#125;   #让ProGuard不要警告找不到com.baidu.**这个包里面的类的相关引用</div><div class="line">-dontwarn com.baidu.**  #保持com.baidu.**这个包里面的所有类和所有方法不被混淆。</div></pre></td></tr></table></figure></p>
<h2 id="规则说明"><a href="#规则说明" class="headerlink" title="规则说明"></a>规则说明</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div></pre></td><td class="code"><pre><div class="line">#指定代码的压缩级别</div><div class="line">-optimizationpasses 5</div><div class="line"></div><div class="line">#包明不混合大小写</div><div class="line">-dontusemixedcaseclassnames</div><div class="line"></div><div class="line">#不去忽略非公共的库类</div><div class="line">-dontskipnonpubliclibraryclasses</div><div class="line"></div><div class="line">#优化  不优化输入的类文件</div><div class="line">-dontoptimize</div><div class="line"></div><div class="line">#预校验</div><div class="line">-dontpreverify</div><div class="line"></div><div class="line">#混淆时是否记录日志</div><div class="line">-verbose</div><div class="line"></div><div class="line"># 混淆时所采用的算法</div><div class="line">-optimizations !code/simplification/arithmetic,!field/*,!class/merging/*</div><div class="line"></div><div class="line">#保护注解</div><div class="line">-keepattributes *Annotation*</div><div class="line"></div><div class="line"># 保持哪些类不被混淆</div><div class="line">-keep public class * extends android.app.Fragment</div><div class="line">-keep public class * extends android.app.Activity</div><div class="line">-keep public class * extends android.app.Application</div><div class="line">-keep public class * extends android.app.Service</div><div class="line">-keep public class * extends android.content.BroadcastReceiver</div><div class="line">-keep public class * extends android.content.ContentProvider</div><div class="line">-keep public class * extends android.app.backup.BackupAgentHelper</div><div class="line">-keep public class * extends android.preference.Preference</div><div class="line">-keep public class com.android.vending.licensing.ILicensingService</div><div class="line">#如果有引用v4包可以添加下面这行</div><div class="line">-keep public class * extends android.support.v4.app.Fragment</div><div class="line"></div><div class="line">#忽略警告</div><div class="line">-ignorewarning</div><div class="line"></div><div class="line">#####################记录生成的日志数据,gradle build时在本项目根目录输出################</div><div class="line"></div><div class="line">#apk 包内所有 class 的内部结构</div><div class="line">-dump class_files.txt</div><div class="line">#未混淆的类和成员</div><div class="line">-printseeds seeds.txt</div><div class="line">#列出从 apk 中删除的代码</div><div class="line">-printusage unused.txt</div><div class="line">#混淆前后的映射</div><div class="line">-printmapping mapping.txt</div><div class="line"></div><div class="line">#####################记录生成的日志数据，gradle build时 在本项目根目录输出-end################</div><div class="line"></div><div class="line"></div><div class="line">################混淆保护自己项目的部分代码以及引用的第三方jar包library#########################</div><div class="line">#-libraryjars libs/umeng-analytics-v5.2.4.jar</div><div class="line">#-libraryjars libs/alipaysdk.jar</div><div class="line">#-libraryjars libs/alipaysecsdk.jar</div><div class="line">#-libraryjars libs/alipayutdid.jar</div><div class="line">#-libraryjars libs/wup-1.0.0-SNAPSHOT.jar</div><div class="line">#-libraryjars libs/weibosdkcore.jar</div><div class="line"></div><div class="line"></div><div class="line">#三星应用市场需要添加:sdk-v1.0.0.jar,look-v1.0.1.jar</div><div class="line">#-libraryjars libs/sdk-v1.0.0.jar</div><div class="line">#-libraryjars libs/look-v1.0.1.jar</div><div class="line"></div><div class="line">#我是以libaray的形式引用了一个图片加载框架,如果不想混淆 keep 掉</div><div class="line">-keep class com.nostra13.universalimageloader.** &#123; *; &#125;</div><div class="line"></div><div class="line">#友盟</div><div class="line">-keep class com.umeng.**&#123;*;&#125;</div><div class="line"></div><div class="line">#支付宝</div><div class="line">-keep class com.alipay.android.app.IAliPay&#123;*;&#125;</div><div class="line">-keep class com.alipay.android.app.IAlixPay&#123;*;&#125;</div><div class="line">-keep class com.alipay.android.app.IRemoteServiceCallback&#123;*;&#125;</div><div class="line">-keep class com.alipay.android.app.lib.ResourceMap&#123;*;&#125;</div><div class="line"></div><div class="line"></div><div class="line">#信鸽推送</div><div class="line">-keep class com.tencent.android.tpush.**  &#123;* ;&#125;</div><div class="line">-keep class com.tencent.mid.**  &#123;* ;&#125;</div><div class="line"></div><div class="line"></div><div class="line">#自己项目特殊处理代码</div><div class="line"></div><div class="line">#忽略警告</div><div class="line">-dontwarn com.veidy.mobile.common.**</div><div class="line">#保留一个完整的包</div><div class="line">-keep class com.veidy.mobile.common.** &#123;</div><div class="line">    *;</div><div class="line"> &#125;</div><div class="line"></div><div class="line">-keep class  com.veidy.activity.login.WebLoginActivity&#123;*;&#125;</div><div class="line">-keep class  com.veidy.activity.UserInfoFragment&#123;*;&#125;</div><div class="line">-keep class  com.veidy.activity.HomeFragmentActivity&#123;*;&#125;</div><div class="line">-keep class  com.veidy.activity.CityActivity&#123;*;&#125;</div><div class="line">-keep class  com.veidy.activity.ClinikActivity&#123;*;&#125;</div><div class="line"></div><div class="line">#如果引用了v4或者v7包</div><div class="line">-dontwarn android.support.**</div><div class="line"></div><div class="line">############混淆保护自己项目的部分代码以及引用的第三方jar包library-end##################</div><div class="line"></div><div class="line">-keep public class * extends android.view.View &#123;</div><div class="line">    public &lt;init&gt;(android.content.Context);</div><div class="line">    public &lt;init&gt;(android.content.Context, android.util.AttributeSet);</div><div class="line">    public &lt;init&gt;(android.content.Context, android.util.AttributeSet, int);</div><div class="line">    public void set*(...);</div><div class="line">&#125;</div><div class="line"></div><div class="line">#保持 native 方法不被混淆</div><div class="line">-keepclasseswithmembernames class * &#123;</div><div class="line">    native &lt;methods&gt;;</div><div class="line">&#125;</div><div class="line"></div><div class="line">#保持自定义控件类不被混淆</div><div class="line">-keepclasseswithmembers class * &#123;</div><div class="line">    public &lt;init&gt;(android.content.Context, android.util.AttributeSet);</div><div class="line">&#125;</div><div class="line"></div><div class="line">#保持自定义控件类不被混淆</div><div class="line">-keepclasseswithmembers class * &#123;</div><div class="line">    public &lt;init&gt;(android.content.Context, android.util.AttributeSet, int);</div><div class="line">&#125;</div><div class="line">#保持自定义控件类不被混淆</div><div class="line">-keepclassmembers class * extends android.app.Activity &#123;</div><div class="line">   public void *(android.view.View);</div><div class="line">&#125;</div><div class="line"></div><div class="line">#保持 Parcelable 不被混淆</div><div class="line">-keep class * implements android.os.Parcelable &#123;</div><div class="line">  public static final android.os.Parcelable$Creator *;</div><div class="line">&#125;</div><div class="line"></div><div class="line">#保持 Serializable 不被混淆</div><div class="line">-keepnames class * implements java.io.Serializable</div><div class="line"></div><div class="line">#保持 Serializable 不被混淆并且enum 类也不被混淆</div><div class="line">-keepclassmembers class * implements java.io.Serializable &#123;</div><div class="line">    static final long serialVersionUID;</div><div class="line">    private static final java.io.ObjectStreamField[] serialPersistentFields;</div><div class="line">    !static !transient &lt;fields&gt;;</div><div class="line">    !private &lt;fields&gt;;</div><div class="line">    !private &lt;methods&gt;;</div><div class="line">    private void writeObject(java.io.ObjectOutputStream);</div><div class="line">    private void readObject(java.io.ObjectInputStream);</div><div class="line">    java.lang.Object writeReplace();</div><div class="line">    java.lang.Object readResolve();</div><div class="line">&#125;</div><div class="line"></div><div class="line">#保持枚举 enum 类不被混淆 如果混淆报错，建议直接使用上面的 -keepclassmembers class * implements java.io.Serializable即可</div><div class="line">#-keepclassmembers enum * &#123;</div><div class="line">#  public static **[] values();</div><div class="line">#  public static ** valueOf(java.lang.String);</div><div class="line">#&#125;</div><div class="line"></div><div class="line">-keepclassmembers class * &#123;</div><div class="line">    public void *ButtonClicked(android.view.View);</div><div class="line">&#125;</div><div class="line"></div><div class="line">#不混淆资源类</div><div class="line">-keepclassmembers class **.R$* &#123;</div><div class="line">    public static &lt;fields&gt;;</div><div class="line">&#125;</div><div class="line"></div><div class="line">#避免混淆泛型 如果混淆报错建议关掉</div><div class="line">#–keepattributes Signature</div><div class="line"></div><div class="line">#移除log 测试了下没有用还是建议自己定义一个开关控制是否输出日志</div><div class="line">#-assumenosideeffects class android.util.Log &#123;</div><div class="line">#    public static boolean isLoggable(java.lang.String, int);</div><div class="line">#    public static int v(...);</div><div class="line">#    public static int i(...);</div><div class="line">#    public static int w(...);</div><div class="line">#    public static int d(...);</div><div class="line">#    public static int e(...);</div><div class="line">#&#125;</div></pre></td></tr></table></figure>
<p>另外加上一段，如果用用到Gson解析包的，直接添加下面这几行就能成功混淆，不然会报错。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">#gson</div><div class="line">#-libraryjars libs/gson-2.2.2.jar</div><div class="line">-keepattributes Signature</div><div class="line"># Gson specific classes</div><div class="line">-keep class sun.misc.Unsafe &#123; *; &#125;</div><div class="line"># Application classes that will be serialized/deserialized over Gson</div><div class="line">-keep class com.google.gson.examples.android.model.** &#123; *; &#125;</div></pre></td></tr></table></figure></p>
<p>如果你使用了webview<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"># webview + js</div><div class="line">-keepattributes *JavascriptInterface*</div><div class="line"># keep 使用 webview 的类</div><div class="line">-keepclassmembers class  com.veidy.activity.WebViewActivity &#123;</div><div class="line">   public *;</div><div class="line">&#125;</div><div class="line"># keep 使用 webview 的类的所有的内部类</div><div class="line">-keepclassmembers  class  com.veidy.activity.WebViewActivity$*&#123;</div><div class="line">    *;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="混淆示例"><a href="#混淆示例" class="headerlink" title="混淆示例"></a>混淆示例</h2><p>开发中用到的一些混淆规则，大家可以根据需要复制到自己的项目中的混淆规则的文件中即可。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div></pre></td><td class="code"><pre><div class="line">################common###############  </div><div class="line">-keep class com.jph.android.entity.** &#123; *; &#125; #实体类不参与混淆  </div><div class="line">-keep class com.jph.android.view.** &#123; *; &#125; #自定义控件不参与混淆  </div><div class="line">  </div><div class="line">################baidu map###############  </div><div class="line">-libraryjars libs/baidumapapi_v3_2_0.jar  </div><div class="line">-libraryjars libs/locSDK_5.0.jar  </div><div class="line">-keep class com.baidu.** &#123; *; &#125;  </div><div class="line">-keep class vi.com.gdi.bgl.android.**&#123;*;&#125;  </div><div class="line">-dontwarn com.baidu.**  </div><div class="line">  </div><div class="line">  </div><div class="line">################afinal##################  </div><div class="line">#-libraryjars libs/afinal_0.5_bin.jar  </div><div class="line">#-keep class net.tsz.afinal.** &#123; *; &#125;   </div><div class="line">#-keep public class * extends net.tsz.afinal.**    </div><div class="line">#-keep public interface net.tsz.afinal.** &#123;*;&#125;  </div><div class="line">#-dontwarn net.tsz.afinal.**  </div><div class="line">  </div><div class="line">################xutils##################  </div><div class="line">-libraryjars libs/xUtils-2.6.14.jar  </div><div class="line">-keep class com.lidroid.xutils.** &#123; *; &#125;   </div><div class="line">-keep public class * extends com.lidroid.xutils.**    </div><div class="line">-keepattributes Signature  </div><div class="line">-keepattributes *Annotation*  </div><div class="line">-keep public interface com.lidroid.xutils.** &#123;*;&#125;  </div><div class="line">-dontwarn com.lidroid.xutils.**  </div><div class="line">-keepclasseswithmembers class com.jph.android.entity.** &#123;  </div><div class="line">    &lt;fields&gt;;  </div><div class="line">    &lt;methods&gt;;  </div><div class="line">&#125;  </div><div class="line">  </div><div class="line">################支付宝##################  </div><div class="line">-libraryjars libs/alipaysecsdk.jar  </div><div class="line">-libraryjars libs/alipayutdid.jar  </div><div class="line">-libraryjars libs/alipaysdk.jar  </div><div class="line">-keep class com.alipay.android.app.IAliPay&#123;*;&#125;  </div><div class="line">-keep class com.alipay.android.app.IAlixPay&#123;*;&#125;  </div><div class="line">-keep class com.alipay.android.app.IRemoteServiceCallback&#123;*;&#125;  </div><div class="line">-keep class com.alipay.android.app.lib.ResourceMap&#123;*;&#125;  </div><div class="line">  </div><div class="line">################gson##################  </div><div class="line">-libraryjars libs/gson-2.2.4.jar  </div><div class="line">-keep class com.google.gson.** &#123;*;&#125;  </div><div class="line">#-keep class com.google.**&#123;*;&#125;  </div><div class="line">-keep class sun.misc.Unsafe &#123; *; &#125;  </div><div class="line">-keep class com.google.gson.stream.** &#123; *; &#125;  </div><div class="line">-keep class com.google.gson.examples.android.model.** &#123; *; &#125;   </div><div class="line">-keep class com.google.** &#123;  </div><div class="line">    &lt;fields&gt;;  </div><div class="line">    &lt;methods&gt;;  </div><div class="line">&#125;  </div><div class="line">-keepclassmembers class * implements java.io.Serializable &#123;  </div><div class="line">    static final long serialVersionUID;  </div><div class="line">    private static final java.io.ObjectStreamField[] serialPersistentFields;  </div><div class="line">    private void writeObject(java.io.ObjectOutputStream);  </div><div class="line">    private void readObject(java.io.ObjectInputStream);  </div><div class="line">    java.lang.Object writeReplace();  </div><div class="line">    java.lang.Object readResolve();  </div><div class="line">&#125;  </div><div class="line">-dontwarn com.google.gson.**  </div><div class="line">  </div><div class="line">  </div><div class="line">  </div><div class="line">################httpmime/httpcore##########  </div><div class="line">-libraryjars libs/httpcore-4.3.2.jar  </div><div class="line">-libraryjars libs/httpmime-4.3.5.jar  </div><div class="line">-keep class org.apache.http.** &#123;*;&#125;  </div><div class="line">-dontwarn org.apache.http.**  </div><div class="line">  </div><div class="line">####################jpush##################  </div><div class="line">-libraryjars libs/jpush-sdk-release1.7.1.jar  </div><div class="line">-keep class cn.jpush.** &#123; *; &#125;  </div><div class="line">-keep public class com.umeng.fb.ui.ThreadView &#123; &#125; #双向反馈功能代码不混淆  </div><div class="line">-dontwarn cn.jpush.**  </div><div class="line">-keepclassmembers class * &#123;  </div><div class="line">    public &lt;init&gt;(org.json.JSONObject);  </div><div class="line">&#125;  </div><div class="line"> #不混淆R类  </div><div class="line">-keep public class com.jph.android.R$*&#123;   </div><div class="line">    public static final int *;  </div><div class="line">&#125;  </div><div class="line">-keepclassmembers enum * &#123;  </div><div class="line">    public static **[] values();  </div><div class="line">    public static ** valueOf(java.lang.String);  </div><div class="line">&#125;  </div><div class="line">  </div><div class="line">####################umeng##################  </div><div class="line">-libraryjars libs/umeng-analytics-v5.2.4.jar  </div><div class="line">-keep class com.umeng.analytics.** &#123;*;&#125;  </div><div class="line">-dontwarn com.umeng.analytics.**  </div><div class="line">  </div><div class="line">#-keep public class * extends com.umeng.**    </div><div class="line">#-keep public class * extends com.umeng.analytics.**    </div><div class="line">#-keep public class * extends com.umeng.common.**    </div><div class="line">#-keep public class * extends com.umeng.newxp.**   </div><div class="line">-keep class com.umeng.** &#123; *; &#125;    </div><div class="line">-keep class com.umeng.analytics.** &#123; *; &#125;    </div><div class="line">-keep class com.umeng.common.** &#123; *; &#125;    </div><div class="line">-keep class com.umeng.newxp.** &#123; *; &#125;   </div><div class="line">  </div><div class="line">-keepclassmembers class * &#123;  </div><div class="line">   public &lt;init&gt;(org.json.JSONObject);  </div><div class="line">&#125;  </div><div class="line">-keep class com.umeng.**  </div><div class="line">  </div><div class="line">-keep public class com.idea.fifaalarmclock.app.R$*&#123;  </div><div class="line">    public static final int *;  </div><div class="line">&#125;  </div><div class="line">  </div><div class="line">-keep public class com.umeng.fb.ui.ThreadView &#123;  </div><div class="line">&#125;  </div><div class="line">  </div><div class="line">-dontwarn com.umeng.**  </div><div class="line">  </div><div class="line">-dontwarn org.apache.commons.**  </div><div class="line">  </div><div class="line">-keep public class * extends com.umeng.**  </div><div class="line">  </div><div class="line">-keep class com.umeng.** &#123;*; &#125;  </div><div class="line">  </div><div class="line">####################universal-image-loader########  </div><div class="line">-libraryjars libs/universal-image-loader-1.9.3.jar  </div><div class="line">-keep class com.nostra13.universalimageloader.** &#123;*;&#125;  </div><div class="line">-dontwarn com.nostra13.universalimageloader.**  </div><div class="line">  </div><div class="line">  </div><div class="line">####################zxing#####################  </div><div class="line">-libraryjars libs/zxing.jar  </div><div class="line">-libraryjars libs/zxing_apply.jar  </div><div class="line">-keep class com.google.zxing.** &#123;*;&#125;  </div><div class="line">-dontwarn com.google.zxing.**  </div><div class="line">  </div><div class="line">####################BASE64Decoder##################  </div><div class="line">-libraryjars libs/sun.misc.BASE64Decoder.jar  </div><div class="line">  </div><div class="line">####################support.v4#####################  </div><div class="line">-libraryjars libs/android-support-v4.jar  </div><div class="line">-keep class android.support.v4.** &#123; *; &#125;  </div><div class="line">-dontwarn android.support.v4.**  </div><div class="line">  </div><div class="line">###################other####################  </div><div class="line"># slidingmenu 的混淆  </div><div class="line">-dontwarn com.jeremyfeinstein.slidingmenu.lib.**  </div><div class="line">-keep class com.jeremyfeinstein.slidingmenu.lib.** &#123; *; &#125;  </div><div class="line"># ActionBarSherlock混淆  </div><div class="line">-dontwarn com.actionbarsherlock.**  </div><div class="line">-keep class com.actionbarsherlock.** &#123; *; &#125;  </div><div class="line">-keep interface com.actionbarsherlock.** &#123; *; &#125;  </div><div class="line">-keep class * extends java.lang.annotation.Annotation &#123; *; &#125;  </div><div class="line">-keepclasseswithmembernames class * &#123;  </div><div class="line">    native &lt;methods&gt;;  </div><div class="line">&#125;  </div><div class="line">  </div><div class="line">-keep class com.jph.android.entity.** &#123;  </div><div class="line">    &lt;fields&gt;;  </div><div class="line">    &lt;methods&gt;;  </div><div class="line">&#125;  </div><div class="line">  </div><div class="line">-dontwarn android.support.**  </div><div class="line">-dontwarn com.slidingmenu.lib.app.SlidingMapActivity  </div><div class="line">-keep class android.support.** &#123; *; &#125;  </div><div class="line">-keep class com.actionbarsherlock.** &#123; *; &#125;  </div><div class="line">-keep interface com.actionbarsherlock.** &#123; *; &#125;  </div><div class="line">-keep class com.slidingmenu.** &#123; *; &#125;  </div><div class="line">-keep interface com.slidingmenu.** &#123; *; &#125;</div></pre></td></tr></table></figure></p>
<h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><ul>
<li><a href="http://tools.android.com/tech-docs/new-build-system/user-guide#TOC-Running-ProGuard" target="_blank" rel="external">TOC-Running-ProGuard</a></li>
<li><a href="stackoverflow.com/questions/17290023/obfuscation-in-android-studio">Obfuscation in Android Studio</a></li>
<li><a href="http://blog.csdn.net/fengyuzhengfan/article/details/43876197" target="_blank" rel="external">Android代码混淆之混淆规则</a></li>
<li><a href="http://blog.csdn.net/fengyuzhengfan/article/details/43876489" target="_blank" rel="external">Android代码混淆指南</a></li>
<li><a href="http://www.cnblogs.com/Supperlitt/p/4214949.html" target="_blank" rel="external">android studio混淆打包全揭秘</a></li>
<li><a href="https://m.oschina.net/blog/371889" target="_blank" rel="external">代码混淆和破解apk</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/12/10/android_app_obfuscation/" data-id="cj4zxrdz7000iu8nh64583l31" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/obfuscation/">obfuscation</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-android_app_decomplilcation" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/10/android_app_decomplilcation/" class="article-date">
  <time datetime="2015-12-10T06:32:29.000Z" itemprop="datePublished">2015-12-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/android/">android</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/10/android_app_decomplilcation/">android应用反编译</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>在Android开发的过程中，我们往往会去借鉴别人的应用是怎么开发的，那些漂亮的动画和精致的布局可能会让你爱不释手，作为一个开发者，很想知道这些效果界面是怎么去实现的，这时，就可以对该应用的APK进行反编译查看。下面是我参考了一些文章后简单的操作教程。</p>
<h2 id="编译环境"><a href="#编译环境" class="headerlink" title="编译环境"></a>编译环境</h2><p><strong> 测试环境</strong></p>
<ul>
<li>Windows</li>
</ul>
<p><strong> 使用工具</strong><br>1.CSDN下载地址：</p>
<ul>
<li>apktool   <a href="http://download.csdn.net/detail/vipzjyno1/7025111" target="_blank" rel="external">CSDN下载</a></li>
<li>dex2jar   <a href="http://download.csdn.net/detail/vipzjyno1/7025127" target="_blank" rel="external">CSDN下载</a></li>
<li>jd-gui    <a href="http://download.csdn.net/detail/vipzjyno1/7025145" target="_blank" rel="external">CSDN下载</a></li>
</ul>
<p>2.官网下载地址：(可能需要FQ)</p>
<ul>
<li>apktool <a href="http://ibotpeaches.github.io/Apktool/" target="_blank" rel="external">官网下载</a></li>
<li>dex2jar <a href="https://github.com/pxb1988/dex2jar" target="_blank" rel="external">官网下载</a></li>
<li>jd-gui  <a href="https://code.google.com/p/innlab/downloads/list" target="_blank" rel="external">官网下载</a></li>
</ul>
<p><strong> 工具介绍</strong></p>
<ul>
<li>apktool  作用：资源文件获取，可以提取出图片文件和布局文件进行使用查看</li>
<li>dex2jar  作用：将apk反编译成java源码（classes.dex转化成jar文件）</li>
<li>jd-gui   作用：查看APK中classes.dex转化成出的jar文件，即源码文件</li>
</ul>
<h2 id="反编译流程"><a href="#反编译流程" class="headerlink" title="反编译流程"></a>反编译流程</h2><p><strong> 一、apk反编译得到程序的源代码、图片、XML配置、语言资源等文件</strong></p>
<p>下载上述工具中的apktool，解压得到3个文件：aapt.exe，apktool.bat，apktool.jar ，将需要反编译的APK文件放到该目录下，</p>
<p>打开命令行界面（运行-CMD） ，定位到apktool文件夹，输入以下命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">apktool.bat d -f  test.apk  test</div></pre></td></tr></table></figure></p>
<p><img src="http://img.blog.csdn.net/20140311215117218?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdmlwemp5bm8x/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""></p>
<p>命令中test.apk指的是要反编译的APK文件全名，test为反编译后资源文件存放的目录名称，即为：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">apktool.bat   d  -f    [apk文件 ]   [输出文件夹]</div></pre></td></tr></table></figure></p>
<p>获取成功，之后发现在文件夹下多了个test文件，点击便可以查看该应用的所有资源文件了。<br>如果你想将反编译完的文件重新打包成apk，那你可以：输入<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">apktool.bat   b    test  //你编译出来文件夹</div></pre></td></tr></table></figure></p>
<p><img src="http://img.blog.csdn.net/20140311215335046?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdmlwemp5bm8x/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""></p>
<p>之后在之前的test文件下便可以发现多了2个文件夹:</p>
<ul>
<li>build</li>
<li>dist(里面存放着打包出来的APK文件)</li>
</ul>
<p><strong> 二、Apk反编译得到Java源代码</strong></p>
<p>下载上述工具中的dex2jar和jd-gui ，解压。</p>
<p>将要反编译的APK后缀名改为.rar或则 .zip，并解压，得到其中的额classes.dex文件（它就是java文件编译再通过dx工具打包而成的），将获取到的classes.dex放到之前解压出来的工具dex2jar-0.0.9.15 文件夹内，</p>
<p>在命令行下定位到dex2jar.bat所在目录，输入<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dex2jar.bat   classes.dex</div></pre></td></tr></table></figure></p>
<p><img src="http://img.blog.csdn.net/20140311215400359" alt=""></p>
<p>在该目录下会生成一个classes_dex2jar.jar的文件，然后打开工具jd-gui文件夹里的jd-gui.exe，之后用该工具打开之前生成的classes_dex2jar.jar文件，便可以看到源码了：<br><img src="http://img.blog.csdn.net/20140311215413031" alt=""></p>
<p>被混淆过的效果图（类文件名称以及里面的方法名称都会以a,b,c….之类的样式命名）：<br><img src="http://img.blog.csdn.net/20140311215508890" alt=""></p>
<p><strong> 三、 图形化反编译apk（本人未使用过）</strong></p>
<p>上述步骤一、二讲述了命令行反编译apk，现在提供一种图形化反编译工具：Androidfby</p>
<p>首先，下载上述反编译工具包，打开Androidfby目录，双击Android反编译工具.exe，就可以浏览打开要反编译的apk<br><img src="http://img.blog.csdn.net/20140311215538953" alt=""></p>
<p>通过反编译，你可以获知该应用用到了什么第3方的库文件，它的代码是如何编写的等等。</p>
<p>然而，如果该APK进行了混淆处理，那么你看到的类文件名称以及里面的方法名称都会以a,b,c….之类的样式命名，所以你可以想找到你所想得知的界面代码可能会十分费劲，找到了代码可能看起来也会很费劲，可是一个大体的思路会获得，有了这个思路，你就可以自己去尝试了。</p>
<p>本人曾经想写一个类似唱吧的名人界面布局，可是当初第一次接触不知道如何去写，进进行了反编译，即使他的那个代码是混淆过的，我也看出来他是通过LISTVIEW的TYPE设定不同的ITEM布局实现。可能好多引用都是采用重写VIEW来实现效果，你可以得到他的大体思路对你的开发有益无害。</p>
<p>还有处于一个开发者辛辛苦苦将自己的应用开发出来被别人一反编译便成为了他自己的东西，所以要进行混淆处理。</p>
<h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><ul>
<li><a href="http://blog.csdn.net/vipzjyno1/article/details/21039349/" target="_blank" rel="external">Android APK反编译就这么简单</a></li>
<li><a href="http://ibotpeaches.github.io/Apktool/" target="_blank" rel="external">A tool for reverse engineering Android apk files</a></li>
<li><a href="https://sourceforge.net/projects/dex2jar/" target="_blank" rel="external">SourceForge-dex2jar</a></li>
<li><a href="https://code.google.com/p/innlab/downloads/list" target="_blank" rel="external">Tool collections</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/12/10/android_app_decomplilcation/" data-id="cj4zxrdz7000cu8nhz03qqdik" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/decomplication/">decomplication</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-tools_iphone_download_app" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/10/tools_iphone_download_app/" class="article-date">
  <time datetime="2015-12-10T02:23:29.000Z" itemprop="datePublished">2015-12-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/tools/">tools</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/10/tools_iphone_download_app/">iPhone切换AppStore</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>最近下载Gmail，发现中国区的AppStore是没有这款APP的，还有很多应用在国内的AppStore也搜索不到，今天分享一下如何把中国区的AppStore切换成美国区AppStore的办法，这个办法其实比较小白，不过可能还有很多同学不知道，昨天刚好有朋友问，今天就来说说iPhone/iPad 切换美国区AppStore的办法。</p>
<h2 id="为何要切换"><a href="#为何要切换" class="headerlink" title="为何要切换"></a>为何要切换</h2><p>当然是有一些特别的需求，比如你要下载Gmail（虽然如今Gmail无法使用），你打开中国区的AppStore会发现搜索“Gmail”是不存在的，没有谷歌官方的那个Gmail应用。</p>
<p>当然不方便之处不仅于此，由于国情区别，还有很多应用在国内的AppStore中是无法下载的，所以这个时候，我们就要使用美国区的AppStore。那么相对比较方便的办法就是将自己的AppStore切换为美国区。</p>
<h2 id="如何切换"><a href="#如何切换" class="headerlink" title="如何切换"></a>如何切换</h2><p>因为方法比较简单，具有操作唯一性，所以除了填表，图我就不放了。这里需要友情提示一下，如果你是有的放矢就是要去下某些应用，那么最好在AppStore帐号切换为美国区之前先列一份小清单，免得进入之后看到一堆洋文突发惶恐选择性失忆。</p>
<blockquote>
<p>首先，打开你的iPhone/iPad的“设置”；<br>    选择“iTunes Store与App Store”，然后点击你的Apple ID（蓝色那个，在最上面）；<br>    然后“查看Apple ID”，这个时候可能需要输入密码，不要紧，输入即可；<br>    接着点选“国家/地区”，“更改国家或地区”，在“中国”下面就是“United States”，选择，下一步；<br>    右下方“Agree”，然后在弹出的对话框中选择“Agree”；<br>    这里需要注意一下，如果你不购买付费应用，就在“BILLING INFORMATION”中选择“None”；<br>    然后拉到下方需要填表的地方，这里我给一张图，因为涉及隐私，所以上面简单的就不提供了，Street可以不填，City什么的也完全可以像我一样就这么放着，在State一栏中不能留空，需要选择一个美国的州，随便选择即可，Zip邮编这里美国的貌似是五位，你把自己的邮编去掉一位就行了，电话是七位，同样随便填，然后Next;</p>
</blockquote>
<h2 id="方法修正"><a href="#方法修正" class="headerlink" title="方法修正"></a>方法修正</h2><p>上面的方法也许可以，但是本人用的iPhone5s亲测，没有所谓的“BILLING INFORMATION”中选择“None”这个选择。后来的解决办法如下：<br>1.下载Windows端的iTunes，然后在AppStore界面退出你注册的国内apple ID，然后国家选择美国（United State）,在AppStore界面的底部，右下角。<br>2.注册新的Apple ID，此时你需要另外用一个邮箱，之前你注册过的邮箱注册会提示已经注册。<br>3.iTunes上注册和iPhone手机上的区别在于，它有“BILLING INFORMATION”中选择“None”的选项。城市信息可以随便填。state随便选，zip就是这个州的邮编。自己Google。（填写错误是不行的，我选择的是Alabama，zip是36006）<br>4.点击手机的Settings,选择Itunes Store与App Store选项，点击Apple ID。注销当前的ID。<br>5.登录国外的AppStore（可能需要FQ）将你想下载的应用链接发送到iPhone手机上，手机点击链接会自动识别为国外的AppStore，然后跳转到国外市场，然后登录你新注册的账号就可以正常下载，安装使用。</p>
<p>说明：不用重新注册，修改所属国家貌似也是可以的，同样国行手机是不行的，添加信用卡这栏没有none选项。PC端iTunes上没有试验过。</p>
<h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><ul>
<li><a href="http://www.jubushoushen.com/1189.html" target="_blank" rel="external">切换美国区AppStore，下载中国区AppStore不存在的APP</a></li>
<li><a href="http://ccm.net/faq/31227-appstore-account-not-in-this-store-your-account-is-not-valid-for-use-in-the-us" target="_blank" rel="external">Account not in this store</a> </li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/12/10/tools_iphone_download_app/" data-id="cj4zxre4c006au8nhc7pzvjic" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iphone/">iphone</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-android_textview_attributes" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/09/android_textview_attributes/" class="article-date">
  <time datetime="2015-12-09T03:06:29.000Z" itemprop="datePublished">2015-12-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/android/">android</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/09/android_textview_attributes/">TextView属性详解</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>TextView组件在android开发中使用频率是非常高的了，如果对它的属性很了解的话，开发中无疑可以节省很多时间和精力。要查看它的属性，正确的姿势自然是refer to官方文档了。但是官方文档不仅被墙而且是英文的，怎么看都有些蛋疼。下面整理了一篇别人的劳动成果（见文章末尾）。</p>
<h2 id="属性解析"><a href="#属性解析" class="headerlink" title="属性解析"></a>属性解析</h2><p><font color="#0000CD">android:autoLink</font>设置是否当文本为URL链接/email/电话号码/map时，文本显示为可点击的链接。可选值(none/web/email/phone/map/all) </p>
<p><font color="#0000CD">android:autoText</font>如果设置，将自动执行输入值的拼写纠正。此处无效果，在显示输入法并输入的时候起作用。 </p>
<p><font color="#0000CD">android:bufferType</font>指定getText()方式取得的文本类别。选项editable 类似于StringBuilder可追加字符，<br>也就是说getText后可调用append方法设置文本内容。spannable 则可在给定的字符区域使用样式。 </p>
<p><font color="#0000CD">android:capitalize</font>设置英文字母大写类型。此处无效果，需要弹出输入法才能看得到，参见EditView此属性说明。 </p>
<p><font color="#0000CD">android:cursorVisible</font>设定光标为显示/隐藏，默认显示。 </p>
<p><font color="#0000CD">android:digits</font>设置允许输入哪些字符。如“1234567890.+-*/% ()” </p>
<p><font color="#0000CD">android:drawableBottom</font>在text的下方输出一个drawable，如图片。如果指定一个颜色的话会把text的背景设为该颜色，并且同时和background使用时覆盖后者。 </p>
<p><font color="#0000CD">android:drawableLeft</font>在text的左边输出一个drawable，如图片。 </p>
<p><font color="#0000CD">android:drawablePadding</font>设置text与drawable(图片)的间隔，与drawableLeft、drawableRight、drawableTop、drawableBottom一起使用，可设置为负数，单独使用没有效果。 </p>
<p><font color="#0000CD">android:drawableRight</font>在text的右边输出一个drawable。 </p>
<p><font color="#0000CD">android:drawableTop</font>在text的正上方输出一个drawable。</p>
<p><font color="#0000CD">android:editable</font>设置是否可编辑。 </p>
<p><font color="#0000CD">android:editorExtras</font>设置文本的额外的输入数据。 </p>
<p><font color="#0000CD">android:ellipsize</font>设置当文字过长时,该控件该如何显示。有如下值设置：</p>
<ul>
<li>”start”—省略号显示在开头;</li>
<li>”end”——省略号显示在结尾;</li>
<li>”middle”—-省略号显示在中间; </li>
<li>”marquee” ——以跑马灯的方式显示(动画横向移动)<br><font color="#0000CD">android:marqueeRepeatLimit</font>在ellipsize指定marquee的情况下，设置重复滚动的次数，当设置为marquee_forever时表示无限次。</li>
</ul>
<p><font color="#0000CD">android:freezesText</font>设置保存文本的内容以及光标的位置。 </p>
<p><font color="#0000CD">android:gravity</font>设置文本位置，如设置成“center”，文本将居中显示。 </p>
<p><font color="#0000CD">android:hintText</font>为空时显示的文字提示信息，可通过textColorHint设置提示信息的颜色。此属性在EditView中使用，但是这里也可以用。 </p>
<p><font color="#0000CD">android:imeOptions</font>附加功能，设置右下角IME动作与编辑框相关的动作，如actionDone右下角将显示一个“完成”，而不设置默认是一个回车符号。这个在EditView中再详细<br>说明。 </p>
<p><font color="#0000CD">android:imeActionId</font>设置IME动作ID。 </p>
<p><font color="#0000CD">android:imeActionLabel</font>设置IME动作标签。 </p>
<p><font color="#0000CD">android:includeFontPadding</font>设置文本是否包含顶部和底部额外空白，默认为true。 </p>
<p><font color="#0000CD">android:inputMethod</font>为文本指定输入法，需要完全限定名(完整的包名)。例如：com.google.android.inputmethod.pinyin，但是有时会报错找不到。 </p>
<p><font color="#0000CD">android:inputType</font>设置文本的类型，用于帮助输入法显示合适的键盘类型。在EditView中再详细说明，这里无效果。 </p>
<p><font color="#0000CD">android:linksClickable</font>设置链接是否点击连接，若设置为false，即使设置了autoLink也不可链接。 </p>
<p><font color="#0000CD">android:ems</font>设置TextView的宽度为N个字符的宽度。这里测试为一个汉字字符宽度 </p>
<p><font color="#0000CD">android:maxEms</font>设置TextView的宽度为最长为N个字符的宽度。与ems同时使用时覆盖ems选项。 </p>
<p><font color="#0000CD">android:minEms</font>设置TextView的宽度为最短为N个字符的宽度。与ems同时使用时覆盖ems选项。 </p>
<p><font color="#0000CD">android:maxLength</font>限制显示的文本长度，超出部分不显示。 </p>
<p><font color="#0000CD">android:lines</font>设置文本的行数，设置两行就显示两行，即使第二行没有数据。 </p>
<p><font color="#0000CD">android:maxLines</font>设置文本的最大显示行数，与width或者layout_width结合使用，超出部分自动换行，超出行数将不显示。 </p>
<p><font color="#0000CD">android:minLines</font>设置文本的最小行数，与lines类似。 </p>
<p><font color="#0000CD">android:lineSpacingExtra</font>设置行间距。 </p>
<p><font color="#0000CD">android:lineSpacingMultiplier</font>设置行间距的倍数。如”1.2” </p>
<p><font color="#0000CD">android:numeric</font>如果被设置，该TextView有一个数字输入法。此处无用，设置后唯一效果是TextView有点击效果，此属性在EdtiView将详细说明。 </p>
<p><font color="#0000CD">android:password</font>以小点”.”显示文本 </p>
<p><font color="#0000CD">android:phoneNumber</font>设置为电话号码的输入方式。 </p>
<p><font color="#0000CD">android:privateImeOptions</font>设置输入法选项，此处无用，在EditText将进一步讨论。 </p>
<p><font color="#0000CD">android:scrollHorizontally</font>设置文本超出TextView的宽度的情况下，是否出现横拉条。 </p>
<p><font color="#0000CD">android:selectAllOnFocus</font>如果文本是可选择的，让他获取焦点而不是将光标移动为文本的开始位置或者末尾位置。TextView中设置后无效果。 </p>
<p><font color="#0000CD">android:shadowColor</font>指定文本阴影的颜色，需要与shadowRadius一起使用。 </p>
<p><font color="#0000CD">android:shadowDx</font>设置阴影横向坐标开始位置。 </p>
<p><font color="#0000CD">android:shadowDy</font>设置阴影纵向坐标开始位置。 </p>
<p><font color="#0000CD">android:shadowRadius</font>设置阴影的半径。设置为0.1就变成字体的颜色了，一般设置为3.0的效果比较好。 </p>
<p><font color="#0000CD">android:singleLine</font>设置单行显示。如果和layout<em>width一起使用，当文本不能全部显示时，后面用“…”来表示。如android:text=”test</em> singleLine “    </p>
<ul>
<li>android:singleLine=”true” android:layout_width=”20dp”将只显示“t…”。如果不设置singleLine或者设置为false，文本将自动换行<br><font color="#0000CD">android:text</font>设置显示文本.<br><font color="#0000CD">android:textAppearance</font>设置文字外观。如“?android:attr/textAppearanceLargeInverse”这里引用的是系统自带的一个外观，?表示系统是否有这种外观，否则使用默认的外观。可设置的值如下： </li>
<li>textAppearanceButton</li>
<li>textAppearanceInverse</li>
<li>textAppearanceLarge</li>
<li>textAppearanceLargeInverse</li>
<li>textAppearanceMedium</li>
<li>textAppearanceMediumInverse</li>
<li>textAppearanceSmall</li>
<li>textAppearanceSmallInverse </li>
</ul>
<p><font color="#0000CD">android:textColor</font>设置文本颜色 </p>
<p><font color="#0000CD">android:textColorHighlight</font>被选中文字的底色，默认为蓝色 </p>
<p><font color="#0000CD">android:textColorHint</font>设置提示信息文字的颜色，默认为灰色。与hint一起使用。 </p>
<p><font color="#0000CD">android:textColorLink</font>文字链接的颜色. </p>
<p><font color="#0000CD">android:textScaleX</font>设置文字之间间隔，默认为1.0f。 </p>
<p><font color="#0000CD">android:textSize</font>设置文字大小，推荐度量单位”sp”，如”15sp” </p>
<p><font color="#0000CD">android:textStyle</font>设置字形[bold(粗体) 0, italic(斜体) 1, bolditalic(又粗又斜) 2] 可以设置一个或多个，用“|”隔开 </p>
<p><font color="#0000CD">android:typeface</font>设置文本字体，必须是以下常量值之一：normal 0, sans 1, serif 2, monospace(等宽字体) 3] </p>
<p><font color="#0000CD">android:height</font>设置文本区域的高度，支持度量单位：px(像素)/dp/sp/in/mm(毫米) </p>
<p><font color="#0000CD">android:maxHeight</font>设置文本区域的最大高度 </p>
<p><font color="#0000CD">android:minHeight</font>设置文本区域的最小高度 </p>
<p><font color="#0000CD">android:width</font>设置文本区域的宽度，支持度量单位：px(像素)/dp/sp/in/mm(毫米)，与layout_width的区别看这里。 </p>
<p><font color="#0000CD">android:maxWidth</font>设置文本区域的最大宽度 </p>
<p><font color="#0000CD">android:minWidth</font>设置文本区域的最小宽度</p>
<h2 id="使用示例"><a href="#使用示例" class="headerlink" title="使用示例"></a>使用示例</h2><p>1.单行显示，超出到部分用省略号显示，需要设置到属性如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">android:layout_width=&quot;wrap_content&quot;</div><div class="line">android:singleLine=&quot;true&quot;//单行显示</div><div class="line">android:ellipsize=&quot;end&quot;//省略号出现在末尾</div></pre></td></tr></table></figure></p>
<p>2.设置超出11个长度时显示省略号:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;TextView</div><div class="line">       android:layout_width=&quot;wrap_content&quot;</div><div class="line">       android:layout_height=&quot;wrap_content&quot;</div><div class="line">       android:ellipsize=&quot;end&quot;</div><div class="line">       android:maxEms=&quot;11&quot;</div><div class="line">       android:singleLine=&quot;true&quot;</div><div class="line">       android:text=&quot;设置超出11个长度时显示省略号&quot;</div><div class="line">       android:textSize=&quot;14dp&quot; /&gt;</div></pre></td></tr></table></figure></p>
<h2 id="颜色码参考"><a href="#颜色码参考" class="headerlink" title="颜色码参考"></a>颜色码参考</h2><table><tbody><tr><th>颜色名</th><th>十六进制颜色值</th><th>颜色</th></tr><tr><td><font color="AliceBlue">AliceBlue</font></td><td><font color="#F0F8FF">#F0F8FF</font></td><td bgcolor="#F0F8FF">rgb(240, 248, 255)</td></tr><tr><td><font color="AntiqueWhite">AntiqueWhite</font></td><td><font color="#FAEBD7">#FAEBD7</font></td><td bgcolor="#FAEBD7">rgb(250, 235, 215)</td></tr><tr><td><font color="Aqua">Aqua</font></td><td><font color="#00FFFF">#00FFFF</font></td><td bgcolor="#00FFFF">rgb(0, 255, 255)</td></tr><tr><td><font color="Aquamarine">Aquamarine</font></td><td><font color="#7FFFD4">#7FFFD4</font></td><td bgcolor="#7FFFD4">rgb(127, 255, 212)</td></tr><tr><td><font color="Azure">Azure</font></td><td><font color="#F0FFFF">#F0FFFF</font></td><td bgcolor="#F0FFFF">rgb(240, 255, 255)</td></tr><tr><td><font color="Beige">Beige</font></td><td><font color="#F5F5DC">#F5F5DC</font></td><td bgcolor="#F5F5DC">rgb(245, 245, 220)</td></tr><tr><td><font color="Bisque">Bisque</font></td><td><font color="#FFE4C4">#FFE4C4</font></td><td bgcolor="#FFE4C4">rgb(255, 228, 196)</td></tr><tr><td><font color="Black">Black</font></td><td><font color="#000000">#000000</font></td><td bgcolor="#000000">rgb(0, 0, 0)</td></tr><tr><td><font color="BlanchedAlmond">BlanchedAlmond</font></td><td><font color="#FFEBCD">#FFEBCD</font></td><td bgcolor="#FFEBCD">rgb(255, 235, 205)</td></tr><tr><td><font color="Blue">Blue</font></td><td><font color="#0000FF">#0000FF</font></td><td bgcolor="#0000FF">rgb(0, 0, 255)</td></tr><tr><td><font color="BlueViolet">BlueViolet</font></td><td><font color="#8A2BE2">#8A2BE2</font></td><td bgcolor="#8A2BE2">rgb(138, 43, 226)</td></tr><tr><td><font color="Brown">Brown</font></td><td><font color="#A52A2A">#A52A2A</font></td><td bgcolor="#A52A2A">rgb(165, 42, 42)</td></tr><tr><td><font color="BurlyWood">BurlyWood</font></td><td><font color="#DEB887">#DEB887</font></td><td bgcolor="#DEB887">rgb(222, 184, 135)</td></tr><tr><td><font color="CadetBlue">CadetBlue</font></td><td><font color="#5F9EA0">#5F9EA0</font></td><td bgcolor="#5F9EA0">rgb(95, 158, 160)</td></tr><tr><td><font color="Chartreuse">Chartreuse</font></td><td><font color="#7FFF00">#7FFF00</font></td><td bgcolor="#7FFF00">rgb(127, 255, 0)</td></tr><tr><td><font color="Chocolate">Chocolate</font></td><td><font color="#D2691E">#D2691E</font></td><td bgcolor="#D2691E">rgb(210, 105, 30)</td></tr><tr><td><font color="Coral">Coral</font></td><td><font color="#FF7F50">#FF7F50</font></td><td bgcolor="#FF7F50">rgb(255, 127, 80)</td></tr><tr><td><font color="CornflowerBlue">CornflowerBlue</font></td><td><font color="#6495ED">#6495ED</font></td><td bgcolor="#6495ED">rgb(100, 149, 237)</td></tr><tr><td><font color="Cornsilk">Cornsilk</font></td><td><font color="#FFF8DC">#FFF8DC</font></td><td bgcolor="#FFF8DC">rgb(255, 248, 220)</td></tr><tr><td><font color="Crimson">Crimson</font></td><td><font color="#DC143C">#DC143C</font></td><td bgcolor="#DC143C">rgb(220, 20, 60)</td></tr><tr><td><font color="Cyan">Cyan</font></td><td><font color="#00FFFF">#00FFFF</font></td><td bgcolor="#00FFFF">rgb(0, 255, 255)</td></tr><tr><td><font color="DarkBlue">DarkBlue</font></td><td><font color="#00008B">#00008B</font></td><td bgcolor="#00008B">rgb(0, 0, 139)</td></tr><tr><td><font color="DarkCyan">DarkCyan</font></td><td><font color="#008B8B">#008B8B</font></td><td bgcolor="#008B8B">rgb(0, 139, 139)</td></tr><tr><td><font color="DarkGoldenRod">DarkGoldenRod</font></td><td><font color="#B8860B">#B8860B</font></td><td bgcolor="#B8860B">rgb(184, 134, 11)</td></tr><tr><td><font color="DarkGray">DarkGray</font></td><td><font color="#A9A9A9">#A9A9A9</font></td><td bgcolor="#A9A9A9">rgb(169, 169, 169)</td></tr><tr><td><font color="DarkGreen">DarkGreen</font></td><td><font color="#006400">#006400</font></td><td bgcolor="#006400">rgb(0, 100, 0)</td></tr><tr><td><font color="DarkKhaki">DarkKhaki</font></td><td><font color="#BDB76B">#BDB76B</font></td><td bgcolor="#BDB76B">rgb(189, 183, 107)</td></tr><tr><td><font color="DarkMagenta">DarkMagenta</font></td><td><font color="#8B008B">#8B008B</font></td><td bgcolor="#8B008B">rgb(139, 0, 139)</td></tr><tr><td><font color="DarkOliveGreen">DarkOliveGreen</font></td><td><font color="#556B2F">#556B2F</font></td><td bgcolor="#556B2F">rgb(85, 107, 47)</td></tr><tr><td><font color="Darkorange">Darkorange</font></td><td><font color="#FF8C00">#FF8C00</font></td><td bgcolor="#FF8C00">rgb(255, 140, 0)</td></tr><tr><td><font color="DarkOrchid">DarkOrchid</font></td><td><font color="#9932CC">#9932CC</font></td><td bgcolor="#9932CC">rgb(153, 50, 204)</td></tr><tr><td><font color="DarkRed">DarkRed</font></td><td><font color="#8B0000">#8B0000</font></td><td bgcolor="#8B0000">rgb(139, 0, 0)</td></tr><tr><td><font color="DarkSalmon">DarkSalmon</font></td><td><font color="#E9967A">#E9967A</font></td><td bgcolor="#E9967A">rgb(233, 150, 122)</td></tr><tr><td><font color="DarkSeaGreen">DarkSeaGreen</font></td><td><font color="#8FBC8F">#8FBC8F</font></td><td bgcolor="#8FBC8F">rgb(143, 188, 143)</td></tr><tr><td><font color="DarkSlateBlue">DarkSlateBlue</font></td><td><font color="#483D8B">#483D8B</font></td><td bgcolor="#483D8B">rgb(72, 61, 139)</td></tr><tr><td><font color="DarkSlateGray">DarkSlateGray</font></td><td><font color="#2F4F4F">#2F4F4F</font></td><td bgcolor="#2F4F4F">rgb(47, 79, 79)</td></tr><tr><td><font color="DarkTurquoise">DarkTurquoise</font></td><td><font color="#00CED1">#00CED1</font></td><td bgcolor="#00CED1">rgb(0, 206, 209)</td></tr><tr><td><font color="DarkViolet">DarkViolet</font></td><td><font color="#9400D3">#9400D3</font></td><td bgcolor="#9400D3">rgb(148, 0, 211)</td></tr><tr><td><font color="DeepPink">DeepPink</font></td><td><font color="#FF1493">#FF1493</font></td><td bgcolor="#FF1493">rgb(255, 20, 147)</td></tr><tr><td><font color="DeepSkyBlue">DeepSkyBlue</font></td><td><font color="#00BFFF">#00BFFF</font></td><td bgcolor="#00BFFF">rgb(0, 191, 255)</td></tr><tr><td><font color="DimGray">DimGray</font></td><td><font color="#696969">#696969</font></td><td bgcolor="#696969">rgb(105, 105, 105)</td></tr><tr><td><font color="DodgerBlue">DodgerBlue</font></td><td><font color="#1E90FF">#1E90FF</font></td><td bgcolor="#1E90FF">rgb(30, 144, 255)</td></tr><tr><td><font color="Feldspar">Feldspar</font></td><td><font color="#D19275">#D19275</font></td><td bgcolor="#D19275">rgb(209, 146, 117)</td></tr><tr><td><font color="FireBrick">FireBrick</font></td><td><font color="#B22222">#B22222</font></td><td bgcolor="#B22222">rgb(178, 34, 34)</td></tr><tr><td><font color="FloralWhite">FloralWhite</font></td><td><font color="#FFFAF0">#FFFAF0</font></td><td bgcolor="#FFFAF0">rgb(255, 250, 240)</td></tr><tr><td><font color="ForestGreen">ForestGreen</font></td><td><font color="#228B22">#228B22</font></td><td bgcolor="#228B22">rgb(34, 139, 34)</td></tr><tr><td><font color="Fuchsia">Fuchsia</font></td><td><font color="#FF00FF">#FF00FF</font></td><td bgcolor="#FF00FF">rgb(255, 0, 255)</td></tr><tr><td><font color="Gainsboro">Gainsboro</font></td><td><font color="#DCDCDC">#DCDCDC</font></td><td bgcolor="#DCDCDC">rgb(220, 220, 220)</td></tr><tr><td><font color="GhostWhite">GhostWhite</font></td><td><font color="#F8F8FF">#F8F8FF</font></td><td bgcolor="#F8F8FF">rgb(248, 248, 255)</td></tr><tr><td><font color="Gold">Gold</font></td><td><font color="#FFD700">#FFD700</font></td><td bgcolor="#FFD700">rgb(255, 215, 0)</td></tr><tr><td><font color="GoldenRod">GoldenRod</font></td><td><font color="#DAA520">#DAA520</font></td><td bgcolor="#DAA520">rgb(218, 165, 32)</td></tr><tr><td><font color="Gray">Gray</font></td><td><font color="#808080">#808080</font></td><td bgcolor="#808080">rgb(128, 128, 128)</td></tr><tr><td><font color="Green">Green</font></td><td><font color="#008000">#008000</font></td><td bgcolor="#008000">rgb(0, 128, 0)</td></tr><tr><td><font color="GreenYellow">GreenYellow</font></td><td><font color="#ADFF2F">#ADFF2F</font></td><td bgcolor="#ADFF2F">rgb(173, 255, 47)</td></tr><tr><td><font color="HoneyDew">HoneyDew</font></td><td><font color="#F0FFF0">#F0FFF0</font></td><td bgcolor="#F0FFF0">rgb(240, 255, 240)</td></tr><tr><td><font color="HotPink">HotPink</font></td><td><font color="#FF69B4">#FF69B4</font></td><td bgcolor="#FF69B4">rgb(255, 105, 180)</td></tr><tr><td><font color="IndianRed">IndianRed</font></td><td><font color="#CD5C5C">#CD5C5C</font></td><td bgcolor="#CD5C5C">rgb(205, 92, 92)</td></tr><tr><td><font color="Indigo">Indigo</font></td><td><font color="#4B0082">#4B0082</font></td><td bgcolor="#4B0082">rgb(75, 0, 130)</td></tr><tr><td><font color="Ivory">Ivory</font></td><td><font color="#FFFFF0">#FFFFF0</font></td><td bgcolor="#FFFFF0">rgb(255, 255, 240)</td></tr><tr><td><font color="Khaki">Khaki</font></td><td><font color="#F0E68C">#F0E68C</font></td><td bgcolor="#F0E68C">rgb(240, 230, 140)</td></tr><tr><td><font color="Lavender">Lavender</font></td><td><font color="#E6E6FA">#E6E6FA</font></td><td bgcolor="#E6E6FA">rgb(230, 230, 250)</td></tr><tr><td><font color="LavenderBlush">LavenderBlush</font></td><td><font color="#FFF0F5">#FFF0F5</font></td><td bgcolor="#FFF0F5">rgb(255, 240, 245)</td></tr><tr><td><font color="LawnGreen">LawnGreen</font></td><td><font color="#7CFC00">#7CFC00</font></td><td bgcolor="#7CFC00">rgb(124, 252, 0)</td></tr><tr><td><font color="LemonChiffon">LemonChiffon</font></td><td><font color="#FFFACD">#FFFACD</font></td><td bgcolor="#FFFACD">rgb(255, 250, 205)</td></tr><tr><td><font color="LightBlue">LightBlue</font></td><td><font color="#ADD8E6">#ADD8E6</font></td><td bgcolor="#ADD8E6">rgb(173, 216, 230)</td></tr><tr><td><font color="LightCoral">LightCoral</font></td><td><font color="#F08080">#F08080</font></td><td bgcolor="#F08080">rgb(240, 128, 128)</td></tr><tr><td><font color="LightCyan">LightCyan</font></td><td><font color="#E0FFFF">#E0FFFF</font></td><td bgcolor="#E0FFFF">rgb(224, 255, 255)</td></tr><tr><td><font color="LightGoldenRodYellow">LightGoldenRodYellow</font></td><td><font color="#FAFAD2">#FAFAD2</font></td><td bgcolor="#FAFAD2">rgb(250, 250, 210)</td></tr><tr><td><font color="LightGrey">LightGrey</font></td><td><font color="#D3D3D3">#D3D3D3</font></td><td bgcolor="#D3D3D3">rgb(211, 211, 211)</td></tr><tr><td><font color="LightGreen">LightGreen</font></td><td><font color="#90EE90">#90EE90</font></td><td bgcolor="#90EE90">rgb(144, 238, 144)</td></tr><tr><td><font color="LightPink">LightPink</font></td><td><font color="#FFB6C1">#FFB6C1</font></td><td bgcolor="#FFB6C1">rgb(255, 182, 193)</td></tr><tr><td><font color="LightSalmon">LightSalmon</font></td><td><font color="#FFA07A">#FFA07A</font></td><td bgcolor="#FFA07A">rgb(255, 160, 122)</td></tr><tr><td><font color="LightSeaGreen">LightSeaGreen</font></td><td><font color="#20B2AA">#20B2AA</font></td><td bgcolor="#20B2AA">rgb(32, 178, 170)</td></tr><tr><td><font color="LightSkyBlue">LightSkyBlue</font></td><td><font color="#87CEFA">#87CEFA</font></td><td bgcolor="#87CEFA">rgb(135, 206, 250)</td></tr><tr><td><font color="LightSlateBlue">LightSlateBlue</font></td><td><font color="#8470FF">#8470FF</font></td><td bgcolor="#8470FF">rgb(132, 112, 255)</td></tr><tr><td><font color="LightSlateGray">LightSlateGray</font></td><td><font color="#778899">#778899</font></td><td bgcolor="#778899">rgb(119, 136, 153)</td></tr><tr><td><font color="LightSteelBlue">LightSteelBlue</font></td><td><font color="#B0C4DE">#B0C4DE</font></td><td bgcolor="#B0C4DE">rgb(176, 196, 222)</td></tr><tr><td><font color="LightYellow">LightYellow</font></td><td><font color="#FFFFE0">#FFFFE0</font></td><td bgcolor="#FFFFE0">rgb(255, 255, 224)</td></tr><tr><td><font color="Lime">Lime</font></td><td><font color="#00FF00">#00FF00</font></td><td bgcolor="#00FF00">rgb(0, 255, 0)</td></tr><tr><td><font color="LimeGreen">LimeGreen</font></td><td><font color="#32CD32">#32CD32</font></td><td bgcolor="#32CD32">rgb(50, 205, 50)</td></tr><tr><td><font color="Linen">Linen</font></td><td><font color="#FAF0E6">#FAF0E6</font></td><td bgcolor="#FAF0E6">rgb(250, 240, 230)</td></tr><tr><td><font color="Magenta">Magenta</font></td><td><font color="#FF00FF">#FF00FF</font></td><td bgcolor="#FF00FF">rgb(255, 0, 255)</td></tr><tr><td><font color="Maroon">Maroon</font></td><td><font color="#800000">#800000</font></td><td bgcolor="#800000">rgb(128, 0, 0)</td></tr><tr><td><font color="MediumAquaMarine">MediumAquaMarine</font></td><td><font color="#66CDAA">#66CDAA</font></td><td bgcolor="#66CDAA">rgb(102, 205, 170)</td></tr><tr><td><font color="MediumBlue">MediumBlue</font></td><td><font color="#0000CD">#0000CD</font></td><td bgcolor="#0000CD">rgb(0, 0, 205)</td></tr><tr><td><font color="MediumOrchid">MediumOrchid</font></td><td><font color="#BA55D3">#BA55D3</font></td><td bgcolor="#BA55D3">rgb(186, 85, 211)</td></tr><tr><td><font color="MediumPurple">MediumPurple</font></td><td><font color="#9370D8">#9370D8</font></td><td bgcolor="#9370D8">rgb(147, 112, 216)</td></tr><tr><td><font color="MediumSeaGreen">MediumSeaGreen</font></td><td><font color="#3CB371">#3CB371</font></td><td bgcolor="#3CB371">rgb(60, 179, 113)</td></tr><tr><td><font color="MediumSlateBlue">MediumSlateBlue</font></td><td><font color="#7B68EE">#7B68EE</font></td><td bgcolor="#7B68EE">rgb(123, 104, 238)</td></tr><tr><td><font color="MediumSpringGreen">MediumSpringGreen</font></td><td><font color="#00FA9A">#00FA9A</font></td><td bgcolor="#00FA9A">rgb(0, 250, 154)</td></tr><tr><td><font color="MediumTurquoise">MediumTurquoise</font></td><td><font color="#48D1CC">#48D1CC</font></td><td bgcolor="#48D1CC">rgb(72, 209, 204)</td></tr><tr><td><font color="MediumVioletRed">MediumVioletRed</font></td><td><font color="#C71585">#C71585</font></td><td bgcolor="#C71585">rgb(199, 21, 133)</td></tr><tr><td><font color="MidnightBlue">MidnightBlue</font></td><td><font color="#191970">#191970</font></td><td bgcolor="#191970">rgb(25, 25, 112)</td></tr><tr><td><font color="MintCream">MintCream</font></td><td><font color="#F5FFFA">#F5FFFA</font></td><td bgcolor="#F5FFFA">rgb(245, 255, 250)</td></tr><tr><td><font color="MistyRose">MistyRose</font></td><td><font color="#FFE4E1">#FFE4E1</font></td><td bgcolor="#FFE4E1">rgb(255, 228, 225)</td></tr><tr><td><font color="Moccasin">Moccasin</font></td><td><font color="#FFE4B5">#FFE4B5</font></td><td bgcolor="#FFE4B5">rgb(255, 228, 181)</td></tr><tr><td><font color="NavajoWhite">NavajoWhite</font></td><td><font color="#FFDEAD">#FFDEAD</font></td><td bgcolor="#FFDEAD">rgb(255, 222, 173)</td></tr><tr><td><font color="Navy">Navy</font></td><td><font color="#000080">#000080</font></td><td bgcolor="#000080">rgb(0, 0, 128)</td></tr><tr><td><font color="OldLace">OldLace</font></td><td><font color="#FDF5E6">#FDF5E6</font></td><td bgcolor="#FDF5E6">rgb(253, 245, 230)</td></tr><tr><td><font color="Olive">Olive</font></td><td><font color="#808000">#808000</font></td><td bgcolor="#808000">rgb(128, 128, 0)</td></tr><tr><td><font color="OliveDrab">OliveDrab</font></td><td><font color="#6B8E23">#6B8E23</font></td><td bgcolor="#6B8E23">rgb(107, 142, 35)</td></tr><tr><td><font color="Orange">Orange</font></td><td><font color="#FFA500">#FFA500</font></td><td bgcolor="#FFA500">rgb(255, 165, 0)</td></tr><tr><td><font color="OrangeRed">OrangeRed</font></td><td><font color="#FF4500">#FF4500</font></td><td bgcolor="#FF4500">rgb(255, 69, 0)</td></tr><tr><td><font color="Orchid">Orchid</font></td><td><font color="#DA70D6">#DA70D6</font></td><td bgcolor="#DA70D6">rgb(218, 112, 214)</td></tr><tr><td><font color="PaleGoldenRod">PaleGoldenRod</font></td><td><font color="#EEE8AA">#EEE8AA</font></td><td bgcolor="#EEE8AA">rgb(238, 232, 170)</td></tr><tr><td><font color="PaleGreen">PaleGreen</font></td><td><font color="#98FB98">#98FB98</font></td><td bgcolor="#98FB98">rgb(152, 251, 152)</td></tr><tr><td><font color="PaleTurquoise">PaleTurquoise</font></td><td><font color="#AFEEEE">#AFEEEE</font></td><td bgcolor="#AFEEEE">rgb(175, 238, 238)</td></tr><tr><td><font color="PaleVioletRed">PaleVioletRed</font></td><td><font color="#D87093">#D87093</font></td><td bgcolor="#D87093">rgb(216, 112, 147)</td></tr><tr><td><font color="PapayaWhip">PapayaWhip</font></td><td><font color="#FFEFD5">#FFEFD5</font></td><td bgcolor="#FFEFD5">rgb(255, 239, 213)</td></tr><tr><td><font color="PeachPuff">PeachPuff</font></td><td><font color="#FFDAB9">#FFDAB9</font></td><td bgcolor="#FFDAB9">rgb(255, 218, 185)</td></tr><tr><td><font color="Peru">Peru</font></td><td><font color="#CD853F">#CD853F</font></td><td bgcolor="#CD853F">rgb(205, 133, 63)</td></tr><tr><td><font color="Pink">Pink</font></td><td><font color="#FFC0CB">#FFC0CB</font></td><td bgcolor="#FFC0CB">rgb(255, 192, 203)</td></tr><tr><td><font color="Plum">Plum</font></td><td><font color="#DDA0DD">#DDA0DD</font></td><td bgcolor="#DDA0DD">rgb(221, 160, 221)</td></tr><tr><td><font color="PowderBlue">PowderBlue</font></td><td><font color="#B0E0E6">#B0E0E6</font></td><td bgcolor="#B0E0E6">rgb(176, 224, 230)</td></tr><tr><td><font color="Purple">Purple</font></td><td><font color="#800080">#800080</font></td><td bgcolor="#800080">rgb(128, 0, 128)</td></tr><tr><td><font color="Red">Red</font></td><td><font color="#FF0000">#FF0000</font></td><td bgcolor="#FF0000">rgb(255, 0, 0)</td></tr><tr><td><font color="RosyBrown">RosyBrown</font></td><td><font color="#BC8F8F">#BC8F8F</font></td><td bgcolor="#BC8F8F">rgb(188, 143, 143)</td></tr><tr><td><font color="RoyalBlue">RoyalBlue</font></td><td><font color="#4169E1">#4169E1</font></td><td bgcolor="#4169E1">rgb(65, 105, 225)</td></tr><tr><td><font color="SaddleBrown">SaddleBrown</font></td><td><font color="#8B4513">#8B4513</font></td><td bgcolor="#8B4513">rgb(139, 69, 19)</td></tr><tr><td><font color="Salmon">Salmon</font></td><td><font color="#FA8072">#FA8072</font></td><td bgcolor="#FA8072">rgb(250, 128, 114)</td></tr><tr><td><font color="SandyBrown">SandyBrown</font></td><td><font color="#F4A460">#F4A460</font></td><td bgcolor="#F4A460">rgb(244, 164, 96)</td></tr><tr><td><font color="SeaGreen">SeaGreen</font></td><td><font color="#2E8B57">#2E8B57</font></td><td bgcolor="#2E8B57">rgb(46, 139, 87)</td></tr><tr><td><font color="SeaShell">SeaShell</font></td><td><font color="#FFF5EE">#FFF5EE</font></td><td bgcolor="#FFF5EE">rgb(255, 245, 238)</td></tr><tr><td><font color="Sienna">Sienna</font></td><td><font color="#A0522D">#A0522D</font></td><td bgcolor="#A0522D">rgb(160, 82, 45)</td></tr><tr><td><font color="Silver">Silver</font></td><td><font color="#C0C0C0">#C0C0C0</font></td><td bgcolor="#C0C0C0">rgb(192, 192, 192)</td></tr><tr><td><font color="SkyBlue">SkyBlue</font></td><td><font color="#87CEEB">#87CEEB</font></td><td bgcolor="#87CEEB">rgb(135, 206, 235)</td></tr><tr><td><font color="SlateBlue">SlateBlue</font></td><td><font color="#6A5ACD">#6A5ACD</font></td><td bgcolor="#6A5ACD">rgb(106, 90, 205)</td></tr><tr><td><font color="SlateGray">SlateGray</font></td><td><font color="#708090">#708090</font></td><td bgcolor="#708090">rgb(112, 128, 144)</td></tr><tr><td><font color="Snow">Snow</font></td><td><font color="#FFFAFA">#FFFAFA</font></td><td bgcolor="#FFFAFA">rgb(255, 250, 250)</td></tr><tr><td><font color="SpringGreen">SpringGreen</font></td><td><font color="#00FF7F">#00FF7F</font></td><td bgcolor="#00FF7F">rgb(0, 255, 127)</td></tr><tr><td><font color="SteelBlue">SteelBlue</font></td><td><font color="#4682B4">#4682B4</font></td><td bgcolor="#4682B4">rgb(70, 130, 180)</td></tr><tr><td><font color="Tan">Tan</font></td><td><font color="#D2B48C">#D2B48C</font></td><td bgcolor="#D2B48C">rgb(210, 180, 140)</td></tr><tr><td><font color="Teal">Teal</font></td><td><font color="#008080">#008080</font></td><td bgcolor="#008080">rgb(0, 128, 128)</td></tr><tr><td><font color="Thistle">Thistle</font></td><td><font color="#D8BFD8">#D8BFD8</font></td><td bgcolor="#D8BFD8">rgb(216, 191, 216)</td></tr><tr><td><font color="Tomato">Tomato</font></td><td><font color="#FF6347">#FF6347</font></td><td bgcolor="#FF6347">rgb(255, 99, 71)</td></tr><tr><td><font color="Turquoise">Turquoise</font></td><td><font color="#40E0D0">#40E0D0</font></td><td bgcolor="#40E0D0">rgb(64, 224, 208)</td></tr><tr><td><font color="Violet">Violet</font></td><td><font color="#EE82EE">#EE82EE</font></td><td bgcolor="#EE82EE">rgb(238, 130, 238)</td></tr><tr><td><font color="VioletRed">VioletRed</font></td><td><font color="#D02090">#D02090</font></td><td bgcolor="#D02090">rgb(208, 32, 144)</td></tr><tr><td><font color="Wheat">Wheat</font></td><td><font color="#F5DEB3">#F5DEB3</font></td><td bgcolor="#F5DEB3">rgb(245, 222, 179)</td></tr><tr><td><font color="White">White</font></td><td><font color="#FFFFFF">#FFFFFF</font></td><td bgcolor="#FFFFFF">rgb(255, 255, 255)</td></tr><tr><td><font color="WhiteSmoke">WhiteSmoke</font></td><td><font color="#F5F5F5">#F5F5F5</font></td><td bgcolor="#F5F5F5">rgb(245, 245, 245)</td></tr><tr><td><font color="Yellow">Yellow</font></td><td><font color="#FFFF00">#FFFF00</font></td><td bgcolor="#FFFF00">rgb(255, 255, 0)</td></tr><tr><td><font color="YellowGreen">YellowGreen</font></td><td><font color="#9ACD32">#9ACD32</font></td><td bgcolor="#9ACD32">rgb(154, 205, 50)</td></tr></tbody></table>

<h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><ul>
<li><a href="http://developer.android.com/intl/zh-cn/reference/android/widget/TextView.html" target="_blank" rel="external">Android Developers—TextView</a></li>
<li><a href="http://blog.csdn.net/voiceofnet/article/details/7747158" target="_blank" rel="external">TextView属性大全</a></li>
<li><a href="http://blog.csdn.net/testcs_dn/article/details/45719357/" target="_blank" rel="external">markdown编辑器语法——字体、字号与颜色</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/12/09/android_textview_attributes/" data-id="cj4zxre2l0044u8nh5kpd0j0h" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/textview/">textview</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-android_design_model_observer" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/08/android_design_model_observer/" class="article-date">
  <time datetime="2015-12-08T02:58:29.000Z" itemprop="datePublished">2015-12-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/android/">android</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/08/android_design_model_observer/">Android设计模式之Observer</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>观察者模式有时被称作发布/订阅模式，观察者模式定义了一种一对多的依赖关系，让多个观察者对象同时监听某一个主题对象。这个主题对象在状态发生变化时，会通知所有观察者对象，使它们能够自动更新自己。</p>
<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p><strong> 解决的问题</strong><br>将一个系统分割成一个一些类相互协作的类有一个不好的副作用，那就是需要维护相关对象间的一致性。我们不希望为了维持一致性而使各类紧密耦合，这样会给维护、扩展和重用都带来不便。观察者就是解决这类的耦合关系的。</p>
<p><strong> 模式中的角色</strong></p>
<ul>
<li>抽象主题（Subject）：它把所有观察者对象的引用保存到一个聚集里，每个主题都可以有任何数量的观察者。抽象主题提供一个接口，可以增加和删除观察者对象。</li>
<li>具体主题（ConcreteSubject）：将有关状态存入具体观察者对象；在具体主题内部状态改变时，给所有登记过的观察者发出通知。</li>
<li>抽象观察者（Observer）：为所有的具体观察者定义一个接口，在得到主题通知时更新自己。</li>
<li>具体观察者（ConcreteObserver）：实现抽象观察者角色所要求的更新接口，以便使本身的状态与主题状态协调。</li>
</ul>
<p><strong> 模式解读</strong><br>1.观察者模式的类图　　<br><img src="http://pic002.cnblogs.com/images/2012/155937/2012071215463875.png" alt="">
　　</p>
<h2 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">// 抽象主题类</div><div class="line"></div><div class="line">public abstract class Subject</div><div class="line">&#123;</div><div class="line">    private IList&lt;Observer&gt; observers = new List&lt;Observer&gt;();</div><div class="line"></div><div class="line">    </div><div class="line">    // 增加观察者</div><div class="line">    </div><div class="line">    public void Attach(Observer observer)</div><div class="line">    &#123;</div><div class="line">        observers.Add(observer);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    </div><div class="line">    // 移除观察者</div><div class="line">    </div><div class="line">    public void Detach(Observer observer)</div><div class="line">    &#123;</div><div class="line">        observers.Remove(observer);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    </div><div class="line">    // 向观察者（们）发出通知</div><div class="line">    </div><div class="line">    public void Notify()</div><div class="line">    &#123;</div><div class="line">        foreach (Observer o in observers)</div><div class="line">        &#123;</div><div class="line">            o.Update();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">// 抽象观察者类，为所有具体观察者定义一个接口，在得到通知时更新自己</div><div class="line"></div><div class="line">public abstract class Observer</div><div class="line">&#123;</div><div class="line">    public abstract void Update();</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">// 具体观察者或具体通知者，将有关状态存入具体观察者对象；在具体主题的内部状态改变时，给所有登记过的观察者发出通知。具体主题角色通常用一个具体子类实现。</div><div class="line"></div><div class="line">public class ConcreteSubject : Subject</div><div class="line">&#123;</div><div class="line">    private string subjectState;</div><div class="line"></div><div class="line">    </div><div class="line">    // 具体观察者的状态</div><div class="line">    </div><div class="line">    public string SubjectState</div><div class="line">    &#123;</div><div class="line">        get &#123; return subjectState; &#125;</div><div class="line">        set &#123; subjectState = value; &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">// 具体观察者，实现抽象观察者角色所要求的更新接口，已是本身状态与主题状态相协调</div><div class="line"></div><div class="line">public class ConcreteObserver : Observer</div><div class="line">&#123;</div><div class="line">    private string observerState;</div><div class="line">    private string name;</div><div class="line">    private ConcreteSubject subject;</div><div class="line"></div><div class="line">    </div><div class="line">    // 具体观察者用一个具体主题来实现</div><div class="line">    </div><div class="line">    public ConcreteSubject Subject</div><div class="line">    &#123;</div><div class="line">        get &#123; return subject; &#125;</div><div class="line">        set &#123; subject = value; &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public ConcreteObserver(ConcreteSubject subject, string name)</div><div class="line">    &#123;</div><div class="line">        this.subject = subject;</div><div class="line">        this.name = name;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    </div><div class="line">    // 实现抽象观察者中的更新操作</div><div class="line">    </div><div class="line">    public override void Update()</div><div class="line">    &#123;</div><div class="line">        observerState = subject.SubjectState;</div><div class="line">        Console.WriteLine(&quot;The observer&apos;s state of &#123;0&#125; is &#123;1&#125;&quot;, name, observerState);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong> 客户端代码</strong><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Program</span></span></div><div class="line">&#123;</div><div class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span><span class="params">(string[] args)</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="comment">// 具体主题角色通常用具体自来来实现</span></div><div class="line">        ConcreteSubject subject = <span class="keyword">new</span> ConcreteSubject();</div><div class="line"></div><div class="line">        subject.Attach(<span class="keyword">new</span> ConcreteObserver(subject, <span class="string">"Observer A"</span>));</div><div class="line">        subject.Attach(<span class="keyword">new</span> ConcreteObserver(subject, <span class="string">"Observer B"</span>));</div><div class="line">        subject.Attach(<span class="keyword">new</span> ConcreteObserver(subject, <span class="string">"Observer C"</span>));</div><div class="line"></div><div class="line">        subject.SubjectState = <span class="string">"Ready"</span>;</div><div class="line">        subject.Notify();</div><div class="line"></div><div class="line">        Console.Read();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>运行结果<br><img src="http://pic002.cnblogs.com/images/2012/155937/2012071213265288.png" alt=""></p>
<p>　　</p>
<h2 id="模式总结"><a href="#模式总结" class="headerlink" title="模式总结"></a>模式总结</h2><p><strong> 优点</strong><br>观察者模式解除了主题和具体观察者的耦合，让耦合的双方都依赖于抽象，而不是依赖具体。从而使得各自的变化都不会影响另一边的变化。</p>
<p><strong> 缺点</strong><br>依赖关系并未完全解除，抽象通知者依旧依赖抽象的观察者。</p>
<p><strong> 适用场景</strong><br>1.当一个对象的改变需要给变其它对象时，而且它不知道具体有多少个对象有待改变时。<br>2.一个抽象某型有两个方面，当其中一个方面依赖于另一个方面，这时用观察者模式可以将这两者封装在独立的对象中使它们各自独立地改变和复用。</p>
<p><strong> 模式引申</strong><br>应用C#中的事件委托来彻底解除通知者和观察者之间的耦合。<br>1.关于委托的定义：<br>委托是一种引用方法的类型。一旦为委托分配了方法，委托将与该方法有相同的行为。委托方法可以像其它任何方法一样，具有参数和返回值。委托可以看作是对函数（方法）的的抽象，是函数的“类”，委托的实例代表一个（或多个）具体的函数，它可以是多播的。</p>
<p>2.关于事件：<br>事件基于委托，为委托提供了一种发布/订阅机制。事件的订阅与取消与我们刚才讲的观察者模式中的订阅与取消类似，只是表现形式有所不同。在观察者模式中，订阅使用方法Attach（）来进行；在事件的订阅中使用“+=”。类似地，取消订阅在观察者模式中用Dettach（），而事件的取消用“-=”。</p>
<h2 id="使用示例"><a href="#使用示例" class="headerlink" title="使用示例"></a>使用示例</h2><p>下面例子分别用观察者模式，事件机制来实现<br>实例描述：客户支付了订单款项，这时财务需要开具发票，出纳需要记账，配送员需要配货。</p>
<p><strong> 观察者模式的实现</strong><br>类图<br><img src="http://pic002.cnblogs.com/images/2012/155937/2012071215531341.png" alt=""></p>
<p><strong> 代码实现</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div></pre></td><td class="code"><pre><div class="line">// 抽象观察者</div><div class="line">public interface ISubject</div><div class="line">&#123;</div><div class="line">    void Notify();</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">// 工作岗位，作为这里的观察者的抽象</div><div class="line">public abstract class JobStation</div><div class="line">&#123;</div><div class="line">    public abstract void Update();</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">// 具体主题，这里是客户</div><div class="line"></div><div class="line">public class Customer : ISubject</div><div class="line">&#123;</div><div class="line">    private string customerState;</div><div class="line"></div><div class="line">    private IList&lt;JobStation&gt; observers = new List&lt;JobStation&gt;();</div><div class="line"></div><div class="line">    </div><div class="line">    // 增加观察者</div><div class="line">    </div><div class="line">    public void Attach(JobStation observer)</div><div class="line">    &#123;</div><div class="line">        this.observers.Add(observer);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    </div><div class="line">    // 移除观察者</div><div class="line">    </div><div class="line">    public void Detach(JobStation observer)</div><div class="line">    &#123;</div><div class="line">        this.observers.Remove(observer);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    </div><div class="line">    // 客户状态</div><div class="line">    </div><div class="line">    public string CustomerState</div><div class="line">    &#123;</div><div class="line">        get &#123; return customerState; &#125;</div><div class="line">        set &#123; customerState = value; &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void Notify()</div><div class="line">    &#123;</div><div class="line">        foreach (JobStation o in observers)</div><div class="line">        &#123;</div><div class="line">            o.Update();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">// 会计</div><div class="line"></div><div class="line">public class Accountant : JobStation</div><div class="line">&#123;</div><div class="line">    private string accountantState;</div><div class="line">    private Customer customer;</div><div class="line"></div><div class="line">    public Accountant(Customer customer)</div><div class="line">    &#123;</div><div class="line">        this.customer = customer;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    </div><div class="line">    // 更新状态</div><div class="line">    </div><div class="line">    public override void Update()</div><div class="line">    &#123;</div><div class="line">        if (customer.CustomerState == &quot;已付款&quot;)</div><div class="line">        &#123;</div><div class="line">            Console.WriteLine(&quot;我是会计，我来开具发票。&quot;);</div><div class="line">            accountantState = &quot;已开发票&quot;;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">// 出纳</div><div class="line"></div><div class="line">public class Cashier : JobStation</div><div class="line">&#123;</div><div class="line">    private string cashierState;</div><div class="line">    private Customer customer;</div><div class="line"></div><div class="line">    public Cashier(Customer customer)</div><div class="line">    &#123;</div><div class="line">        this.customer = customer;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public override void Update()</div><div class="line">    &#123;</div><div class="line">        if (customer.CustomerState == &quot;已付款&quot;)</div><div class="line">        &#123;</div><div class="line">            Console.WriteLine(&quot;我是出纳员，我给登记入账。&quot;);</div><div class="line">            cashierState = &quot;已入账&quot;;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">// 配送员</div><div class="line"></div><div class="line">public class Dilliveryman : JobStation</div><div class="line">&#123;</div><div class="line">    private string dillivierymanState;</div><div class="line">    private Customer customer;</div><div class="line"></div><div class="line">    public Dilliveryman(Customer customer)</div><div class="line">    &#123;</div><div class="line">        this.customer = customer;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public override void Update()</div><div class="line">    &#123;</div><div class="line">        if (customer.CustomerState == &quot;已付款&quot;)</div><div class="line">        &#123;</div><div class="line">            Console.WriteLine(&quot;我是配送员，我来发货。&quot;);</div><div class="line">            dillivierymanState = &quot;已发货&quot;;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong> 客户端代码</strong><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Program</span></span></div><div class="line">&#123;</div><div class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span><span class="params">(string[] args)</span></span></div><div class="line">    &#123;</div><div class="line"></div><div class="line">        Customer subject = <span class="keyword">new</span> Customer();</div><div class="line"></div><div class="line">        subject.Attach(<span class="keyword">new</span> Accountant(subject));</div><div class="line">        subject.Attach(<span class="keyword">new</span> Cashier(subject));</div><div class="line">        subject.Attach(<span class="keyword">new</span> Dilliveryman(subject));</div><div class="line"></div><div class="line">        subject.CustomerState = <span class="string">"已付款"</span>;</div><div class="line">        subject.Notify();</div><div class="line"></div><div class="line">        Console.Read();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>运行结果：</p>
<blockquote>
<p>　　　我是会计，我来开具发票。<br>　　　 我是出纳员，我给登记入账。<br>　　　 我是配送员，我来发货。</p>
</blockquote>
<h2 id="事件实现"><a href="#事件实现" class="headerlink" title="事件实现"></a>事件实现</h2><p><strong> 类图</strong><br><img src="http://pic002.cnblogs.com/images/2012/155937/2012071216194626.png" alt=""><br>通过类图来看，观察者和主题之间已经不存在任何依赖关系了。</p>
<p><strong> 代码实现</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">// 抽象主题</div><div class="line"></div><div class="line">public interface ISubject</div><div class="line">&#123;</div><div class="line">    void Notify();</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">// 声明委托</div><div class="line"></div><div class="line">public delegate void CustomerEventHandler();</div><div class="line"></div><div class="line"></div><div class="line">// 具体主题</div><div class="line"></div><div class="line">public class Customer : ISubject</div><div class="line">&#123;</div><div class="line">    private string customerState;</div><div class="line"></div><div class="line">    // 声明一个委托事件，类型为 CustomerEventHandler</div><div class="line">    public event CustomerEventHandler Update;</div><div class="line"></div><div class="line">    public void Notify()</div><div class="line">    &#123;</div><div class="line">        if (Update != null)</div><div class="line">        &#123;</div><div class="line">            // 使用事件来通知给订阅者</div><div class="line">            Update();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public string CustomerState</div><div class="line">    &#123;</div><div class="line">        get &#123; return customerState; &#125;</div><div class="line">        set &#123; customerState = value; &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">// 财务，已经不需要实现抽象的观察者类，并且不用引用具体的主题</div><div class="line"></div><div class="line">public class Accountant</div><div class="line">&#123;</div><div class="line">    private string accountantState;</div><div class="line"></div><div class="line">    public Accountant()</div><div class="line">    &#123; &#125;</div><div class="line"></div><div class="line">    </div><div class="line">    // 开发票</div><div class="line">    </div><div class="line">    public void GiveInvoice()</div><div class="line">    &#123;</div><div class="line">        Console.WriteLine(&quot;我是会计，我来开具发票。&quot;);</div><div class="line">        accountantState = &quot;已开发票&quot;;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">// 出纳，已经不需要实现抽象的观察者类，并且不用引用具体的主题</div><div class="line"></div><div class="line">public class Cashier</div><div class="line">&#123;</div><div class="line">    private string cashierState;</div><div class="line"></div><div class="line">    public void Recoded()</div><div class="line">    &#123;</div><div class="line">        Console.WriteLine(&quot;我是出纳员，我给登记入账。&quot;);</div><div class="line">        cashierState = &quot;已入账&quot;;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">// 配送员，已经不需要实现抽象的观察者类，并且不用引用具体的主题</div><div class="line"></div><div class="line">public class Dilliveryman</div><div class="line">&#123;</div><div class="line">    private string dillivierymanState;</div><div class="line"></div><div class="line">    public void Dilliver()</div><div class="line">    &#123;</div><div class="line">        Console.WriteLine(&quot;我是配送员，我来发货。&quot;);</div><div class="line">        dillivierymanState = &quot;已发货&quot;;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong> 客户端代码</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">class Program</div><div class="line">&#123;</div><div class="line">    static void Main(string[] args)</div><div class="line">    &#123;</div><div class="line"></div><div class="line">        Customer subject = new Customer();</div><div class="line"></div><div class="line">        Accountant accountant = new Accountant();</div><div class="line">        Cashier cashier = new Cashier();</div><div class="line">        Dilliveryman dilliveryman = new Dilliveryman();</div><div class="line"></div><div class="line">        // 注册事件</div><div class="line">        subject.Update += accountant.GiveInvoice;</div><div class="line">        subject.Update += cashier.Recoded;</div><div class="line">        subject.Update += dilliveryman.Dilliver;</div><div class="line"></div><div class="line">        /*</div><div class="line">         * 以上写法也可以用下面代码来替换</div><div class="line">        subject.Update += new CustomerEventHandler(accountant.GiveInvoice);</div><div class="line">        subject.Update += new CustomerEventHandler(cashier.Recoded);</div><div class="line">        subject.Update += new CustomerEventHandler(dilliveryman.Dilliver);</div><div class="line">         */</div><div class="line"></div><div class="line">        subject.CustomerState = &quot;已付款&quot;;</div><div class="line">        subject.Notify();</div><div class="line"></div><div class="line">        Console.Read();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>运行结果</p>
<blockquote>
<p>　　　我是会计，我来开具发票。<br>　　　 我是出纳员，我给登记入账。<br>　　　 我是配送员，我来发货。</p>
</blockquote>
<h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><ul>
<li><a href="http://www.cnblogs.com/wangjq/archive/2012/07/12/2587966.html" target="_blank" rel="external">设计模式学习笔记-观察者模式</a></li>
<li><a href="http://www.cnblogs.com/bastard/archive/2012/06/02/2531663.html" target="_blank" rel="external">ContentProvider数据更新与Observer模式</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/12/08/android_design_model_observer/" data-id="cj4zxre09001gu8nhr54w6bvu" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/design-model/">design model</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/observer/">observer</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-study_full_stack_developer" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/07/study_full_stack_developer/" class="article-date">
  <time datetime="2015-12-07T10:57:29.000Z" itemprop="datePublished">2015-12-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/study/">study</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/07/study_full_stack_developer/">假如你想成为全栈工程师…</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p><img src="http://upload-images.jianshu.io/upload_images/969405-7617c26a12947e75.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br>让我来发挥一下剪报君的特长，下面是百度百科对[全栈工程师]的说明：</p>
<blockquote>
<p>全栈工程师，也叫全端工程师，英文Full Stack developer，是指掌握多种技能，并能利用多种技能独立完成产品的人。</p>
</blockquote>
<p>上面的定义，基本上已经比较直白了，我们再举两个例子就更明白了。</p>
<p>假如你是一个Web开发者，如果你既能做前端（需要熟悉HTML、CSS、JavaScript、H5以及Bootstrap、EasyUI等各种前端框架），又能做后端（需要熟悉Java或ASP.net或php或Node.js或Go，选项太多就不一一列举了），可以独自一个人完成一个类似电子商务网站的产品的开发，那你就算是全栈工程师了。</p>
<p>假如你是一个App开发者，既能开发Android应用（需要熟悉Java和Android框架），又能开发iOS应用（需要熟悉Objective-C或Swift以及Cocoa for iOS），又可以开发应用需要的后台（需要熟悉Node.js或Java或Go或……），总之你可以独自一个人开发出一个覆盖Android和iOS的且有业务后台的App，那你也就算是全栈工程师了。</p>
<p>嗯，现在估计我们真的明白[全栈工程师]是什么鬼了。那让我们来看看，假如你想成为全栈工程师，都该了解些什么……比如怎么成为全栈工程师，比如全栈的好与坏，比如选择哪条技术栈来贯通……</p>
<h2 id="全栈ABC"><a href="#全栈ABC" class="headerlink" title="全栈ABC"></a>全栈ABC</h2><p>关于全栈工程师，有一些周边是你必须了解的。</p>
<p><strong> 对自己产品的渴望</strong><br>注意，我放在第一位的，不是对技术的渴望，而是，[对自己产品的渴望]。就像一个男人，渴望要一个自己的孩子，99%会选择走“谈对象、结婚、做爱、生娃、养娃”这样一条路。作为一个工程师，如果你对产品的渴望就像那些思子若狂见了人家孩子就想抱走的男人或女人，那你就可能会愿意成为全栈工程师。</p>
<p>一个真正的全栈工程师，会从生活中发现问题，洞察需求，设计解决方案并迫不及待的实现产品。而为了实现产品，他愿意去学习任何领域的知识和技能。注意，他们学习某个领域的知识和技能，并不是为了成为那个领域的专家，而是为了完成自己的目标。他们视野开阔心存高远，不会拘泥于技术，假如挥一挥手，就有产品、设计、开发蜂拥而至为他们开发想要的产品，那他们丝毫也不介意扔掉所有的技术。换句话说，只有在一个人既对产品有迫切的渴望又没人帮他实现时，他才会走上全栈之路。所以，全栈，只是实现目标过程中的副产品，目标，才是首要的。</p>
<p><strong> 时势造全栈</strong><br>前面我们说了，当一个人渴望自己的产品又没人帮他实现时，他如果不能放下灼心的渴望，就可能走上全栈之路。这其实是形势逼迫。那类似的还有另外一种情况，也可以逼着一个人成为全栈工程师。那就是：[加入一个缺人的创业型公司]。</p>
<p>大公司人员充沛，一个萝卜一个坑，个个都是螺丝钉，让你一个人搞定所有事情的概率很小。而小公司、创业型公司则不同，他们往往是人员极度匮乏，一个人得顶几个人用。你搞前端的，后端没人你也得顶上。你搞Android开发的，iOS没人你也得顶上，后台没人说不得也得顶上。就这么着，你很快就全栈了。所以，有一种全栈工程师，是被别人养成的。</p>
<p><strong> 思维方式和学习能力</strong><br>有的人，拿刀逼着也成不了全栈工程师。有的人，把他扔到没电没网络的荒漠，他也可以走上全栈之路。有的人……</p>
<p>这其间的差别，就是思维方式和学习能力。</p>
<p>从思维上讲，要想全栈，你就不能给自己设限。把自己定位在前端工程师或iOS工程师上，任尔东西南北风，咬定青山不放松。这样是不行的。应该心随好猫意纵天高或者鹤舞白沙我心飞翔，总之因时而变、因势而变，需要用什么就学什么，服务器没人搞那我来搞，Android App没人写那我来写……这样打破了自我设限，就具备了成为全栈工程师的基础。</p>
<p>除了这种自我设限的思维模式需要破除，还有一种定势要破，那就是精通每一项技术。对于热爱技术的人来讲，搞精每一项技术是很强的诱惑啊，简直比门口走过的妙龄女郎的吸引力还大。这种思想要破除，因为把门门技术都精通必然会耗时很长，影响你实现自己的产品，所以，只要你学到的那部分能够顺利帮你实现目标，那就可以挥一挥衣袖，继续前行了。</p>
<p>一旦思维上破除了定势，具备了成为全栈工程师的基础，如果你有很强的自我学习能力，那就真的可以顺利走上全栈之路了。而假如你学习能力稍差，面对新技术总是寻寻觅觅寻不到入门的路，那恐怕也把自己逼不成全栈，或者得逼到白头。</p>
<h2 id="全栈的好与坏"><a href="#全栈的好与坏" class="headerlink" title="全栈的好与坏"></a>全栈的好与坏</h2><p>全栈工程师的好处就是涉猎技术很广，能够很快运用他所了解的技术开发出产品原型。所以，很多全栈工程师后来走上了创业之路，成了创业者；或者进了创业公司，成了技术合伙人。他们视野开阔，思维活跃，对技术和产品都很敏感，是创业期不可或缺的核心。</p>
<p>然而，正因为全栈工程师的技术是横向发展的，广博有余而精深不足，所以你提到什么，他都能侃上半天，但你要问一些基础的知识点，他可能答不上来。假如全栈工程师不去创业或不加入创业型公司，而是应聘某一个技术方向的岗位，那在面试时就会比较吃亏，因为他用到的大部分技术，细问起来，别人可能都会觉得有了解但不深入。所以，这可能会影响他的求职。不过，如果先一专再多能，然后有意识的选择目标职业，就可以避免这种情况。</p>
<h2 id="选择哪条技术栈"><a href="#选择哪条技术栈" class="headerlink" title="选择哪条技术栈"></a>选择哪条技术栈</h2><p>额，其实，对于全栈工程师来讲，往往是没得选择的。比如你做App，你要全栈，你基本上就很少选择余地，Java、Objective-C都是必须的。所以，很多时候是产品和形势选择你成为全栈，是做着做着成了全栈。而不是为了全栈而全栈，假如是为了全栈而全栈，那你是可以选的哦。比如选择MEAN（MongoDB+Express+AngularJS+Node.js），比如J2SE + SSH + Android + Objective-C + Cocoa……</p>
<p>假如你的目标就是成为全栈工程师，你会发现，哇哦，好多东西要学嗳，吓死人啦。那假如你要做一个产品，比如因为你酷爱炒股，你要做一个简单的股票App：跟踪自选股行情，支持自定义提醒，界面要清爽干净，平台呢要支持Android、iOS和Web。那你在做这样产品的过程中，就会被逼成全栈而不自觉。因为，做你喜欢的事儿，是不会觉得累的。</p>
<p>最后，娱乐一下，送给全栈er一个来自Twitter的段子：</p>
<blockquote>
<p>刚来这家公司面试的时候，老板语重心长的对我说：“虽然工资不高， 但是你可以在这里获得快速的成长，这对做IT的人来说是最重要的。”<br>    现在，两年过去了，老板没有骗我，<br>    我看起来已经像是60岁的人了。<br>    ——From.<a href="https://twitter.com/Scswga/status/548684273717215232" target="_blank" rel="external">Scswga</a></p>
</blockquote>
<h2 id="原文地址"><a href="#原文地址" class="headerlink" title="原文地址"></a>原文地址</h2><ul>
<li><a href="http://www.jianshu.com/p/3ae026814134?hmsr=toutiao.io&amp;utm_medium=toutiao.io&amp;utm_source=toutiao.io" target="_blank" rel="external">开发者头条</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/12/07/study_full_stack_developer/" data-id="cj4zxre3w005pu8nhqyfgotrf" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/fullstack/">fullstack</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-android_bug_fix_solution" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/07/android_bug_fix_solution/" class="article-date">
  <time datetime="2015-12-07T02:15:29.000Z" itemprop="datePublished">2015-12-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/android/">android</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/07/android_bug_fix_solution/">安卓应用的热补丁动态修复技术</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>当一个App发布之后，突然发现了一个严重bug需要进行紧急修复，这时候公司各方就会忙得焦头烂额：重新打包App、测试、向各个应用市场和渠道换包、提示用户升级、用户下载、覆盖安装。有时候仅仅是为了修改了一行代码，也要付出巨大的成本进行换包和重新发布。<br>这时候就提出一个问题：有没有办法以补丁的方式动态修复紧急Bug，不再需要重新发布App，不再需要用户重新下载，覆盖安装？<br>虽然Android系统并没有提供这个技术，但是很幸运的告诉大家，答案是：可以，我们QQ空间提出了热补丁动态修复技术来解决以上这些问题。</p>
<h2 id="实际案例"><a href="#实际案例" class="headerlink" title="实际案例"></a>实际案例</h2><p>空间Android独立版5.2发布后，收到用户反馈，结合版无法跳转到独立版的访客界面，每天都较大的反馈。在以前只能紧急换包，重新发布。成本非常高，也影响用户的口碑。最终决定使用热补丁动态修复技术，向用户下发Patch，在用户无感知的情况下，修复了外网问题，取得非常好的效果。</p>
<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><p>该方案基于的是android dex分包方案的，关于dex分包方案，网上有几篇解释了，所以这里就不再赘述，具体可以看这里<a href="https://m.oschina.net/blog/308583" target="_blank" rel="external">Android dex分包方案</a>。</p>
<p>简单的概括一下，就是把多个dex文件塞入到app的classloader之中，但是android dex拆包方案中的类是没有重复的，如果classes.dex和classes1.dex中有重复的类，当用到这个重复的类的时候，系统会选择哪个类进行加载呢？</p>
<p>让我们来看看类加载的代码：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> class <span class="title">findClass</span><span class="params">(String name,List&lt;Throwable&gt; suppressed)</span></span>&#123;</div><div class="line">    <span class="keyword">for</span>(Element element:dexElements)&#123;</div><div class="line">        <span class="comment">//每个Element就是一个dex文件</span></div><div class="line">        DexFile dex = element.dexFile;</div><div class="line">        <span class="keyword">if</span>(dex!=<span class="keyword">null</span>)&#123;</div><div class="line">            Class clazz = dex.loadClassBinaryName(name,definingContext,suppressed);</div><div class="line">            <span class="keyword">if</span>(clazz!=<span class="keyword">null</span>)&#123;</div><div class="line">            <span class="keyword">return</span> clazz;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(dexElementsSuppressedException!=<span class="keyword">null</span>)&#123;</div><div class="line">        suppressed.addAll(Arrays.asList(dexElementsSuppressedException));</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>一个ClassLoader可以包含多个dex文件，每个dex文件是一个Element，多个dex文件排列成一个有序的数组dexElements，当找类的时候，会按顺序遍历dex文件，然后从当前遍历的dex文件中找类，如果找类则返回，如果找不到从下一个dex文件继续查找。</p>
<p>理论上，如果在不同的dex中有相同的类存在，那么会优先选择排在前面的dex文件的类，如下图：<br><img src="http://7xo1gw.com1.z0.glb.clouddn.com/coding_android_bug_fix2.png" alt=""></p>
<p>在此基础上，我们构想了热补丁的方案，把有问题的类打包到一个dex（patch.dex）中去，然后把这个dex插入到Elements的最前面，如下图：<br><img src="http://7xo1gw.com1.z0.glb.clouddn.com/coding_android_bugfix1.jpg" alt=""></p>
<p>好，该方案基于第二个拆分dex的方案，方案实现如果懂拆分dex的原理的话，大家应该很快就会实现该方案，如果没有拆分dex的项目的话，可以参考一下谷歌的multidex方案实现。然后在插入数组的时候，把补丁包插入到最前面去。</p>
<p>好，看似问题很简单，轻松的搞定了，让我们来试验一下，修改某个类，然后打包成dex，插入到classloader，当加载类的时候出现了（本例中是QzoneActivityManager要被替换）：<br><img src="http://7xo1gw.com1.z0.glb.clouddn.com/coding_android_bugfix3.jpg" alt=""></p>
<p>为什么会出现以上问题呢？<br>从log的意思上来讲，ModuleManager引用了QzoneActivityManager，但是发现这这两个类所在的dex不在一起，其中：</p>
<ul>
<li>ModuleManager在classes.dex中</li>
<li>QzoneActivityManager在patch.dex中</li>
</ul>
<p>结果发生了错误。<br>这里有个问题,拆分dex的很多类都不是在同一个dex内的,怎么没有问题?<br>让我们搜索一下抛出错误的代码所在，嘿咻嘿咻，找到了一下代码：<br><img src="http://7xo1gw.com1.z0.glb.clouddn.com/coding_android_bugfix6.jpg" alt=""></p>
<p>从代码上来看，如果两个相关联的类在不同的dex中就会报错，但是拆分dex没有报错这是为什么，原来这个校验的前提是：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span>(!fromUnverifiedConstant&amp;&amp;IS_CLASS_FLAG_SET(REFERRER,CLASS_ISPREVERIFIED)&#123;</div><div class="line">    ...</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>如果引用者（也就是ModuleManager）这个类被打上了CLASS_ISPREVERIFIED标志，那么就会进行dex的校验。那么这个标志是什么时候被打上去的？让我们在继续搜索一下代码，嘿咻嘿咻~~，在DexPrepare.cpp找到了一下代码：<br><img src="http://7xo1gw.com1.z0.glb.clouddn.com/coding_android_bug_fix7.png" alt=""></p>
<p>这段代码是dex转化成odex(dexopt)的代码中的一段，我们知道当一个apk在安装的时候，apk中的classes.dex会被虚拟机(dexopt)优化成odex文件，然后才会拿去执行。</p>
<p>虚拟机在启动的时候，会有许多的启动参数，其中一项就是verify选项，当verify选项被打开的时候，上面doVerify变量为true，那么就会执行dvmVerifyClass进行类的校验，如果dvmVerifyClass校验类成功，那么这个类会被打上CLASS_ISPREVERIFIED的标志，那么具体的校验过程是什么样子的呢？</p>
<p>此代码在DexVerify.cpp中，如下：<br><img src="http://7xo1gw.com1.z0.glb.clouddn.com/coding_android_bug_fix8.jpeg" alt=""></p>
<p><strong> 验证clazz-&gt;directMethods方法，directMethods包含了以下方法：</strong></p>
<ul>
<li>static方法</li>
<li>private方法</li>
<li>构造函数</li>
</ul>
<p><strong> clazz-&gt;virtualMethods</strong></p>
<ol>
<li>虚函数=override方法?</li>
</ol>
<p>概括一下就是如果以上方法中直接引用到的类（第一层级关系，不会进行递归搜索）和clazz都在同一个dex中的话，那么这个类就会被打上CLASS_ISPREVERIFIED：<br><img src="http://7xo1gw.com1.z0.glb.clouddn.com/coding_android_bug_fix9.jpeg" alt=""></p>
<p>所以为了实现补丁方案，所以必须从这些方法中入手，防止类被打上CLASS_ISPREVERIFIED标志。</p>
<p>最终空间的方案是往所有类的构造函数里面插入了一段代码，代码如下：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">if</span> (ClassVerifier.PREVENT_VERIFY) &#123;</div><div class="line">    System.out.println(AntilazyLoad.class);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><img src="http://7xo1gw.com1.z0.glb.clouddn.com/coding_android_bug_fix10.png" alt=""></p>
<p>其中AntilazyLoad类会被打包成单独的hack.dex，这样当安装apk的时候，classes.dex内的类都会引用一个在不相同dex中的AntilazyLoad类，这样就防止了类被打上CLASS_ISPREVERIFIED的标志了，只要没被打上这个标志的类都可以进行打补丁操作。</p>
<p>然后在应用启动的时候加载进来.AntilazyLoad类所在的dex包必须被先加载进来,不然AntilazyLoad类会被标记为不存在，即使后续加载了hack.dex包，那么他也是不存在的，这样屏幕就会出现茫茫多的类AntilazyLoad找不到的log。</p>
<p>所以Application作为应用的入口不能插入这段代码。（因为载入hack.dex的代码是在Application中onCreate中执行的，如果在Application的构造函数里面插入了这段代码，那么就是在hack.dex加载之前就使用该类，该类一次找不到，会被永远的打上找不到的标志)</p>
<p>其中:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ClassVerifier</span></span>&#123;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> PREVENT_VERIFY = <span class="keyword">false</span>;</div><div class="line">    <span class="comment">//false防止代码被执行，提高性能</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>之所以选择构造函数是因为他不增加方法数，一个类即使没有显式的构造函数，也会有一个隐式的默认构造函数。<br>空间使用的是在字节码插入代码,而不是源代码插入，使用的是javaassist库来进行字节码插入的。</p>
<p><strong> 隐患:</strong><br>虚拟机在安装期间为类打上CLASS_ISPREVERIFIED标志是为了提高性能的，我们强制防止类被打上标志是否会影响性能？这里我们会做一下更加详细的性能测试．但是在大项目中拆分dex的问题已经比较严重，很多类都没有被打上这个标志。</p>
<p><strong> 如何打包补丁包：</strong><br>１. 空间在正式版本发布的时候，会生成一份缓存文件，里面记录了所有class文件的md5，还有一份mapping混淆文件。<br>２. 在后续的版本中使用-applymapping选项，应用正式版本的mapping文件，然后计算编译完成后的class文件的md5和正式版本进行比较，把不相同的class文件打包成补丁包。</p>
<blockquote>
<p>备注：该方案现在也应用到我们的编译过程当中,编译不需要重新打包dex，只需要把修改过的类的class文件打包成patch dex，然后放到sdcard下，那么就会让改变的代码生效。</p>
</blockquote>
<p>文章转自QQ空间终端开发团队的<a href="http://mp.weixin.qq.com/s?__biz=MzI1MTA1MzM2Nw==&amp;mid=400118620&amp;idx=1&amp;sn=b4fdd5055731290eef12ad0d17f39d4a&amp;scene=0#wechat_redirect" target="_blank" rel="external">《安卓应用的热补丁动态修复技术》</a></p>
<h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><ul>
<li><a href="https://m.oschina.net/blog/308583" target="_blank" rel="external">Android dex分包方案</a></li>
<li><a href="http://android-developers.blogspot.jp/2011/07/custom-class-loading-in-dalvik.html" target="_blank" rel="external">Custom Class Loading in Dalvik</a></li>
<li><a href="http://developer.android.com/intl/zh-cn/tools/building/multidex.html" target="_blank" rel="external">Building Apps with Over 65K Methods</a></li>
<li><a href="https://github.com/dodola/HotFix" target="_blank" rel="external">安卓App热补丁动态修复框架HotFix</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/12/07/android_bug_fix_solution/" data-id="cj4zxrdzt0012u8nh3hdqv641" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/bugfix/">bugfix</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-tools_hexo_article_contents" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/05/tools_hexo_article_contents/" class="article-date">
  <time datetime="2015-12-05T09:31:29.000Z" itemprop="datePublished">2015-12-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/tools/">tools</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/05/tools_hexo_article_contents/">为Hexo博客文章添加目录</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>Hexo博客系统的核心支持生成目录（Table of Contents），但其默认的主题Landscape并不支持目录的显示。我们只需对Landscape的主题文件稍作修改并添加一点目录的CSS就可以在文章前面显示友好的目录了。<br>我本人用的是Yillia主题，该主题也不支持文章目录的生成，同样也可以用下文中的方式实现。<br>创建对应局部模块之前，首先要想想这个功能应该属于哪个布局？要添加到哪个局部模块下？考虑这些是为了整洁性，当你添加的东西越来越多的时候才不至于令自己混乱。 </p>
<h2 id="修改文件"><a href="#修改文件" class="headerlink" title="修改文件"></a>修改文件</h2><p>修改主题的ejs文件<br>我们首先要编辑文章显示页面的模板，也就是themes/landscape/layout/_partial/article.ejs文件。为了将目录生成在正文之前，我们首先在这个文件中找到&lt;%- post.content %&gt;，并在这一行之前加入如下代码：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- Table of Contents --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">%</span> <span class="attr">if</span> (!<span class="attr">index</span> &amp;&amp; <span class="attr">post.toc</span>)&#123; %&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"toc"</span> <span class="attr">class</span>=<span class="string">"toc-article"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">strong</span> <span class="attr">class</span>=<span class="string">"toc-title"</span>&gt;</span>文章目录<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">%-</span> <span class="attr">toc</span>(<span class="attr">post.content</span>) %&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">%</span> &#125; %&gt;</span></div></pre></td></tr></table></figure></p>
<p>这段代码的含义清晰明了，if语句中有两个条件，!index是为了不在首页的文章摘要中生成目录，post.toc确保了只在显式地标记了toc: true的文章中生成目录。若这两个条件满足，则创建一个目录的<code>&lt;div&gt;</code>。<br>这里使用了Hexo提供的toc()帮助函数，它的使用方法如下：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">%-</span> <span class="attr">toc</span>(<span class="attr">str</span>, [<span class="attr">options</span>]) %&gt;</span></div></pre></td></tr></table></figure></p>
<p>str就是文章内容，options有两个参数，一个是class，也就是html标签的class值，默认为toc；一个是list_number，是否显示列表编号，默认值是true。</p>
<p>修改完这个文件之后，找一篇包含了多个子标题的文章，并在文章开头的front-matter中添加一句toc: true，在浏览器中访问这篇文章，应该可以看到文章的开头处已经有了带链接的目录。但是这样的目录实在太难看，我们还需要添加相应的CSS来将其指定为我们想要的样式。<br>为目录编写CSS文件</p>
<p>要指定目录的样式，我们要修改的文件是themes/landscape/source/css/_partial/article.styl。在文件的最后，添加如下代码：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">/*toc*/</div><div class="line">.toc-article</div><div class="line">  background #eee</div><div class="line">  border 1px solid #bbb</div><div class="line">  border-radius 10px</div><div class="line">  margin 1.5em 0 0.3em 1.5em</div><div class="line">  padding 1.2em 1em 0 1em</div><div class="line">  max-width 28%</div><div class="line"></div><div class="line">.toc-title</div><div class="line">  font-size 120%</div><div class="line"></div><div class="line">#toc</div><div class="line">  line-height 1em</div><div class="line">  font-size 0.9em</div><div class="line">  float right</div><div class="line">  .toc</div><div class="line">    padding 0</div><div class="line">    margin 1em</div><div class="line">    line-height 1.8em</div><div class="line">    li</div><div class="line">      list-style-type none</div><div class="line"></div><div class="line">  .toc-child </div><div class="line">    margin-left 1em</div></pre></td></tr></table></figure></p>
<p>第一段的toc-article指定了目录整个<code>&lt;div&gt;</code>的背景色、边框色、倒角半径、各种间距以及最大的宽度。注意这里最好指定目录的最大宽度，我将其设为了28%，也就是文章正文那个框的宽度的28%，也可以设为一个固定的长度，比如在笔记本电脑上16em就是个不错的宽度，但为了能适配各种不同尺寸的屏幕，最好还是设置为百分比。如果不指定最大宽度，遇到比较长的标题时，生成的目录会非常难看。这个最大宽度的设置是我在网上其他添加目录的方法中没有见到的。</p>
<p>第二段的toc-title指的就是“文章目录”那四个字，这四个字要比其他字大一些，将其字号设为其他字的120%。</p>
<p>第三段的#toc.toc指定了目录列表的一些细节，将font-size设为0.9em会让目录的字比文章的字稍小一些。最后的.toc-child指定了二级目录的缩进量。</p>
<p>再次生成页面，应该已经可以显示比较美观的目录了。</p>
<h2 id="补充说明"><a href="#补充说明" class="headerlink" title="补充说明"></a>补充说明</h2><p>通常情况下我们不需要为每一篇文章都添加目录，因为大部分文章的长度还是相对较短，或者结构简单而没有添加小标题。在我的博客上，需要添加目录的长文还是相对较少的。因为我选择了默认不生成目录，而手动为需要目录的文章添加显式地标记。</p>
<p>下面我就需要编辑每一篇需要添加目录的文章，在文章开头的front-matter中加入toc: true。</p>
<h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><ul>
<li><a href="http://kuangqi.me/tricks/enable-table-of-contents-on-hexo/" target="_blank" rel="external">为Hexo博客添加目录</a></li>
<li><a href="http://www.linux2me.com/categories/Hexo/" target="_blank" rel="external">Hexo站点中添加文章目录以及归档</a></li>
<li><a href="http://www.ituring.com.cn/article/199624" target="_blank" rel="external">Hexo站点中添加文章目录</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/12/05/tools_hexo_article_contents/" data-id="cj4zxre3w0066u8nhkft1n1nm" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hexo/">hexo</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-tools_ubuntu_svn_server" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/05/tools_ubuntu_svn_server/" class="article-date">
  <time datetime="2015-12-05T08:42:29.000Z" itemprop="datePublished">2015-12-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/tools/">tools</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/05/tools_ubuntu_svn_server/">Ubuntu Server端部署SVN</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>Apache Subversion（简称SVN，svn），是一个开放源代码的版本控制系统，相对于的RCS、CVS，采用了分支管理系统，它的设计目标就是取代CVS。互联网上越来越多的控制服务从CVS转移到Subversion。</p>
<h2 id="安装步骤"><a href="#安装步骤" class="headerlink" title="安装步骤"></a>安装步骤</h2><p>首先，从镜像下载安装svn服务器端：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install subversion</div></pre></td></tr></table></figure></p>
<p>进入目录，准备创建svn目录:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/</div></pre></td></tr></table></figure></p>
<p>创建一个svn目录:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mkdir svn</div></pre></td></tr></table></figure></p>
<p>修改目录权限为777:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">chmod -R 777 svn</div></pre></td></tr></table></figure></p>
<p>创建一个svn版本仓库sunny(sunny可以随便起名字)<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">svnadmin create /usr/<span class="built_in">local</span>/svn/sunny</div></pre></td></tr></table></figure></p>
<p>进入sunny版本仓库下的配置文件目录:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> sunny/conf</div></pre></td></tr></table></figure></p>
<h2 id="修改配置"><a href="#修改配置" class="headerlink" title="修改配置"></a>修改配置</h2><p>1.下面要修改这个目录下的三个配置文件<br>(1)vi svnserve.conf    //配置版本库信息和用户文件和用户密码文件的路径、版本库路径<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># anon-access = read</span></div><div class="line"><span class="comment"># auth-access = write</span></div><div class="line"><span class="comment"># password-db = passwd</span></div></pre></td></tr></table></figure></p>
<p>//把这四行，前面的#号和空格去掉，变成<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">anon-access = none      //改成none</div><div class="line">auth-access = write</div><div class="line">password-db = passwd</div><div class="line">realm = sunny           //改成自己的版本库</div></pre></td></tr></table></figure></p>
<p>保存</p>
<p>(2)vi authz     //文件,创建svn组和组用户的权限<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[group]</div><div class="line">sunny = gep,wce //创建一个sunny的组，并制定两个用户gep和wce</div><div class="line"> </div><div class="line">[/]             //制定根目录下的权限</div><div class="line">@sunny = rw     //sunny组用户权限为读写</div><div class="line">* = r           //其他用户只有读权限</div></pre></td></tr></table></figure></p>
<p>保存退出</p>
<p>(3) vi passwd   //创建或修改用户密码<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[users]</div><div class="line">gep = 123456    //用户名为gep的用户的密码为123456</div><div class="line">wce = 123456    //。。。</div></pre></td></tr></table></figure></p>
<p>保存退出</p>
<p>2.然后要设置自启动<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vi /etc/rc.local</div></pre></td></tr></table></figure></p>
<p>文件内容如下<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/sh  </span></div><div class="line"><span class="comment">#  </span></div><div class="line"><span class="comment"># This script will be executed *after* all the other init scripts.  </span></div><div class="line"><span class="comment"># You can put your own initialization stuff in here if you don't  </span></div><div class="line"><span class="comment"># want to do the full Sys V style init stuff.  </span></div><div class="line">  </div><div class="line">touch /var/lock/subsys/<span class="built_in">local</span>  </div><div class="line">/usr/<span class="built_in">local</span>/webserver/mysql/3306/mysql start  </div><div class="line"><span class="built_in">ulimit</span> -SHn 51200  </div><div class="line">/usr/<span class="built_in">local</span>/webserver/php/sbin/php-fpm start  </div><div class="line">/usr/<span class="built_in">local</span>/webserver/nginx/sbin/nginx  </div><div class="line">svnserve -d -r /usr/<span class="built_in">local</span>/svn/sunny  </div><div class="line"><span class="comment">#/usr/local/webserver/mysql/bin/mysql -u root -p -S /tmp/mysql.sock</span></div></pre></td></tr></table></figure></p>
<p>3.停止Subversion服务器：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">killall svnserve</div></pre></td></tr></table></figure></p>
<p>4.启动Subversion服务器 对于单个代码仓库,启动命令：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">svnserve -d -r /var/svn --listen-host 10.19.3.103</div></pre></td></tr></table></figure></p>
<p>其中-d表示在后台运行，-r指定服务器的根目录，这样访问服务器时就可以直接 用svn://服务器ip来访问了。</p>
<p>5.说明<br>如果服务器有多ip的话–listen-host来指定监听的ip地址。我们可以在Subversion客户端中通过svn://10.19.3.103来访问Subversion服务器，对于多个代码仓库,我们在启动时也可以用-r选项来指定服务器根目录,但访问时 需要写上每个仓库相对于svn根目录的相对路径. 比如,我们有两个代码仓库/var/vss/repo1 和/var/vss/repo2,我们用如下命令启动<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">svnserve -d -r /var/vss --listen-host 10.19.3.103</div><div class="line">svnserve -d -r /usr/<span class="built_in">local</span>/svn/dream --listen-host 114.215.94.193</div></pre></td></tr></table></figure></p>
<p> 在客户端访问时用svn://10.19.3.103/repo1和svn: //10.19.3.103/repo2来分别访问两个项目。</p>
<h2 id="使用示例"><a href="#使用示例" class="headerlink" title="使用示例"></a>使用示例</h2><p>在SVN中有三个项目：ALL,CRM,OA<br>有三个用户：all,crm,oa<br>步骤：<br>1、打开svnserve.conf，去掉下面四行中的 # 符号<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># anon-access = read         #不用账号登录，只有读属性</div><div class="line"># auth-access = write         #账号登录，有读写属性</div><div class="line"># password-db = passwd   #指定用户密码文件</div><div class="line"># authz-db = authz             #指定用户分组和指定各组对各个项目的填写属性</div></pre></td></tr></table></figure></p>
<p>2、打开passwd，新建三个用户</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">all = all</div><div class="line">crm = crm</div><div class="line">oa = oa</div></pre></td></tr></table></figure>
<p>3、打开authz，新建三个gruop<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">group_all = all,crm,oa</div><div class="line">group_crm = all,crm</div><div class="line">group_oa = all,oa</div></pre></td></tr></table></figure></p>
<p>4、在authz中设置权限<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"># 对ALL项目，三个人都有读写权限</div><div class="line">[/ALL]</div><div class="line">@group_all = rw</div><div class="line">* =</div><div class="line"># 对CRM项目，all,crm两个人才有读写权限</div><div class="line">[/CRM]</div><div class="line">@group_crm = rw</div><div class="line">* =</div><div class="line"># 对OA项目，all,oa两个人才有读写权限</div><div class="line">[/OA]</div><div class="line">group_oa = rw</div><div class="line">* =</div></pre></td></tr></table></figure></p>
<h2 id="常用svn命令"><a href="#常用svn命令" class="headerlink" title="常用svn命令"></a>常用svn命令</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">lsof -i :3690                        //查看svn是否启动  </div><div class="line">ps aux |grep &apos;svn&apos;                   //查找所有svn启动的进程  </div><div class="line">kill -9 2505                         //杀死2505这个查找到的svn进程  </div><div class="line">svnserve -d -r /usr/local/svn/sunny  //启动svn</div><div class="line">//启动svn(可以把这个放到/etc/local/rc.local文件中，实现开机自启动)  </div><div class="line">  </div><div class="line">svn up                         //更新文件  </div><div class="line">svn commit -m &quot;注释&quot; xxx.php   //提交文件  </div><div class="line">svn ci -m&apos;aaa&apos; test.php        //提交文件  </div><div class="line">  </div><div class="line">svn add file                 //新建文件并添加到svn  </div><div class="line">svn add *.php                //(添加当前目录下所有的php文件)  </div><div class="line">svn delete test.php          //删除test.php  </div><div class="line">svn log test.php             //查看test文件的log信息  </div><div class="line">svn co svn://x.x.x.x ./      //检出一份版本库文件到当前目录  </div><div class="line">  </div><div class="line">svn switch --relocate svn://x.x.x.x  svn://x.x.x.x      //重新定位SVN版本库地址</div></pre></td></tr></table></figure>
<h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><ul>
<li><a href="http://subversion.apache.org/" target="_blank" rel="external">Subversion官网</a></li>
<li><a href="http://www.2cto.com/os/201305/208491.html" target="_blank" rel="external">Ubuntu安装SVN服务器端</a> </li>
<li><a href="http://www.cnblogs.com/wangkangluo1/archive/2012/09/08/2677115.html" target="_blank" rel="external">Ubuntu下SVN服务器的安装和配置</a></li>
<li><a href="http://jameswsz.iteye.com/blog/787283" target="_blank" rel="external">SVN 权限配置详细说明</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/12/05/tools_ubuntu_svn_server/" data-id="cj4zxre4c006ou8nhn3bw8rgs" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/svn/">svn</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-android_activity_stack" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/03/android_activity_stack/" class="article-date">
  <time datetime="2015-12-03T06:54:29.000Z" itemprop="datePublished">2015-12-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/android/">android</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/03/android_activity_stack/">Intent Flag之FLAG_ACTIVITY_CLEAR_TOP</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>Intent如果设置FLAG_ACTIVITY_CLEAR_TOP，并且要启动的activity已经在当前的任务中，那么在该activity之上的activity都会关闭，并且intent会传递给老的activity（现在在栈顶）<br>例如，假设一个任务包含四个activity:A，B,C,D,假设D中启动B并且带有这个标志，则 C和D都会结束，并且B会收到intent，现在的栈变成了A,B。<br>官方解释：</p>
<blockquote>
<p>If set, and the activity being launched is already running in the current task, then instead of launching a new instance of that activity, all of the other activities on top of it will be closed and this Intent will be delivered to the (now on top) old activity as a new Intent. </p>
</blockquote>
<p>在上面的例子中，当前运行的B要么在他的onNewIntent方法中接受这个Intent，或者结束掉已经存在的实例并且重启一个，这依赖于B的启动模式，如果是”multiple(即standard)”模式,那么就会结束掉当前Activity实例并重启一个，其他启动模式下将会直接调用他的onNewIntent。</p>
<h2 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h2><p>问题：多activity中退出整个程序，例如从A-&gt;B-&gt;C-&gt;D，这时我需要从D直接退出程序。<br>finish()和system(0)都只能退出单个activity。杀进程等的等方式都不行。<br>解决方式：<br>我们知道Android的窗口类提供了历史栈，我们可以通过stack的原理来巧妙的实现，这里我们在D窗口打开A窗口时在Intent中直接加入标志Intent.FLAG_ACTIVITY_CLEAR_TOP，再次开启A时将会清除该进程空间的所有Activity。</p>
<h2 id="使用示例"><a href="#使用示例" class="headerlink" title="使用示例"></a>使用示例</h2><p>在D中使用下面的代码:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Intent intent = <span class="keyword">new</span> Intent();   </div><div class="line">intent.setClass(D.<span class="keyword">this</span>, A.class);  </div><div class="line">intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);  <span class="comment">//注意本行的FLAG设置  </span></div><div class="line">startActivity(intent);  </div><div class="line">finish();<span class="comment">//关掉自己</span></div></pre></td></tr></table></figure></p>
<p>在A中加入代码：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//Override  </span></div><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onNewIntent</span><span class="params">(Intent intent)</span> </span>&#123;  </div><div class="line"><span class="comment">// TODO Auto-generated method stub  </span></div><div class="line"><span class="keyword">super</span>.onNewIntent(intent);  </div><div class="line"><span class="comment">//退出  </span></div><div class="line">        <span class="keyword">if</span> ((Intent.FLAG_ACTIVITY_CLEAR_TOP &amp; intent.getFlags()) != <span class="number">0</span>) &#123;  </div><div class="line">               finish();  </div><div class="line">        &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>A的Manifest.xml配置成android:launchMode=”singleTop”</p>
<p><strong> 原理总结</strong><br>一般A是程序的入口点，从D起一个A的activity，加入标识Intent.FLAG_ACTIVITY_CLEAR_TOP这个过程中会把栈中B，C，都清理掉。因为A是android:launchMode=”singleTop”<br>不会调用oncreate(),而是响应onNewIntent（）这时候判断Intent.FLAG_ACTIVITY_CLEAR_TOP，然后把A finish（）掉。<br>栈中A,B,C,D全部被清理。所以整个程序退出了。</p>
<p><strong> 补充说明</strong><br>1.可以把A设置成不可见的Acitivity（方法见下面），然后在它的onCreate方法里跳转到“真正”的载入界面就可以实现在D中点退出程序按钮时看上去立即退出程序的效果。<br>2.A必须是程序启动的第一个Activity才能起到这种立即退出的效果，因为Intent.FLAG_ACTIVITY_CLEAR_TOP只会把目标Activity的“上面”的Activity清理掉，而如果目标Activity的“下面”还有Activity（换句话说，目标Activity不在栈底），则finish后只会到他下面的那个Activity，而不是立即退出的效果了。<br>3.不可见Activity<br>在项目的AndroidManifest.xml文件中相应的Activity标签中添加这样一行：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">android:theme=”@android:style/Theme.NoDisplay”</div></pre></td></tr></table></figure></p>
<p>这样一来，当这个Activity启动的时候，就不会显示出界面了。</p>
<h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><ul>
<li><a href="http://www.xuebuyuan.com/1551789.html" target="_blank" rel="external">FLAG_ACTIVITY_CLEAR_TOP</a></li>
<li><a href="http://gundumw100.iteye.com/blog/1075281" target="_blank" rel="external">采用FLAG_ACTIVITY_CLEAR_TOP退出整个程序</a></li>
<li><a href="http://developer.android.com/intl/zh-cn/reference/android/content/Intent.html" target="_blank" rel="external">官网Intent-Flags</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/12/03/android_activity_stack/" data-id="cj4zxrdyc0001u8nhjzdaorlf" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/intentflag/">intentflag</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/page/3/">&laquo; __('prev')</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/5/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/algorithm/">algorithm</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/android/">android</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/article/">article</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/coding/">coding</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/">database</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/framework/">framework</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/humanism/">humanism</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/message-push/">message_push</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/music/">music</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/ndk/">ndk</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/note/">note</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/protocol/">protocol</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/reading/">reading</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/springmvc/">springmvc</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/string/">string</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/study/">study</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/tools/">tools</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/versioncontroll/">versioncontroll</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/">web</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/好文/">好文</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/电影/">电影</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/AliPay/">AliPay</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Einstein/">Einstein</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GreenDao/">GreenDao</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ORMLite/">ORMLite</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WXPay/">WXPay</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/activity/">activity</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/android-studio/">android_studio</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/android-ui/">android_ui</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/androidstudio/">androidstudio</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/application/">application</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/book/">book</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/broadcast/">broadcast</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bugfix/">bugfix</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/chinese-weman/">chinese_weman</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/code-collection/">code_collection</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/context/">context</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/database/">database</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/decomplication/">decomplication</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/design-model/">design model</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/eclipse/">eclipse</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/eventbus/">eventbus</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/feminism/">feminism</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fullstack/">fullstack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/">github</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/google/">google</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gradle/">gradle</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/handle/">handle</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/handler/">handler</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/http/">http</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/https/">https</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/humanism/">humanism</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iframe/">iframe</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/image/">image</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/imageloader/">imageloader</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/intent/">intent</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/intentflag/">intentflag</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iphone/">iphone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jni/">jni</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/listview/">listview</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/markdown/">markdown</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/material-design/">material_design</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/maven/">maven</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/music/">music</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mvp/">mvp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nd/">nd</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/notification/">notification</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/obfuscation/">obfuscation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/observer/">observer</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/opensource/">opensource</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/otto/">otto</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pageradapter/">pageradapter</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pay/">pay</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/placeholder/">placeholder</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/project-build/">project_build</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pulltorefresh/">pulltorefresh</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pulltorefreshlistview/">pulltorefreshlistview</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/saxophone/">saxophone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/screen-record/">screen-record</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shortkey/">shortkey</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/snack/">snack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/socket/">socket</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sort/">sort</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spannable/">spannable</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/speech/">speech</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/springmvc/">springmvc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sqlite/">sqlite</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssl/">ssl</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sublime/">sublime</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/svg/">svg</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/svn/">svn</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/templates/">templates</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/textview/">textview</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tomcat/">tomcat</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/translate/">translate</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/viewpager/">viewpager</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/volley/">volley</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/website/">website</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webview/">webview</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xpnet/">xpnet</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/书单/">书单</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/史玉柱/">史玉柱</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/感悟/">感悟</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/电影/">电影</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/贾樟柯/">贾樟柯</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/AliPay/" style="font-size: 10px;">AliPay</a> <a href="/tags/Einstein/" style="font-size: 10px;">Einstein</a> <a href="/tags/GreenDao/" style="font-size: 10px;">GreenDao</a> <a href="/tags/ORMLite/" style="font-size: 10px;">ORMLite</a> <a href="/tags/WXPay/" style="font-size: 10px;">WXPay</a> <a href="/tags/activity/" style="font-size: 10px;">activity</a> <a href="/tags/android-studio/" style="font-size: 10px;">android_studio</a> <a href="/tags/android-ui/" style="font-size: 10px;">android_ui</a> <a href="/tags/androidstudio/" style="font-size: 20px;">androidstudio</a> <a href="/tags/animation/" style="font-size: 20px;">animation</a> <a href="/tags/application/" style="font-size: 10px;">application</a> <a href="/tags/book/" style="font-size: 10px;">book</a> <a href="/tags/broadcast/" style="font-size: 10px;">broadcast</a> <a href="/tags/bugfix/" style="font-size: 13.33px;">bugfix</a> <a href="/tags/chinese-weman/" style="font-size: 10px;">chinese_weman</a> <a href="/tags/code-collection/" style="font-size: 10px;">code_collection</a> <a href="/tags/context/" style="font-size: 10px;">context</a> <a href="/tags/database/" style="font-size: 10px;">database</a> <a href="/tags/decomplication/" style="font-size: 10px;">decomplication</a> <a href="/tags/design-model/" style="font-size: 13.33px;">design model</a> <a href="/tags/eclipse/" style="font-size: 10px;">eclipse</a> <a href="/tags/eventbus/" style="font-size: 10px;">eventbus</a> <a href="/tags/feminism/" style="font-size: 10px;">feminism</a> <a href="/tags/fullstack/" style="font-size: 10px;">fullstack</a> <a href="/tags/github/" style="font-size: 13.33px;">github</a> <a href="/tags/google/" style="font-size: 10px;">google</a> <a href="/tags/gradle/" style="font-size: 16.67px;">gradle</a> <a href="/tags/handle/" style="font-size: 10px;">handle</a> <a href="/tags/handler/" style="font-size: 10px;">handler</a> <a href="/tags/hexo/" style="font-size: 16.67px;">hexo</a> <a href="/tags/http/" style="font-size: 10px;">http</a> <a href="/tags/https/" style="font-size: 10px;">https</a> <a href="/tags/humanism/" style="font-size: 10px;">humanism</a> <a href="/tags/iframe/" style="font-size: 10px;">iframe</a> <a href="/tags/image/" style="font-size: 10px;">image</a> <a href="/tags/imageloader/" style="font-size: 20px;">imageloader</a> <a href="/tags/intent/" style="font-size: 10px;">intent</a> <a href="/tags/intentflag/" style="font-size: 13.33px;">intentflag</a> <a href="/tags/iphone/" style="font-size: 10px;">iphone</a> <a href="/tags/jni/" style="font-size: 10px;">jni</a> <a href="/tags/listview/" style="font-size: 10px;">listview</a> <a href="/tags/markdown/" style="font-size: 10px;">markdown</a> <a href="/tags/material-design/" style="font-size: 10px;">material_design</a> <a href="/tags/maven/" style="font-size: 10px;">maven</a> <a href="/tags/music/" style="font-size: 13.33px;">music</a> <a href="/tags/mvp/" style="font-size: 10px;">mvp</a> <a href="/tags/mysql/" style="font-size: 16.67px;">mysql</a> <a href="/tags/nd/" style="font-size: 10px;">nd</a> <a href="/tags/notification/" style="font-size: 10px;">notification</a> <a href="/tags/obfuscation/" style="font-size: 10px;">obfuscation</a> <a href="/tags/observer/" style="font-size: 10px;">observer</a> <a href="/tags/opensource/" style="font-size: 13.33px;">opensource</a> <a href="/tags/otto/" style="font-size: 10px;">otto</a> <a href="/tags/pageradapter/" style="font-size: 10px;">pageradapter</a> <a href="/tags/pay/" style="font-size: 13.33px;">pay</a> <a href="/tags/placeholder/" style="font-size: 10px;">placeholder</a> <a href="/tags/project-build/" style="font-size: 10px;">project_build</a> <a href="/tags/pulltorefresh/" style="font-size: 10px;">pulltorefresh</a> <a href="/tags/pulltorefreshlistview/" style="font-size: 13.33px;">pulltorefreshlistview</a> <a href="/tags/saxophone/" style="font-size: 10px;">saxophone</a> <a href="/tags/screen-record/" style="font-size: 10px;">screen-record</a> <a href="/tags/shortkey/" style="font-size: 10px;">shortkey</a> <a href="/tags/snack/" style="font-size: 10px;">snack</a> <a href="/tags/socket/" style="font-size: 10px;">socket</a> <a href="/tags/sort/" style="font-size: 13.33px;">sort</a> <a href="/tags/spannable/" style="font-size: 10px;">spannable</a> <a href="/tags/speech/" style="font-size: 10px;">speech</a> <a href="/tags/springmvc/" style="font-size: 10px;">springmvc</a> <a href="/tags/sqlite/" style="font-size: 10px;">sqlite</a> <a href="/tags/ssl/" style="font-size: 13.33px;">ssl</a> <a href="/tags/sublime/" style="font-size: 10px;">sublime</a> <a href="/tags/svg/" style="font-size: 13.33px;">svg</a> <a href="/tags/svn/" style="font-size: 13.33px;">svn</a> <a href="/tags/templates/" style="font-size: 10px;">templates</a> <a href="/tags/textview/" style="font-size: 10px;">textview</a> <a href="/tags/tomcat/" style="font-size: 16.67px;">tomcat</a> <a href="/tags/translate/" style="font-size: 10px;">translate</a> <a href="/tags/viewpager/" style="font-size: 13.33px;">viewpager</a> <a href="/tags/volley/" style="font-size: 10px;">volley</a> <a href="/tags/website/" style="font-size: 13.33px;">website</a> <a href="/tags/webview/" style="font-size: 10px;">webview</a> <a href="/tags/xpnet/" style="font-size: 13.33px;">xpnet</a> <a href="/tags/书单/" style="font-size: 10px;">书单</a> <a href="/tags/史玉柱/" style="font-size: 10px;">史玉柱</a> <a href="/tags/感悟/" style="font-size: 10px;">感悟</a> <a href="/tags/电影/" style="font-size: 10px;">电影</a> <a href="/tags/贾樟柯/" style="font-size: 10px;">贾樟柯</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">February 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/11/11/study_my_website_collection/">常用网站收集</a>
          </li>
        
          <li>
            <a href="/2016/05/04/web_develop_config/">WEB开发之环境配置</a>
          </li>
        
          <li>
            <a href="/2016/05/04/web_springmvc1/">Spring MVC入门(一)</a>
          </li>
        
          <li>
            <a href="/2016/04/07/android_network_ssl/">为你的Android App实现自签名的SSL证书</a>
          </li>
        
          <li>
            <a href="/2016/03/28/android_notification_push/">Android实现推送方式解决方案</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 ARESXIONG<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>