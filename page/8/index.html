<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>ARESXIONG</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="ARESXIONG">
<meta property="og:url" content="http://yoursite.com/page/8/index.html">
<meta property="og:site_name" content="ARESXIONG">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ARESXIONG">
  
    <link rel="alternate" href="/atom.xml" title="ARESXIONG" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">ARESXIONG</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-android_image_process" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/11/09/android_image_process/" class="article-date">
  <time datetime="2015-11-09T02:46:29.000Z" itemprop="datePublished">2015-11-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/android/">android</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/09/android_image_process/">Android通过相册和拍照获取图片</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="1-图片获取"><a href="#1-图片获取" class="headerlink" title="1.图片获取"></a>1.图片获取</h2><p> Android相机、相册获取图片在本地组件显示（或者上传至服务器），实现可以在Activity中通过如下代码可以启动相机，然后在重写的onActivityResult方法中可以获取到返回的照片数据：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Intent openCameraIntent = <span class="keyword">new</span> Intent(MediaStore.ACTION_IMAGE_CAPTURE);   <span class="comment">//拍照</span></div><div class="line">startActivityForResult(openCameraIntent, TAKE_PICTURE);</div></pre></td></tr></table></figure></p>
<p>这种方式在onActivityResult方法里通过Intent的getData方法获取的数据转换成bitmap并显示在界面上，有时候会有取不到数据，或者显示的bitmap会非常小，如果将bitmap保存到sd卡后会发现，图片的分辨率很低，并且图片大小也是经过压缩的，不管将相机的像素设置多高，最后通过这种方式返回的bitmap总是经过压缩了的。如果想获得理想的照片大小和分辨率改如何处理呢？首先来简述一下为什么返回的图片是经过了压缩的。</p>
<p>Android系统分配给每个应用的默认最大内存是16M，读取位图Bitmap时，分给虚拟机中的图片的堆栈大小只有8M，如果超出了，就会出现OutOfMemory异常。所以，系统为了防止应用内存占用过大，对于在应用内通过相机拍摄的图片最终返回来的结果进行了压缩，压缩后的图片变得很小，通过之前说的getData的方式只能满足比如显示个人头像这样的需求，如果要显示大图，就会出现模糊的情况。那如何获取清晰的大图呢？解决思路如下：</p>
<p>1.拍照时，将拍得的照片先保存在本地，通过修改之前的代码如下：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Uri imageUri = Uri.fromFile(<span class="keyword">new</span> File(Environment.getExternalStorageDirectory(),<span class="string">"image.jpg"</span>));  </div><div class="line"><span class="comment">//指定照片保存路径（SD卡），image.jpg为一个临时文件，每次拍照后这个图片都会被替换  </span></div><div class="line">openCameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, imageUri);</div></pre></td></tr></table></figure></p>
<p>2.在onActivityResult方法中再将图片取出，并经过缩小处理再显示在界面上或上传给服务器（压缩比例自定义）<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Override</span>  </div><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onActivityResult</span><span class="params">(<span class="keyword">int</span> requestCode, <span class="keyword">int</span> resultCode, Intent data)</span> </span>&#123;  </div><div class="line">    <span class="keyword">super</span>.onActivityResult(requestCode, resultCode, data);  </div><div class="line">    <span class="keyword">if</span> (resultCode == RESULT_OK) &#123;  </div><div class="line">        <span class="keyword">switch</span> (requestCode) &#123;  </div><div class="line">        <span class="keyword">case</span> TAKE_PICTURE:  </div><div class="line">            <span class="comment">//将保存在本地的图片取出并缩小后显示在界面上  </span></div><div class="line">            Bitmap bitmap = BitmapFactory.decodeFile(Environment.getExternalStorageDirectory()+<span class="string">"/image.jpg"</span>);  </div><div class="line">            Bitmap newBitmap = ImageTools.zoomBitmap(bitmap, bitmap.getWidth() / SCALE, bitmap.getHeight() / SCALE);  </div><div class="line">            <span class="comment">//由于Bitmap内存占用较大，这里需要回收内存，否则会报out of memory异常  </span></div><div class="line">            bitmap.recycle();  </div><div class="line">              </div><div class="line">            <span class="comment">//将处理过的图片显示在界面上，并保存到本地  </span></div><div class="line">            iv_image.setImageBitmap(newBitmap);  </div><div class="line">            ImageTools.savePhotoToSDCard(newBitmap, Environment.getExternalStorageDirectory().getAbsolutePath(), String.valueOf(System.currentTimeMillis()));  </div><div class="line">            <span class="keyword">break</span>;  </div><div class="line">        <span class="keyword">default</span>:  </div><div class="line">            <span class="keyword">break</span>;  </div><div class="line">        &#125;  </div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>由于Android给bitmap分配的内存最大不超过8M，所以对使用完的较大的Bitmap要释放内存，调用其recycle()方法即可。然后将缩小后的bitmap显示在界面上或保存到SD卡，至于之前保存的原图，可以删掉，也可以不处理，因为同名文件下次操作会直接被覆盖掉。</p>
<p>以上是拍照获取图片，如果是从相册中获取图片又如何处理呢，方法如下：</p>
<p>1.打开相册选取图片<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Intent openAlbumIntent = <span class="keyword">new</span> Intent(Intent.ACTION_GET_CONTENT);  </div><div class="line">                    openAlbumIntent.setType(<span class="string">"image/*"</span>);  </div><div class="line">                    startActivityForResult(openAlbumIntent, CHOOSE_PICTURE);</div></pre></td></tr></table></figure></p>
<p>2.在onActivity方法中处理获取到的图片，思路和之前类似<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Override</span>  </div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onActivityResult</span><span class="params">(<span class="keyword">int</span> requestCode, <span class="keyword">int</span> resultCode, Intent data)</span> </span>&#123;  </div><div class="line">        <span class="keyword">super</span>.onActivityResult(requestCode, resultCode, data);  </div><div class="line">        <span class="keyword">if</span> (resultCode == RESULT_OK) &#123;  </div><div class="line">            <span class="keyword">switch</span> (requestCode) &#123;  </div><div class="line">            <span class="keyword">case</span> CHOOSE_PICTURE:  </div><div class="line">                ContentResolver resolver = getContentResolver();  </div><div class="line">                <span class="comment">//照片的原始资源地址  </span></div><div class="line">                Uri originalUri = data.getData();   </div><div class="line">                <span class="keyword">try</span> &#123;  </div><div class="line">                    <span class="comment">//使用ContentProvider通过URI获取原始图片  </span></div><div class="line">                    Bitmap photo = MediaStore.Images.Media.getBitmap(resolver, originalUri);  </div><div class="line">                    <span class="keyword">if</span> (photo != <span class="keyword">null</span>) &#123;  </div><div class="line">                        <span class="comment">//为防止原始图片过大导致内存溢出，这里先缩小原图显示，然后释放原始Bitmap占用的内存  </span></div><div class="line">                        Bitmap smallBitmap = ImageTools.zoomBitmap(photo, photo.getWidth() / SCALE, photo.getHeight() / SCALE);  </div><div class="line">                        <span class="comment">//释放原始图片占用的内存，防止out of memory异常发生  </span></div><div class="line">                        photo.recycle();  </div><div class="line">                          </div><div class="line">                        iv_image.setImageBitmap(smallBitmap);  </div><div class="line">                    &#125;  </div><div class="line">                &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;  </div><div class="line">                    e.printStackTrace();  </div><div class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;  </div><div class="line">                    e.printStackTrace();  </div><div class="line">                &#125;    </div><div class="line">                <span class="keyword">break</span>;  </div><div class="line">              </div><div class="line">            <span class="keyword">default</span>:  </div><div class="line">                <span class="keyword">break</span>;  </div><div class="line">            &#125;  </div><div class="line">        &#125;  </div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<h2 id="2-图片裁剪"><a href="#2-图片裁剪" class="headerlink" title="2. 图片裁剪"></a>2. 图片裁剪</h2><p>拍照或相册选取完毕后，先进入系统裁剪界面，裁剪完毕后再显示或保存图片，下面看下截图部分所要调用的代码：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//截取图片  </span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">cropImage</span><span class="params">(Uri uri, <span class="keyword">int</span> outputX, <span class="keyword">int</span> outputY, <span class="keyword">int</span> requestCode)</span></span>&#123;  </div><div class="line">        <span class="comment">//裁剪图片意图  </span></div><div class="line">        Intent intent = <span class="keyword">new</span> Intent(<span class="string">"com.android.camera.action.CROP"</span>);    </div><div class="line">        intent.setDataAndType(uri, <span class="string">"image/*"</span>);    </div><div class="line">        intent.putExtra(<span class="string">"crop"</span>, <span class="string">"true"</span>);  </div><div class="line">        <span class="comment">//裁剪框的比例，1：1  </span></div><div class="line">        intent.putExtra(<span class="string">"aspectX"</span>, <span class="number">1</span>);    </div><div class="line">        intent.putExtra(<span class="string">"aspectY"</span>, <span class="number">1</span>);  </div><div class="line">        <span class="comment">//裁剪后输出图片的尺寸大小  </span></div><div class="line">        intent.putExtra(<span class="string">"outputX"</span>, outputX);     </div><div class="line">        intent.putExtra(<span class="string">"outputY"</span>, outputY);  </div><div class="line">        <span class="comment">//图片格式  </span></div><div class="line">        intent.putExtra(<span class="string">"outputFormat"</span>, <span class="string">"JPEG"</span>);  </div><div class="line">        intent.putExtra(<span class="string">"noFaceDetection"</span>, <span class="keyword">true</span>);  </div><div class="line">        intent.putExtra(<span class="string">"return-data"</span>, <span class="keyword">true</span>);    </div><div class="line">        startActivityForResult(intent, requestCode);  </div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p>例如，从相册选择图片后先调用裁剪功能代码如下：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Intent openAlbumIntent = <span class="keyword">new</span> Intent(Intent.ACTION_GET_CONTENT);  </div><div class="line">openAlbumIntent.setDataAndType(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, <span class="string">"image/*"</span>);  </div><div class="line">startActivityForResult(openAlbumIntent, REQUEST_CODE);</div></pre></td></tr></table></figure></p>
<p>接下来在onActivityResult里面对裁剪后的图片进行处理，调用上面的cropImage()方法，将URI传入，500是指定裁剪后图片的尺寸，最后一个参数为标识码：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Uri uri = data.getData();  </div><div class="line">cropImage(uri, <span class="number">500</span>, <span class="number">500</span>, CROP_PICTURE);</div></pre></td></tr></table></figure></p>
<p>处理裁剪后的图片就和之前一样：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">case</span> CROP_PICTURE:  </div><div class="line">    Bitmap photo = <span class="keyword">null</span>;  </div><div class="line">    Uri photoUri = data.getData();  </div><div class="line">    <span class="keyword">if</span> (photoUri != <span class="keyword">null</span>) &#123;  </div><div class="line">         photo = BitmapFactory.decodeFile(photoUri.getPath());  </div><div class="line">    &#125;  </div><div class="line">    <span class="keyword">if</span> (photo == <span class="keyword">null</span>) &#123;  </div><div class="line">        Bundle extra = data.getExtras();  </div><div class="line">        <span class="keyword">if</span> (extra != <span class="keyword">null</span>) &#123;  </div><div class="line">             photo = (Bitmap)extra.get(<span class="string">"data"</span>);    </div><div class="line">             ByteArrayOutputStream stream = <span class="keyword">new</span> ByteArrayOutputStream();    </div><div class="line">             photo.compress(Bitmap.CompressFormat.JPEG, <span class="number">100</span>, stream);  </div><div class="line">        &#125;    </div><div class="line">    &#125;  </div><div class="line">    iv_image.setImageBitmap(photo);  </div><div class="line"><span class="keyword">break</span>;</div></pre></td></tr></table></figure></p>
<h2 id="附加说明"><a href="#附加说明" class="headerlink" title="附加说明"></a>附加说明</h2><p>以上的文章整理自<a href="http://blog.csdn.net/ryantang03/article/details/8607295" target="_blank" rel="external">Ryan</a>的博客，作为学习之用还是有一定的参考价值的，我个人在项目开发中使用的图像处理是jdamcd写的一个demo，代码结构和严谨易用性都是非常不错的。大家可以在github上下载学习。</p>
<ul>
<li><a href="https://github.com/jdamcd/android-crop" target="_blank" rel="external">github地址</a><br>网速不好的同学可以去我云盘下载:</li>
<li><a href="http://pan.baidu.com/s/1c0HOMmG" target="_blank" rel="external">云盘地址</a> 密码：9qn8</li>
</ul>
<h3 id="相关链接"><a href="#相关链接" class="headerlink" title="相关链接"></a>相关链接</h3><ul>
<li><a href="http://blog.csdn.net/ryantang03/article/details/8654137" target="_blank" rel="external">原文链接</a></li>
<li><a href="http://download.csdn.net/detail/tangren03/5127033" target="_blank" rel="external">DEMO下载</a></li>
<li><a href="http://www.cnblogs.com/franksunny/archive/2011/11/17/2252926.html" target="_blank" rel="external">Android Camera使用小技巧</a></li>
<li><a href="http://www.cnblogs.com/mengdd/archive/2013/03/31/2991932.html" target="_blank" rel="external">相机使用基础之调用系统中的相机应用</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/11/09/android_image_process/" data-id="cj4zxopnd0027q4nh9y1h6tf3" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/image/">image</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-android_pulltorefresh_listview2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/11/09/android_pulltorefresh_listview2/" class="article-date">
  <time datetime="2015-11-09T02:03:29.000Z" itemprop="datePublished">2015-11-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/android/">android</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/09/android_pulltorefresh_listview2/">PullToRefresh使用详解（二）—— ListView的下拉刷新与上拉加载</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="1-简介"><a href="#1-简介" class="headerlink" title="1.简介"></a>1.简介</h2><p>无疑，在Android开发中，ListView是使用非常频繁的控件之一，ListView提供一个列表的容易，允许我们以列表的形式将数据展示到界面上，但是Google给我们提供的原生ListView的控件，虽然在功能上很强大，但是在用户体验和动态效果上，还是比较差劲的。为了改善用户体验，市面上纷纷出现了各种各样的自定义的ListView，他们功能强大，界面美观，使我们该需要学习的地方。其中，使用最频繁的功能无疑就是ListView的下拉刷新和上拉加载数据了，几乎在没一款内容型的App中都可以找到这种控件的身影，尤其是需要联网获取数据的模块，使用的就更为频繁了，so，我们很有必要了解下这种效果是怎么实现的。</p>
<h2 id="2-开源组件PullToRefreshList介绍"><a href="#2-开源组件PullToRefreshList介绍" class="headerlink" title="2.开源组件PullToRefreshList介绍"></a>2.开源组件PullToRefreshList介绍</h2><p>既然Android和Java都是开源的，一些常见的功能或者效果就不难被找到。PullToRefresh就是一个典型的例子，PullToRefresh是老外写的一个开源ListView组件，这个项目在ListView的基础上扩展了ListView的功能，增强了Listview的用户体验，功能十分强大，而且很容易被集成到当前的项目中，你只需要调用简单的API，即可省去很多不必要的麻烦，非常棒。以上是项目在Github的链接，有兴趣的可以戳进去down下来，使用一下。</p>
<p>PullToRefresh的Github项目地址： <a href="https://github.com/chrisbanes/Android-PullToRefresh" target="_blank" rel="external">https://github.com/chrisbanes/Android-PullToRefresh</a></p>
<h2 id="3-自定义ListView——下拉刷新-amp-上拉加载"><a href="#3-自定义ListView——下拉刷新-amp-上拉加载" class="headerlink" title="3.自定义ListView——下拉刷新&amp;上拉加载"></a>3.自定义ListView——下拉刷新&amp;上拉加载</h2><p>本文重点讲述一下自定义LisView，实现下拉刷新和上拉加载的功能，实现类似于开源项目PullToRefresh的效果。好，既然如此，先看看我实现后的效果图，再分析：<br><img src="http://7xo1gw.com1.z0.glb.clouddn.com/coding_android_pulltorefresh_2_1.jpg" alt=""><br><img src="http://7xo1gw.com1.z0.glb.clouddn.com/coding_android_pulltorefresh_2_2.jpg" alt=""><br><img src="http://7xo1gw.com1.z0.glb.clouddn.com/coding_android_pulltorefresh_2_3.jpg" alt=""><br>效果图如上所示，下面逐步讲解下实现的过程。首先，来观察一下，ListView上方的布局，我这里称其为“头布局”，这个所谓的头布局，大致功能是这样的，一个ImageView显示上下拉动方向的状态的，ImageView相同的位置隐藏了一个ProgressBar，用来在数据刷新时给个提示作用的。还有两个TextView，上面用来显示下拉刷新时提醒用户是如何操作的，例如“下拉刷新”“松开刷新”“正在刷新”，另一个是用来显示本次刷新的时间的。比较简单的布局，下面是XML代码：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">  <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">  <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">  <span class="attr">android:orientation</span>=<span class="string">"horizontal"</span> &gt;</div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">FrameLayout</span></span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">    <span class="attr">android:layout_margin</span>=<span class="string">"10dip"</span> &gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">ImageView</span></span></div><div class="line">      <span class="attr">android:id</span>=<span class="string">"@+id/iv_listview_header_arrow"</span></div><div class="line">      <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">      <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">      <span class="attr">android:layout_gravity</span>=<span class="string">"center"</span></div><div class="line">      <span class="attr">android:minWidth</span>=<span class="string">"30dip"</span></div><div class="line">      <span class="attr">android:src</span>=<span class="string">"@drawable/common_listview_headview_red_arrow"</span> /&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">ProgressBar</span></span></div><div class="line">      <span class="attr">android:id</span>=<span class="string">"@+id/pb_listview_header"</span></div><div class="line">      <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">      <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">      <span class="attr">android:layout_gravity</span>=<span class="string">"center"</span></div><div class="line">      <span class="attr">android:indeterminateDrawable</span>=<span class="string">"@drawable/common_progressbar"</span></div><div class="line">      <span class="attr">android:visibility</span>=<span class="string">"gone"</span> /&gt;</div><div class="line">  <span class="tag">&lt;/<span class="name">FrameLayout</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">LinearLayout</span></span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"fill_parent"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">    <span class="attr">android:layout_gravity</span>=<span class="string">"center_vertical"</span></div><div class="line">    <span class="attr">android:gravity</span>=<span class="string">"center_horizontal"</span></div><div class="line">    <span class="attr">android:orientation</span>=<span class="string">"vertical"</span> &gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">      <span class="attr">android:id</span>=<span class="string">"@+id/tv_listview_header_state"</span></div><div class="line">      <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">      <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">      <span class="attr">android:text</span>=<span class="string">"下拉刷新"</span></div><div class="line">      <span class="attr">android:textColor</span>=<span class="string">"#FF0000"</span></div><div class="line">      <span class="attr">android:textSize</span>=<span class="string">"18sp"</span> /&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">      <span class="attr">android:id</span>=<span class="string">"@+id/tv_listview_header_last_update_time"</span></div><div class="line">      <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">      <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">      <span class="attr">android:layout_marginTop</span>=<span class="string">"5dip"</span></div><div class="line">      <span class="attr">android:text</span>=<span class="string">"最后刷新时间: 2014-10-10 12:56:12"</span></div><div class="line">      <span class="attr">android:textColor</span>=<span class="string">"@android:color/white"</span></div><div class="line">      <span class="attr">android:textSize</span>=<span class="string">"14sp"</span> /&gt;</div><div class="line">  <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div></pre></td></tr></table></figure>
<p>下面讲解一下ListView下方的布局，我称其为“脚布局”，这个脚布局就更简单了，直接看XML代码好了：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">  <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">  <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">  <span class="attr">android:orientation</span>=<span class="string">"vertical"</span> &gt;</div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">LinearLayout</span></span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">    <span class="attr">android:layout_gravity</span>=<span class="string">"center_horizontal"</span></div><div class="line">    <span class="attr">android:layout_margin</span>=<span class="string">"10dip"</span></div><div class="line">    <span class="attr">android:gravity</span>=<span class="string">"center_vertical"</span></div><div class="line">    <span class="attr">android:orientation</span>=<span class="string">"horizontal"</span> &gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">ProgressBar</span></span></div><div class="line">      <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">      <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">      <span class="attr">android:layout_gravity</span>=<span class="string">"center"</span></div><div class="line">      <span class="attr">android:indeterminateDrawable</span>=<span class="string">"@drawable/common_progressbar"</span> /&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">      <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">      <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">      <span class="attr">android:layout_marginLeft</span>=<span class="string">"10dip"</span></div><div class="line">      <span class="attr">android:text</span>=<span class="string">"加载更多..."</span></div><div class="line">      <span class="attr">android:textColor</span>=<span class="string">"#FF0000"</span></div><div class="line">      <span class="attr">android:textSize</span>=<span class="string">"18sp"</span> /&gt;</div><div class="line">  <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>此外，两个布局都用到一个ProgressBar的背景，其XML如下：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">rotate</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">  <span class="attr">android:fromDegrees</span>=<span class="string">"0"</span></div><div class="line">  <span class="attr">android:pivotX</span>=<span class="string">"50%"</span></div><div class="line">  <span class="attr">android:pivotY</span>=<span class="string">"50%"</span></div><div class="line">  <span class="attr">android:toDegrees</span>=<span class="string">"360"</span> &gt;</div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">shape</span></span></div><div class="line">    <span class="attr">android:innerRadiusRatio</span>=<span class="string">"3"</span></div><div class="line">    <span class="attr">android:shape</span>=<span class="string">"ring"</span></div><div class="line">    <span class="attr">android:useLevel</span>=<span class="string">"false"</span> &gt;</div><div class="line">    <span class="tag">&lt;<span class="name">gradient</span></span></div><div class="line">      <span class="attr">android:centerColor</span>=<span class="string">"#FF6666"</span></div><div class="line">      <span class="attr">android:endColor</span>=<span class="string">"#FF0000"</span></div><div class="line">      <span class="attr">android:startColor</span>=<span class="string">"#FFFFFF"</span></div><div class="line">      <span class="attr">android:type</span>=<span class="string">"sweep"</span> /&gt;</div><div class="line">  <span class="tag">&lt;/<span class="name">shape</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">rotate</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>ListView的头布局和脚布局已经做好了，那么接下来该怎么集成到ListView上去呢？首先我们来看看ListView的部分源代码，很轻松能找到这两个方法： addHeaderView(View v) ； addFooterView(View v) ，通过字面的意思就可以理解，这两个方法分别是向ListView顶部添加一个View和向ListView的底部添加View的，有了这两个方法，那么上面的头布局和脚布局就很容易被添加到ListView上了，并且成为ListView的一体。</p>
<p>其实，再看会发现，简单的使用这两个方法分别往ListView上添加头布局和脚布局是不合理，添加上去的头布局和脚布局会被显示出来，并没有被隐藏掉，为了实现下拉和上拉时能够将头布局和脚布局都“拉出来”并且还可以松开时，再次隐藏起来，我们可以使用View下的一个方法 setPadding(int left, int top, int right, int bottom) ，这个方法设置View的Padding属性，这里，我们不必管left、right、bottom，只要设置top的值为头布局或者脚布局的高度即可“隐藏”这两个布局，而且还可以在手指滑动屏幕的时候，动态的设置这个top的值，来实现头布局和脚布局的显示-隐藏-显示。</p>
<p>还有一个非常重要的话题，就是这个top的值还设定为多少合适？上面说了，我们来头布局来说明一下，隐藏这个头布局需要将top值设置成top=- 头布局高度，那么这个头布局的高度怎么求得呢？很显然，使用 getHeight() 是得不到头布局高度的，因为 getHeight() 方法是先控件在屏幕上展示完毕后得到的高度，显然在这里，这个ListView还在构建中，并没有展示到屏幕上。所以注意了，我们先调用View下的 measure(int widthMeasureSpec, int heightMeasureSpec) 方法，将widthMeasureSpec和heightMeasureSpec分别设置为0，这里的widthMeasureSpec和heightMeasureSpec并不是一个准备的值，而且指定一个规格或者标准让系统帮我们测量View的宽高，当我们指定widthMeasureSpec和heightMeasureSpec分别为0的时候，系统将不采用这个规格去测量，而是根据实际情况去测量。之后，我们可以调用View下的 getMeasuredHeight() 方法获取真实的头布局的高度，然后设置top = - 头布局实际高度，实现隐藏头布局。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RefreshListView</span> <span class="keyword">extends</span> <span class="title">ListView</span> <span class="keyword">implements</span> <span class="title">OnScrollListener</span> </span>&#123;</div><div class="line"></div><div class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TAG = <span class="string">"RefreshListView"</span>;</div><div class="line">  <span class="keyword">private</span> <span class="keyword">int</span> firstVisibleItemPosition; <span class="comment">// 屏幕显示在第一个的item的索引</span></div><div class="line">  <span class="keyword">private</span> <span class="keyword">int</span> downY; <span class="comment">// 按下时y轴的偏移量</span></div><div class="line">  <span class="keyword">private</span> <span class="keyword">int</span> headerViewHeight; <span class="comment">// 头布局的高度</span></div><div class="line">  <span class="keyword">private</span> View headerView; <span class="comment">// 头布局的对象</span></div><div class="line"></div><div class="line">  <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> DOWN_PULL_REFRESH = <span class="number">0</span>; <span class="comment">// 下拉刷新状态</span></div><div class="line">  <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> RELEASE_REFRESH = <span class="number">1</span>; <span class="comment">// 松开刷新</span></div><div class="line">  <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> REFRESHING = <span class="number">2</span>; <span class="comment">// 正在刷新中</span></div><div class="line">  <span class="keyword">private</span> <span class="keyword">int</span> currentState = DOWN_PULL_REFRESH; <span class="comment">// 头布局的状态: 默认为下拉刷新状态</span></div><div class="line"></div><div class="line">  <span class="keyword">private</span> Animation upAnimation; <span class="comment">// 向上旋转的动画</span></div><div class="line">  <span class="keyword">private</span> Animation downAnimation; <span class="comment">// 向下旋转的动画</span></div><div class="line"></div><div class="line">  <span class="keyword">private</span> ImageView ivArrow; <span class="comment">// 头布局的剪头</span></div><div class="line">  <span class="keyword">private</span> ProgressBar mProgressBar; <span class="comment">// 头布局的进度条</span></div><div class="line">  <span class="keyword">private</span> TextView tvState; <span class="comment">// 头布局的状态</span></div><div class="line">  <span class="keyword">private</span> TextView tvLastUpdateTime; <span class="comment">// 头布局的最后更新时间</span></div><div class="line"></div><div class="line">  <span class="keyword">private</span> OnRefreshListener mOnRefershListener;</div><div class="line">  <span class="keyword">private</span> <span class="keyword">boolean</span> isScrollToBottom; <span class="comment">// 是否滑动到底部</span></div><div class="line">  <span class="keyword">private</span> View footerView; <span class="comment">// 脚布局的对象</span></div><div class="line">  <span class="keyword">private</span> <span class="keyword">int</span> footerViewHeight; <span class="comment">// 脚布局的高度</span></div><div class="line">  <span class="keyword">private</span> <span class="keyword">boolean</span> isLoadingMore = <span class="keyword">false</span>; <span class="comment">// 是否正在加载更多中</span></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="title">RefreshListView</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">    <span class="keyword">super</span>(context, attrs);</div><div class="line">    initHeaderView();</div><div class="line">    initFooterView();</div><div class="line">    <span class="keyword">this</span>.setOnScrollListener(<span class="keyword">this</span>);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">/**</span></div><div class="line">   * 初始化脚布局</div><div class="line">   */</div><div class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initFooterView</span><span class="params">()</span> </span>&#123;</div><div class="line">    footerView = View.inflate(getContext(), R.layout.listview_footer, <span class="keyword">null</span>);</div><div class="line">    footerView.measure(<span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    footerViewHeight = footerView.getMeasuredHeight();</div><div class="line">    footerView.setPadding(<span class="number">0</span>, -footerViewHeight, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    <span class="keyword">this</span>.addFooterView(footerView);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">/**</span></div><div class="line">   * 初始化头布局</div><div class="line">   */</div><div class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initHeaderView</span><span class="params">()</span> </span>&#123;</div><div class="line">    headerView = View.inflate(getContext(), R.layout.listview_header, <span class="keyword">null</span>);</div><div class="line">    ivArrow = (ImageView) headerView</div><div class="line">        .findViewById(R.id.iv_listview_header_arrow);</div><div class="line">    mProgressBar = (ProgressBar) headerView</div><div class="line">        .findViewById(R.id.pb_listview_header);</div><div class="line">    tvState = (TextView) headerView</div><div class="line">        .findViewById(R.id.tv_listview_header_state);</div><div class="line">    tvLastUpdateTime = (TextView) headerView</div><div class="line">        .findViewById(R.id.tv_listview_header_last_update_time);</div><div class="line"></div><div class="line">    <span class="comment">// 设置最后刷新时间</span></div><div class="line">    tvLastUpdateTime.setText(<span class="string">"最后刷新时间: "</span> + getLastUpdateTime());</div><div class="line"></div><div class="line">    headerView.measure(<span class="number">0</span>, <span class="number">0</span>); <span class="comment">// 系统会帮我们测量出headerView的高度</span></div><div class="line">    headerViewHeight = headerView.getMeasuredHeight();</div><div class="line">    headerView.setPadding(<span class="number">0</span>, -headerViewHeight, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    <span class="keyword">this</span>.addHeaderView(headerView); <span class="comment">// 向ListView的顶部添加一个view对象</span></div><div class="line">    initAnimation();</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">/**</span></div><div class="line">   * 获得系统的最新时间</div><div class="line">   * </div><div class="line">   * <span class="doctag">@return</span></div><div class="line">   */</div><div class="line">  <span class="function"><span class="keyword">private</span> String <span class="title">getLastUpdateTime</span><span class="params">()</span> </span>&#123;</div><div class="line">    SimpleDateFormat sdf = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd HH:mm:ss"</span>);</div><div class="line">    <span class="keyword">return</span> sdf.format(System.currentTimeMillis());</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">/**</span></div><div class="line">   * 初始化动画</div><div class="line">   */</div><div class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initAnimation</span><span class="params">()</span> </span>&#123;</div><div class="line">    upAnimation = <span class="keyword">new</span> RotateAnimation(<span class="number">0f</span>, -<span class="number">180f</span>,</div><div class="line">        Animation.RELATIVE_TO_SELF, <span class="number">0.5f</span>, Animation.RELATIVE_TO_SELF,</div><div class="line">        <span class="number">0.5f</span>);</div><div class="line">    upAnimation.setDuration(<span class="number">500</span>);</div><div class="line">    upAnimation.setFillAfter(<span class="keyword">true</span>); <span class="comment">// 动画结束后, 停留在结束的位置上</span></div><div class="line"></div><div class="line">    downAnimation = <span class="keyword">new</span> RotateAnimation(-<span class="number">180f</span>, -<span class="number">360f</span>,</div><div class="line">        Animation.RELATIVE_TO_SELF, <span class="number">0.5f</span>, Animation.RELATIVE_TO_SELF,</div><div class="line">        <span class="number">0.5f</span>);</div><div class="line">    downAnimation.setDuration(<span class="number">500</span>);</div><div class="line">    downAnimation.setFillAfter(<span class="keyword">true</span>); <span class="comment">// 动画结束后, 停留在结束的位置上</span></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="meta">@Override</span></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onTouchEvent</span><span class="params">(MotionEvent ev)</span> </span>&#123;</div><div class="line">    <span class="keyword">switch</span> (ev.getAction()) &#123;</div><div class="line">      <span class="keyword">case</span> MotionEvent.ACTION_DOWN :</div><div class="line">        downY = (<span class="keyword">int</span>) ev.getY();</div><div class="line">        <span class="keyword">break</span>;</div><div class="line">      <span class="keyword">case</span> MotionEvent.ACTION_MOVE :</div><div class="line">        <span class="keyword">int</span> moveY = (<span class="keyword">int</span>) ev.getY();</div><div class="line">        <span class="comment">// 移动中的y - 按下的y = 间距.</span></div><div class="line">        <span class="keyword">int</span> diff = (moveY - downY) / <span class="number">2</span>;</div><div class="line">        <span class="comment">// -头布局的高度 + 间距 = paddingTop</span></div><div class="line">        <span class="keyword">int</span> paddingTop = -headerViewHeight + diff;</div><div class="line">        <span class="comment">// 如果: -头布局的高度 &gt; paddingTop的值 执行super.onTouchEvent(ev);</span></div><div class="line">        <span class="keyword">if</span> (firstVisibleItemPosition == <span class="number">0</span></div><div class="line">            &amp;&amp; -headerViewHeight &lt; paddingTop) &#123;</div><div class="line">          <span class="keyword">if</span> (paddingTop &gt; <span class="number">0</span> &amp;&amp; currentState == DOWN_PULL_REFRESH) &#123; <span class="comment">// 完全显示了.</span></div><div class="line">            Log.i(TAG, <span class="string">"松开刷新"</span>);</div><div class="line">            currentState = RELEASE_REFRESH;</div><div class="line">            refreshHeaderView();</div><div class="line">          &#125; <span class="keyword">else</span> <span class="keyword">if</span> (paddingTop &lt; <span class="number">0</span></div><div class="line">              &amp;&amp; currentState == RELEASE_REFRESH) &#123; <span class="comment">// 没有显示完全</span></div><div class="line">            Log.i(TAG, <span class="string">"下拉刷新"</span>);</div><div class="line">            currentState = DOWN_PULL_REFRESH;</div><div class="line">            refreshHeaderView();</div><div class="line">          &#125;</div><div class="line">          <span class="comment">// 下拉头布局</span></div><div class="line">          headerView.setPadding(<span class="number">0</span>, paddingTop, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">          <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">break</span>;</div><div class="line">      <span class="keyword">case</span> MotionEvent.ACTION_UP :</div><div class="line">        <span class="comment">// 判断当前的状态是松开刷新还是下拉刷新</span></div><div class="line">        <span class="keyword">if</span> (currentState == RELEASE_REFRESH) &#123;</div><div class="line">          Log.i(TAG, <span class="string">"刷新数据."</span>);</div><div class="line">          <span class="comment">// 把头布局设置为完全显示状态</span></div><div class="line">          headerView.setPadding(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">          <span class="comment">// 进入到正在刷新中状态</span></div><div class="line">          currentState = REFRESHING;</div><div class="line">          refreshHeaderView();</div><div class="line"></div><div class="line">          <span class="keyword">if</span> (mOnRefershListener != <span class="keyword">null</span>) &#123;</div><div class="line">            mOnRefershListener.onDownPullRefresh(); <span class="comment">// 调用使用者的监听方法</span></div><div class="line">          &#125;</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (currentState == DOWN_PULL_REFRESH) &#123;</div><div class="line">          <span class="comment">// 隐藏头布局</span></div><div class="line">          headerView.setPadding(<span class="number">0</span>, -headerViewHeight, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">break</span>;</div><div class="line">      <span class="keyword">default</span> :</div><div class="line">        <span class="keyword">break</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">super</span>.onTouchEvent(ev);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">/**</span></div><div class="line">   * 根据currentState刷新头布局的状态</div><div class="line">   */</div><div class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">refreshHeaderView</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">switch</span> (currentState) &#123;</div><div class="line">      <span class="keyword">case</span> DOWN_PULL_REFRESH : <span class="comment">// 下拉刷新状态</span></div><div class="line">        tvState.setText(<span class="string">"下拉刷新"</span>);</div><div class="line">        ivArrow.startAnimation(downAnimation); <span class="comment">// 执行向下旋转</span></div><div class="line">        <span class="keyword">break</span>;</div><div class="line">      <span class="keyword">case</span> RELEASE_REFRESH : <span class="comment">// 松开刷新状态</span></div><div class="line">        tvState.setText(<span class="string">"松开刷新"</span>);</div><div class="line">        ivArrow.startAnimation(upAnimation); <span class="comment">// 执行向上旋转</span></div><div class="line">        <span class="keyword">break</span>;</div><div class="line">      <span class="keyword">case</span> REFRESHING : <span class="comment">// 正在刷新中状态</span></div><div class="line">        ivArrow.clearAnimation();</div><div class="line">        ivArrow.setVisibility(View.GONE);</div><div class="line">        mProgressBar.setVisibility(View.VISIBLE);</div><div class="line">        tvState.setText(<span class="string">"正在刷新中..."</span>);</div><div class="line">        <span class="keyword">break</span>;</div><div class="line">      <span class="keyword">default</span> :</div><div class="line">        <span class="keyword">break</span>;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">/**</span></div><div class="line">   * 当滚动状态改变时回调</div><div class="line">   */</div><div class="line">  <span class="meta">@Override</span></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onScrollStateChanged</span><span class="params">(AbsListView view, <span class="keyword">int</span> scrollState)</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (scrollState == SCROLL_STATE_IDLE</div><div class="line">        || scrollState == SCROLL_STATE_FLING) &#123;</div><div class="line">      <span class="comment">// 判断当前是否已经到了底部</span></div><div class="line">      <span class="keyword">if</span> (isScrollToBottom &amp;&amp; !isLoadingMore) &#123;</div><div class="line">        isLoadingMore = <span class="keyword">true</span>;</div><div class="line">        <span class="comment">// 当前到底部</span></div><div class="line">        Log.i(TAG, <span class="string">"加载更多数据"</span>);</div><div class="line">        footerView.setPadding(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">        <span class="keyword">this</span>.setSelection(<span class="keyword">this</span>.getCount());</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (mOnRefershListener != <span class="keyword">null</span>) &#123;</div><div class="line">          mOnRefershListener.onLoadingMore();</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">/**</span></div><div class="line">   * 当滚动时调用</div><div class="line">   * </div><div class="line">   * <span class="doctag">@param</span> firstVisibleItem</div><div class="line">   *            当前屏幕显示在顶部的item的position</div><div class="line">   * <span class="doctag">@param</span> visibleItemCount</div><div class="line">   *            当前屏幕显示了多少个条目的总数</div><div class="line">   * <span class="doctag">@param</span> totalItemCount</div><div class="line">   *            ListView的总条目的总数</div><div class="line">   */</div><div class="line">  <span class="meta">@Override</span></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onScroll</span><span class="params">(AbsListView view, <span class="keyword">int</span> firstVisibleItem,</span></span></div><div class="line">      <span class="keyword">int</span> visibleItemCount, <span class="keyword">int</span> totalItemCount) &#123;</div><div class="line">    firstVisibleItemPosition = firstVisibleItem;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (getLastVisiblePosition() == (totalItemCount - <span class="number">1</span>)) &#123;</div><div class="line">      isScrollToBottom = <span class="keyword">true</span>;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">      isScrollToBottom = <span class="keyword">false</span>;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">/**</span></div><div class="line">   * 设置刷新监听事件</div><div class="line">   * </div><div class="line">   * <span class="doctag">@param</span> listener</div><div class="line">   */</div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setOnRefreshListener</span><span class="params">(OnRefreshListener listener)</span> </span>&#123;</div><div class="line">    mOnRefershListener = listener;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">/**</span></div><div class="line">   * 隐藏头布局</div><div class="line">   */</div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hideHeaderView</span><span class="params">()</span> </span>&#123;</div><div class="line">    headerView.setPadding(<span class="number">0</span>, -headerViewHeight, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    ivArrow.setVisibility(View.VISIBLE);</div><div class="line">    mProgressBar.setVisibility(View.GONE);</div><div class="line">    tvState.setText(<span class="string">"下拉刷新"</span>);</div><div class="line">    tvLastUpdateTime.setText(<span class="string">"最后刷新时间: "</span> + getLastUpdateTime());</div><div class="line">    currentState = DOWN_PULL_REFRESH;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">/**</span></div><div class="line">   * 隐藏脚布局</div><div class="line">   */</div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hideFooterView</span><span class="params">()</span> </span>&#123;</div><div class="line">    footerView.setPadding(<span class="number">0</span>, -footerViewHeight, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    isLoadingMore = <span class="keyword">false</span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>还有2个重要的问题就是：<br>问题1我们如何知道这个头布局的状态什么时候改变？显示，当我们将头布局完全拉下的时候，我们就应该改变头布局上面的一些描述的信息。那么，怎么判断这个头布局什么时候刷新状态呢？提供如下的算法供参考：</p>
<p>1，计算手指在屏幕中滑动的间距。</p>
<p>移动中的Y轴坐标 - 按下的Y轴坐标 = 间距</p>
<p>2，计算头布局距离顶部的距离</p>
<p>-头布局的高度 + 间距 = paddingTop</p>
<p>3，如果: -头布局的高度 &gt; paddingTop的值 执行super.onTouchEvent(ev);手指继续滑动，头布局状态为“松开刷新”；</p>
<p>如果：-头布局的高度 &lt; paddingTop的值，返回true，头布局状态为“下拉刷新”</p>
<p>4，手指抬起的时候，刷新</p>
<p>问题2是如何知道，脚布局滑动到了ListView的底部，即最后一个可见的item。我们可以借助 android.widget.AbsListView.OnScrollListener 接口下的两个方法 onScrollStateChanged(AbsListView view, int scrollState) 和 onScroll(AbsListView view, int firstVisibleItem,int visibleItemCount, int totalItemCount) ，现在ListView滚动时被调用的onScroll()方法中，判断当前的Item是不是最后一个Item，如果是的话就标记一个boolean的状态值，然后在监听ListView滑动状态onScrollStateChanged方法中，判断状态 scrollState == SCROLL_STATE_IDLE|| scrollState == SCROLL_STATE_FLING ；若是，就说明ListView滑动到了底部了，这是需要上拉加载更多的数据。详细请参考上面贴出的代码，带上注释去看，也很好理解。</p>
<h2 id="4-为ListView添加回调函数"><a href="#4-为ListView添加回调函数" class="headerlink" title="4.为ListView添加回调函数"></a>4.为ListView添加回调函数</h2><p>上面的效果是实现了，主要就讲解了UI的实现，接下来，我们了解一下逻辑方法的东西。显然，这个ListView还不能动态的“下来刷新”和“上拉加载”，为什么呢？很简单啊，暂时还没有向外界暴露出一个设置数据的方法。为了实现这个能够动态实施数据更新的功能，我们需要写一个回调提供给其它的类使用，首先看一下这个回调的接口：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">OnRefreshListener</span> </span>&#123;</div><div class="line"></div><div class="line">  <span class="comment">/**</span></div><div class="line">   * 下拉刷新</div><div class="line">   */</div><div class="line">  <span class="function"><span class="keyword">void</span> <span class="title">onDownPullRefresh</span><span class="params">()</span></span>;</div><div class="line"></div><div class="line">  <span class="comment">/**</span></div><div class="line">   * 上拉加载更多</div><div class="line">   */</div><div class="line">  <span class="function"><span class="keyword">void</span> <span class="title">onLoadingMore</span><span class="params">()</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这个回调的接口定义了两个方法，分别是“下拉刷新”和“上拉加载”，然后还必须在ListView中暴露一个接口与外面的类链接，最好的方法就暴露公共方法，例如：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setOnRefreshListener</span><span class="params">(OnRefreshListener listener)</span> </span>&#123;</div><div class="line">    mOnRefershListener = listener;</div><div class="line">  &#125;</div></pre></td></tr></table></figure></p>
<p>这样这个接口的对象就在ListView中建立了，我们只要拿着这个对象，就可以在相应的位置上调用该对象的“下拉刷新”“上拉加载”的方法了，不必在乎方法体是什么，因为具体实现的方式，具体的数据结构都是其他类中定义的，我们只要提供实现的方式即可。<br>5.使用这个自定义的ListView</p>
<p>使用这个自定义的ListView特别简单的，这里不多说了，看代码：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> <span class="keyword">implements</span> <span class="title">OnRefreshListener</span> </span>&#123;</div><div class="line"></div><div class="line">  <span class="keyword">private</span> List&lt;String&gt; textList;</div><div class="line">  <span class="keyword">private</span> MyAdapter adapter;</div><div class="line">  <span class="keyword">private</span> RefreshListView rListView;</div><div class="line"></div><div class="line">  <span class="meta">@Override</span></div><div class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">    <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">    setContentView(R.layout.activity_main);</div><div class="line"></div><div class="line">    rListView = (RefreshListView) findViewById(R.id.refreshlistview);</div><div class="line">    textList = <span class="keyword">new</span> ArrayList&lt;String&gt;();</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">25</span>; i++) &#123;</div><div class="line">      textList.add(<span class="string">"这是一条ListView的数据"</span> + i);</div><div class="line">    &#125;</div><div class="line">    adapter = <span class="keyword">new</span> MyAdapter();</div><div class="line">    rListView.setAdapter(adapter);</div><div class="line">    rListView.setOnRefreshListener(<span class="keyword">this</span>);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">MyAdapter</span> <span class="keyword">extends</span> <span class="title">BaseAdapter</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCount</span><span class="params">()</span> </span>&#123;</div><div class="line">      <span class="comment">// TODO Auto-generated method stub</span></div><div class="line">      <span class="keyword">return</span> textList.size();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">getItem</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">      <span class="comment">// TODO Auto-generated method stub</span></div><div class="line">      <span class="keyword">return</span> textList.get(position);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getItemId</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">      <span class="comment">// TODO Auto-generated method stub</span></div><div class="line">      <span class="keyword">return</span> position;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> View <span class="title">getView</span><span class="params">(<span class="keyword">int</span> position, View convertView, ViewGroup parent)</span> </span>&#123;</div><div class="line">      <span class="comment">// TODO Auto-generated method stub</span></div><div class="line">      TextView textView = <span class="keyword">new</span> TextView(MainActivity.<span class="keyword">this</span>);</div><div class="line">      textView.setText(textList.get(position));</div><div class="line">      textView.setTextColor(Color.WHITE);</div><div class="line">      textView.setTextSize(<span class="number">18.0f</span>);</div><div class="line">      <span class="keyword">return</span> textView;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="meta">@Override</span></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onDownPullRefresh</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">new</span> AsyncTask&lt;Void, Void, Void&gt;() &#123;</div><div class="line"></div><div class="line">      <span class="meta">@Override</span></div><div class="line">      <span class="function"><span class="keyword">protected</span> Void <span class="title">doInBackground</span><span class="params">(Void... params)</span> </span>&#123;</div><div class="line">        SystemClock.sleep(<span class="number">2000</span>);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">2</span>; i++) &#123;</div><div class="line">          textList.add(<span class="number">0</span>, <span class="string">"这是下拉刷新出来的数据"</span> + i);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">      &#125;</div><div class="line"></div><div class="line">      <span class="meta">@Override</span></div><div class="line">      <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onPostExecute</span><span class="params">(Void result)</span> </span>&#123;</div><div class="line">        adapter.notifyDataSetChanged();</div><div class="line">        rListView.hideHeaderView();</div><div class="line">      &#125;</div><div class="line">    &#125;.execute(<span class="keyword">new</span> Void[]&#123;&#125;);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="meta">@Override</span></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onLoadingMore</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">new</span> AsyncTask&lt;Void, Void, Void&gt;() &#123;</div><div class="line"></div><div class="line">      <span class="meta">@Override</span></div><div class="line">      <span class="function"><span class="keyword">protected</span> Void <span class="title">doInBackground</span><span class="params">(Void... params)</span> </span>&#123;</div><div class="line">        SystemClock.sleep(<span class="number">5000</span>);</div><div class="line"></div><div class="line">        textList.add(<span class="string">"这是加载更多出来的数据1"</span>);</div><div class="line">        textList.add(<span class="string">"这是加载更多出来的数据2"</span>);</div><div class="line">        textList.add(<span class="string">"这是加载更多出来的数据3"</span>);</div><div class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">      &#125;</div><div class="line"></div><div class="line">      <span class="meta">@Override</span></div><div class="line">      <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onPostExecute</span><span class="params">(Void result)</span> </span>&#123;</div><div class="line">        adapter.notifyDataSetChanged();</div><div class="line"></div><div class="line">        <span class="comment">// 控制脚布局隐藏</span></div><div class="line">        rListView.hideFooterView();</div><div class="line">      &#125;</div><div class="line">    &#125;.execute(<span class="keyword">new</span> Void[]&#123;&#125;);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>我们模拟的是联网更新数据，所以必须要开启新的线程去获取数据，联网获取数据的方式有很多种，我这里使用的Android为我们提供好的AsyncTask轻量型的框架，关于这个框架，在下面有一些简单的介绍。<br>6.AsyncTask简单介绍</p>
<p>先来看看AsyncTask的定义：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AsyncTask</span>&lt;<span class="title">Params</span>, <span class="title">Progress</span>, <span class="title">Result</span>&gt; </span>&#123;</div></pre></td></tr></table></figure></p>
<p>三种泛型类型分别代表</p>
<ul>
<li>Params ：“启动任务执行的输入参数”</li>
<li>Progress：“后台任务执行的进度”</li>
<li>Result：“后台计算结果的类型”。</li>
</ul>
<p>在特定场合下，并不是所有类型都被使用，如果没有被使用，可以用java.lang.Void类型代替。</p>
<p>一个异步任务的执行一般包括以下几个步骤：</p>
<ol>
<li><p>execute(Params… params) ，执行一个异步任务，需要我们在代码中调用此方法，触发异步任务的执行。</p>
</li>
<li><p>onPreExecute() ，在execute(Params… params)被调用后立即执行，一般用来在执行后台任务前对UI做一些标记。</p>
</li>
<li><p>doInBackground(Params… params) ，在onPreExecute()完成后立即执行，用于执行较为费时的操作，此方法将接收输入参数和返回计算结果。在执行过程中可以调用publishProgress(Progress… values)来更新进度信息。</p>
</li>
<li><p>onProgressUpdate(Progress… values) ，在调用publishProgress(Progress… values)时，此方法被执行，直接将进度信息更新到UI组件上。</p>
</li>
<li><p>onPostExecute(Result result) ，当后台操作结束时，此方法将会被调用，计算结果将做为参数传递到此方法中，直接将结果显示到UI组件上。</p>
</li>
</ol>
<p>下面是一个图解：<br><img src="http://7xo1gw.com1.z0.glb.clouddn.com/coding_android_pulltorefresh_2_4.jpg" alt=""></p>
<p>通过这个草图，我们可以分析出AsyncTask三个泛型参数的用处:<br>1，第一个泛型参数Params就是execute()方法中的参数，这二者要保持一致，因为这个参数Params会直接传递给doInBackground(Params…params)方法中，作为这个方法的参数存在。<br>2，第二个参数Progress代表任务执行的进度，通常设定为Void类型，不使用它。<br>3，第三个参数Result代表的是doInBackground()方法的返回值类型，这个返回值类型决定该方法在子线程中获取的是什么类型的数据，并且获取到的数据将被传递给onPostExecute()方法中作为参数，就是程序执行的结果，在该方法中拿到这个结果在UI上实现数据更新。</p>
<p>以上是对AsyncTask的简单介绍，没有深入，想要深入了解AsyncTask，请移步到以下这两篇博客中。</p>
<ul>
<li><a href="http://blog.csdn.net/liuhe688/article/details/6532519" target="_blank" rel="external">详解Android中AsyncTask的使用</a></li>
<li><a href="http://blog.csdn.net/guolin_blog/article/details/11711405" target="_blank" rel="external">Android AsyncTask完全解析，带你从源码的角度彻底理解</a></li>
</ul>
<h2 id="系列文章"><a href="#系列文章" class="headerlink" title="系列文章"></a>系列文章</h2><ul>
<li><a href="http://xiongdeyi.github.io/2015/11/04/coding_android_pulltorefresh_listview/" target="_blank" rel="external">PullToRefresh使用详解（一）–构建下拉刷新的listView</a></li>
</ul>
<h3 id="参考文档："><a href="#参考文档：" class="headerlink" title="参考文档："></a>参考文档：</h3><p><a href="http://blog.csdn.net/allen315410/article/details/39965327" target="_blank" rel="external">原文链接</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/11/09/android_pulltorefresh_listview2/" data-id="cj4zxopoe003dq4nhc2hx3hiv" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/pulltorefreshlistview/">pulltorefreshlistview</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-music_saxophone_playlist" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/11/06/music_saxophone_playlist/" class="article-date">
  <time datetime="2015-11-06T10:59:29.000Z" itemprop="datePublished">2015-11-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/music/">music</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/06/music_saxophone_playlist/">我喜欢的萨克斯歌曲</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="萨克斯曲目"><a href="#萨克斯曲目" class="headerlink" title="萨克斯曲目"></a>萨克斯曲目</h2><p>我喜欢的萨克斯歌曲列表：</p>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="100%" height="400" src="http://music.163.com/outchain/player?type=0&id=123953101&auto=0&height=430"></iframe>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/11/06/music_saxophone_playlist/" data-id="cj4zxoppa0059q4nhcl5tggsk" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/music/">music</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/saxophone/">saxophone</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-android_broadcast" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/11/06/android_broadcast/" class="article-date">
  <time datetime="2015-11-06T09:02:29.000Z" itemprop="datePublished">2015-11-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/android/">android</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/06/android_broadcast/">android Broadcast学习 (一)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>在Android中，Broadcast是一种广泛运用的在应用程序之间传输信息的机制。而BroadcastReceiver是对发送出来的Broadcast进行过滤接受并响应的一类组件。下面将详细的阐述如何发送Broadcast和使用BroadcastReceiver过滤接收的过程：首先在需要发送信息的地方，把要发送的信息和用于过滤的信息(如Action、Category)装入一个Intent对象，然后通过调用 Context.sendBroadcast()、sendOrderBroadcast()或sendStickyBroadcast()方法，把 Intent对象以广播方式发送出去。当Intent发送以后，所有已经注册的BroadcastReceiver会检查注册时的IntentFilter是否与发送的Intent相匹配，若匹配则就会调用BroadcastReceiver的onReceive()方法。所以当我们定义一个BroadcastReceiver的时候，都需要实现onReceive()方法。</p>
<p>注册BroadcastReceiver有两种方式:</p>
<ul>
<li>静态注册</li>
<li>动态注册</li>
</ul>
<p>静态的在AndroidManifest.xml中用<receiver>标签声明注册，并在标签内用<intent- filter="">标签设置过滤器。动态的在代码中先定义并设置好一个 IntentFilter 对象，然后在需要注册的地方调Context.registerReceiver()方法，如果取消时就调用 Context.unregisterReceiver()方法。如果用动态方式注册的BroadcastReceiver的Context对象被销毁时，BroadcastReceiver也就自动取消注册了。（特别注意，有些可能需要后台监听的，如短信消息）</intent-></receiver></p>
<p>另外，若在使用sendBroadcast()的方法是指定了接收权限，则只有在AndroidManifest.xml中用<uses- permission="">标签声明了拥有此权限的BroascastReceiver才会有可能接收到发送来的Broadcast。同样，若在注册BroadcastReceiver时指定了可接收的Broadcast的权限，则只有在包内的AndroidManifest.xml中 用<uses-permission>标签声明了，拥有此权限的Context对象所发送的Broadcast才能被这个BroadcastReceiver所接收。</uses-permission></uses-></p>
<p>其实所谓的静态注册，动态注册，是指接收广播的时候，是静态注册接收还是动态注册接收，发送的时候不分静态，动态。以发送intent为例，一共分4种情况，以每次注册两个Broadcast为例：</p>
<h2 id="情况一，注册2个静态Broadcast"><a href="#情况一，注册2个静态Broadcast" class="headerlink" title="情况一，注册2个静态Broadcast"></a>情况一，注册2个静态Broadcast</h2><p>如果是静态注册的，接收的一定是某一个类继承BroadcastReceiver。</p>
<p>2个java文件如下：</p>
<p>BroadcastActivity.java广播发送的Activity中，定义两个按钮，并分别绑定监听事件，封装数据到intent中，发送广播。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line">    Intent intent =<span class="keyword">new</span> Intent(INTENAL_ACTION_1);</div><div class="line">    sendBroadcast(intent);</div><div class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (v.getId() == (R.id.button02)) &#123;</div><div class="line">    Intent intent =<span class="keyword">new</span> Intent(INTENAL_ACTION_2);</div><div class="line">    sendBroadcast(intent);</div></pre></td></tr></table></figure>
<p>BroadcastRecTest.java广播接受的Activity中，覆写onRecive方法,接受广播，取得intent中的数据。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">privatestaticfinal String INTENAL_ACTION_1=<span class="string">"su1.bluetooth.true"</span>;</div><div class="line">privatestaticfinal String INTENAL_ACTION_2=<span class="string">"su1.bluetooth.false"</span>;</div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function">publicvoid <span class="title">onReceive</span><span class="params">(Context context, Intent intent)</span> </span>&#123;</div><div class="line">    String action = intent.getAction();</div><div class="line">    <span class="keyword">if</span>(action.equals(INTENAL_ACTION_1))&#123;</div><div class="line">        Log.d(TAG,<span class="string">"surx&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;su1.bluetooth.true"</span>);</div><div class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(action.equals(INTENAL_ACTION_2))&#123;</div><div class="line">        Log.d(TAG,<span class="string">"surx&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;su1.bluetooth.false"</span>);</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>AndroidManifest.xml中的相关配置如下<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line"><span class="tag">&lt;<span class="name">application</span> <span class="attr">android:icon</span>=<span class="string">"@drawable/icon"</span> <span class="attr">android:label</span>=<span class="string">"@string/app_name"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">".BroadcastActivity"</span></span></div><div class="line">        <span class="attr">android:label</span>=<span class="string">"@string/app_name"</span>&gt;</div><div class="line">        <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"android.intent.action.MAIN"</span>/&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">"android.intent.category.LAUNCHER"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">activity</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">receiver</span> <span class="attr">android:name</span>=<span class="string">"BroadcastRecTest"</span>&gt;</span>  <span class="comment">&lt;!--静态注册广播，声明接受的receiver和action --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"su1.bluetooth.true"</span>/&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"su1.bluetooth.false"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">receiver</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">application</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>运行结果：</p>
<p>注意，静态注册的broadcast运行有点慢：<br><img src="http://pic002.cnblogs.com/images/2010/122963/2010121514110366.png" alt=""></p>
<h2 id="情况2，一个静态，一个动态注册Broadcast"><a href="#情况2，一个静态，一个动态注册Broadcast" class="headerlink" title="情况2，一个静态，一个动态注册Broadcast"></a>情况2，一个静态，一个动态注册Broadcast</h2><p>BroadcastActivity.java广播发送的Activity中，定义两个按钮，并分别绑定监听事件，封装数据到intent中，发送广播。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">//1个动态，1个静态注册</span></div><div class="line">...</div><div class="line"><span class="keyword">if</span>(v.getId()==(R.id.button01))&#123;</div><div class="line">    Intent intent=<span class="keyword">new</span> Intent(INTENAL_ACTION_1);</div><div class="line">    sendBroadcast(intent);</div><div class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(v.getId()==(R.id.button02))&#123;</div><div class="line">    Intent intent=<span class="keyword">new</span> Intent(INTENAL_ACTION_2);</div><div class="line">    sendBroadcast(intent);</div><div class="line">&#125;</div><div class="line">...</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// 接收动态注册广播的BroadcastReceiver</span></div><div class="line"><span class="keyword">private</span> BroadcastReceiver bcrIntenal2 =<span class="keyword">new</span> BroadcastReceiver() &#123;</div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function">publicvoid <span class="title">onReceive</span><span class="params">(Context context, Intent intent)</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">//如果有多个动态注册的广播，要用if(action.equals())&#123;&#125;else if... ...来判断是哪个广播。</span></div><div class="line">    <span class="comment">//String action = intent.getAction();</span></div><div class="line">    <span class="comment">//这里只有一个，不用判断了。</span></div><div class="line">    Log.v(TAG,<span class="string">"surx&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;dong--su2.bluetooth.false"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"><span class="comment">//在onStart中动态注册广播,当然也可以在onCreate里面注册</span></div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function">protectedvoid <span class="title">onStart</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">super</span>.onStart();</div><div class="line">    <span class="comment">//动态注册</span></div><div class="line">    IntentFilter intentFilter=<span class="keyword">new</span> IntentFilter(INTENAL_ACTION_2);</div><div class="line">    <span class="comment">//也可以用这种方法动态注册多个，说明我可以”接收“这么多的动态广播。</span></div><div class="line">    <span class="comment">/* IntentFilter intentFilter= new IntentFilter();</span></div><div class="line">    intentFilter.addAction("action1");</div><div class="line">    intentFilter.addAction("action2");*/</div><div class="line">    registerReceiver(bcrIntenal2,intentFilter);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//在onStop中取消注册广播,如果在onCreate里面注册，那么在onDestroy里面取消注册。</span></div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function">protectedvoid <span class="title">onStop</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">super</span>.onStop();</div><div class="line">    unregisterReceiver(bcrIntenal2);</div><div class="line">&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>BroadcastRecTest.java广播接受的Activity中，覆写onRecive方法,接受广播，取得intent中的数据。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function">publicvoid <span class="title">onReceive</span><span class="params">(Context context, Intent intent)</span> </span>&#123;</div><div class="line">    String action = intent.getAction();</div><div class="line">    <span class="keyword">if</span>(action.equals(INTENAL_ACTION_2))&#123;</div><div class="line">        Log.d(TAG,<span class="string">"surx&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;su2.bluetooth.true"</span>); <span class="comment">//静态广播的接受结果</span></div><div class="line">    &#125;<span class="keyword">else</span>&#123;</div><div class="line">        Log.d(TAG,<span class="string">"surx&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;su1.bluetooth.false"</span>); <span class="comment">//动态广播的接受结果，对应的是su1.bluetooth.false</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>AndroidManifest.xml<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">receiver</span> <span class="attr">android:name</span>=<span class="string">"BroadcastRecTest"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"su2.bluetooth.true"</span>/&gt;</span> <span class="comment">&lt;!-- 注册了INTENAL_ACTION_2作为静态广播接受 --&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">receiver</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>true是静态注册的，在Android.xml中注册的，false是动态注册的，在java代码中注册的。</p>
<h2 id="情况三、两个都是动态注册的，在同一个Activity里面既发送，又接收-不同Activity中亦可-。"><a href="#情况三、两个都是动态注册的，在同一个Activity里面既发送，又接收-不同Activity中亦可-。" class="headerlink" title="情况三、两个都是动态注册的，在同一个Activity里面既发送，又接收(不同Activity中亦可)。"></a>情况三、两个都是动态注册的，在同一个Activity里面既发送，又接收(不同Activity中亦可)。</h2><p>动态注册不需要一个类继承BroadcastReceiver这个类了，直接new一个对象即可。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function">publicvoid <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span>(v.getId()==(R.id.button01))&#123;</div><div class="line">        Intent intent=<span class="keyword">new</span> Intent(INTENAL_ACTION_1);</div><div class="line">        sendBroadcast(intent);</div><div class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(v.getId()==(R.id.button02))&#123;</div><div class="line">        Intent intent=<span class="keyword">new</span> Intent(INTENAL_ACTION_2);</div><div class="line">        sendBroadcast(intent);</div><div class="line">    &#125;</div><div class="line">    ...</div><div class="line"></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// 接收动态注册广播的BroadcastReceiver</span></div><div class="line"><span class="keyword">private</span> BroadcastReceiver bcrIntenal2 =<span class="keyword">new</span> BroadcastReceiver() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function">publicvoid <span class="title">onReceive</span><span class="params">(Context context, Intent intent)</span> </span>&#123;</div><div class="line">        String action = intent.getAction();</div><div class="line">        <span class="keyword">if</span>(action.equals(INTENAL_ACTION_1))&#123;</div><div class="line">            Log.v(TAG,<span class="string">"surx&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;dong--su3.bluetooth.true"</span>);</div><div class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(action.equals(INTENAL_ACTION_2))&#123;</div><div class="line">            Log.v(TAG,<span class="string">"surx&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;dong--su3.bluetooth.false"</span>);</div><div class="line">        &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//在onStart中动态注册广播,当然也可以在onCreate里面注册</span></div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function">protectedvoid <span class="title">onStart</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">super</span>.onStart();</div><div class="line">    <span class="comment">//动态注册两个，</span></div><div class="line">    IntentFilter intentFilter=<span class="keyword">new</span> IntentFilter();</div><div class="line">    intentFilter.addAction(INTENAL_ACTION_1);</div><div class="line">    intentFilter.addAction(INTENAL_ACTION_2);</div><div class="line">    registerReceiver(bcrIntenal2,intentFilter);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//在onStop中取消注册广播.</span></div></pre></td></tr></table></figure></p>
<p>AndroidManifest.xml中无须注册receiver,而是在代码中完成。</p>
<p>运行结果：<br><img src="http://pic002.cnblogs.com/images/2010/122963/2010121514224786.png" alt=""></p>
<h2 id="情况4，sendBroadcast的时候加权限，以2个都动态注册为例"><a href="#情况4，sendBroadcast的时候加权限，以2个都动态注册为例" class="headerlink" title="情况4，sendBroadcast的时候加权限，以2个都动态注册为例"></a>情况4，sendBroadcast的时候加权限，以2个都动态注册为例</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function">publicvoid <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span>(v.getId()==(R.id.button01))&#123;</div><div class="line">        Intent intent=<span class="keyword">new</span> Intent(INTENAL_ACTION_1);</div><div class="line">        sendBroadcast(intent,BLUETOOTH_PERM);</div><div class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(v.getId()==(R.id.button02))&#123;</div><div class="line">        Intent intent=<span class="keyword">new</span> Intent(INTENAL_ACTION_2);</div><div class="line">        sendBroadcast(intent,BLUETOOTH_PERM);  <span class="comment">//发送的时候申明了接受者的权限：BLUETOOTH_PERM</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// 接收动态注册广播的BroadcastReceiver</span></div><div class="line"><span class="keyword">private</span> BroadcastReceiver bcrIntenal2 =<span class="keyword">new</span> BroadcastReceiver() &#123;</div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceive</span><span class="params">(Context context, Intent intent)</span> </span>&#123;  <span class="comment">//将ACTION_1和2都申明为了动态接收的方式。</span></div><div class="line">    String action = intent.getAction();</div><div class="line">    <span class="keyword">if</span>(action.equals(INTENAL_ACTION_1))&#123;</div><div class="line">        Log.v(TAG,<span class="string">"surx&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;dong--su4.bluetooth.true"</span>);</div><div class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(action.equals(INTENAL_ACTION_2))&#123;</div><div class="line">        Log.v(TAG,<span class="string">"surx&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;dong--su4.bluetooth.false"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//在onStart中动态注册广播,当然也可以在onCreate里面注册</span></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onStart</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onStart();</div><div class="line">        <span class="comment">//动态注册两个，说明我可以”接收“2个这样Action的动态广播</span></div><div class="line">        IntentFilter intentFilter=<span class="keyword">new</span> IntentFilter();</div><div class="line">        intentFilter.addAction(INTENAL_ACTION_1);</div><div class="line">        intentFilter.addAction(INTENAL_ACTION_2);</div><div class="line">        registerReceiver(bcrIntenal2,intentFilter);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//在onStop中取消注册广播,如果在onCreate里面注册，那么在onDestroy里面取消注册。</span></div></pre></td></tr></table></figure>
<p>发送的时候加了蓝牙权限，</p>
<p>若在使用sendBroadcast()的方法是指定了接收权限，则只有接收方的包内–在AndroidManifest.xml中用<uses- permission="">标签声明了拥有此权限的BroascastReceiver才会有可能接收到发送来的Broadcast。</uses-></p>
<p>同样，若在注册BroadcastReceiver时指定了可接收的Broadcast的权限，则只有在接收方的包内的AndroidManifest.xml中 用<uses-permission>标签声明了，拥有此权限的Context对象所发送的Broadcast才能被这个 BroadcastReceiver所接收。</uses-permission></p>
<p>AndroidManifest.xml中无须注册receiver。</p>
<p>运行结果：</p>
<p><img src="http://pic002.cnblogs.com/images/2010/122963/2010121514281235.png" alt=""></p>
<p> 两个Application间，发送广播，（以静态为例）</p>
<h3 id="发送端："><a href="#发送端：" class="headerlink" title="发送端："></a>发送端：</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</div><div class="line">    Log.v(TAG, <span class="string">"@@@@@onclicksendbroadcast"</span>);</div><div class="line">    <span class="keyword">if</span> (v.getId() == btn1.getId()) &#123;</div><div class="line">        Log.v(TAG, <span class="string">"onclicksendbroadcast"</span>);</div><div class="line">        Intent myIntent = <span class="keyword">new</span> Intent();</div><div class="line">        myIntent.setAction(<span class="string">"su.broadcast.send"</span>);</div><div class="line">        sendBroadcast(myIntent);</div></pre></td></tr></table></figure>
<h3 id="接收端："><a href="#接收端：" class="headerlink" title="接收端："></a>接收端：</h3><p> 另一个application</p>
<p>1、Activity<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BroadcastReceiverTest1Activity</span> <span class="keyword">extends</span> <span class="title">Activity</span> </span>&#123;</div><div class="line">    <span class="comment">/** Called when the activity is first created. */</span></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">        setContentView(R.layout.main);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>2、BroadcastReceiver<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyIntentReceiver</span> <span class="keyword">extends</span> <span class="title">BroadcastReceiver</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceive</span><span class="params">(Context arg0, Intent intent)</span> </span>&#123;</div><div class="line">        <span class="comment">// TODO Auto-generated method stub</span></div><div class="line">        String action =intent.getAction();</div><div class="line">        <span class="keyword">if</span>(action.equals(<span class="string">"su.broadcast.send"</span>))&#123;</div><div class="line">             Log.v(<span class="string">"MyIntentReceiver"</span>, <span class="string">"#####shoudao"</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>3、AndroidManifest.xml<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">activity</span></span></div><div class="line">    <span class="attr">android:name</span>=<span class="string">".BroadcastReceiverTest1Activity"</span></div><div class="line">    <span class="attr">android:label</span>=<span class="string">"@string/app_name"</span> &gt;</div><div class="line">    <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"android.intent.action.MAIN"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">"android.intent.category.LAUNCHER"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">activity</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">receiver</span></span></div><div class="line">    <span class="attr">android:name</span>=<span class="string">".MyIntentReceiver"</span></div><div class="line">    <span class="attr">android:label</span>=<span class="string">"wodeReceiver"</span> &gt;</div><div class="line">    <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"su.broadcast.send"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">receiver</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>运行Application1，点击button，Application2广播接收端会收到这个广播，打印log信息（但不会显示BroadcastReceiverTest1Activity的界面），还是显示SenderTest1Activity的界面，</p>
<p>Log信息如下：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">01-30 05:14:01.146: V/SenderTest1Activity(769): onCreate........</div><div class="line">01-30 05:14:01.766: I/ActivityManager(90): Displayed com.sendbroadcast.test1/.SenderTest1Activity: +996ms</div><div class="line">01-30 05:14:02.085: W/InputManagerService(90): Starting input on non-focused client com.android.internal.view.IInputMethodClient$Stub$Proxy@415548b0 (uid=10009 pid=182)</div><div class="line">01-30 05:14:02.125: W/NetworkManagementSocketTagger(90): setKernelCountSet(10009, 0) failed with errno -2</div><div class="line">01-30 05:14:02.735: V/SenderTest1Activity(769): @@@@@onclicksendbroadcast</div><div class="line">01-30 05:14:02.735: V/SenderTest1Activity(769): onclicksendbroadcast</div><div class="line">01-30 05:14:02.776: V/MyIntentReceiver(977): #####shoudao</div></pre></td></tr></table></figure></p>
<p>接收端Application3，用动态方式接收。（把Application1的发送的action变成(“su.broadcast.send2”);）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">    <span class="keyword">private</span> BroadcastReceiver br= <span class="keyword">new</span> BroadcastReceiver()&#123;</div><div class="line"></div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceive</span><span class="params">(Context context, Intent intent)</span> </span>&#123;</div><div class="line">            Log.v(<span class="string">"BroadcastReceiverTest2Activity"</span>,<span class="string">"#####dongtaireceive"</span>);</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">    &#125;;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onStart</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onStart();</div><div class="line">        IntentFilter it = <span class="keyword">new</span> IntentFilter();</div><div class="line">        it.addAction(<span class="string">"su.broadcast.send2"</span>);</div><div class="line">        registerReceiver(br,it);</div><div class="line">        Log.v(<span class="string">"BroadcastReceiverTest2Activity"</span>,<span class="string">"#####registerReceiver"</span>);</div><div class="line">        </div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onStop();</div><div class="line">        unregisterReceiver(br);</div><div class="line">        Log.v(<span class="string">"BroadcastReceiverTest2Activity"</span>,<span class="string">"#####unregisterReceiver"</span>);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>先运行Application3，不能退出（back），否则就unregisterReceiver了，也就不能收到发送端发送的广播了。再运行Application1，点击button，发送广播，log信息如下：界面还是Application1的界面UI<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">01-30 07:13:14.918: V/SenderTest1Activity(651): @@@@@onclicksendbroadcast</div><div class="line">01-30 07:13:14.918: V/SenderTest1Activity(651): onclicksendbroadcast</div><div class="line">01-30 07:13:14.937: V/BroadcastReceiverTest2Activity(591): #####dongtaireceive</div></pre></td></tr></table></figure></p>
<p>对于静态Application2接收广播来说，back之后也能接收到发送端发过来的广播！</p>
<p> 注意：发送广播并不能调起另一个Activity！一直显示的都是发送广播的那个Activity的UI！！</p>
<h2 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h2><p>以发送intent为例，发送广播都用sendBroadcast(intent);</p>
<p>静态注册接收的时候，只需要</p>
<ul>
<li>（1）得到action，如：String action = intent.getAction();</li>
<li>（2）判断action类型，做出相应的动作。</li>
</ul>
<p>动态注册接收的时候，需要：</p>
<ul>
<li>（1）IntentFilter intentFilter= new IntentFilter();</li>
<li>（2）intentFilter.addAction（。。）;可以添加多个</li>
<li>（3）注册接收，registerReceiver(BroadcastReceiver对象,intentFilter);别忘了在其他需要的地方取消注册接收！！！</li>
<li>（4）得到action，如：String action = intent.getAction();</li>
<li>（5）判断action类型，做出相应的动作。</li>
</ul>
<h3 id="参考文档："><a href="#参考文档：" class="headerlink" title="参考文档："></a>参考文档：</h3><p><a href="http://www.cnblogs.com/snowdrop/articles/1906709.html" target="_blank" rel="external">http://www.cnblogs.com/snowdrop/articles/1906709.html</a><br><a href="http://www.cnblogs.com/playing/archive/2011/03/23/1992030.html" target="_blank" rel="external">http://www.cnblogs.com/playing/archive/2011/03/23/1992030.html</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/11/06/android_broadcast/" data-id="cj4zxopm2000vq4nhzt9o01aj" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/broadcast/">broadcast</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-android_viewpager1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/11/06/android_viewpager1/" class="article-date">
  <time datetime="2015-11-06T06:25:29.000Z" itemprop="datePublished">2015-11-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/android/">android</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/06/android_viewpager1/">ViewPager的基本使用一</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h2><p>ViewPager是android扩展包v4包中的类，这个类可以让用户左右切换当前的view。我们首先来看看API对于这个类的表述：</p>
<blockquote>
<p>Layout manager that allows the user to flip left and right through pages of data. You supply an implementation of a PagerAdapter to generate the pages that the view shows.<br>Note this class is currently under early design and development. The API will likely change in later updates of the compatibility library, requiring changes to the source code of apps when they are compiled against the newer version.<br>ViewPager is most often used in conjunction with Fragment, which is a convenient way to supply and manage the lifecycle of each page. There are standard adapters implemented for using fragments with the ViewPager, which cover the most common use cases. These are FragmentPagerAdapter and FragmentStatePagerAdapter; each of these classes have simple code showing how to build a full user interface with them.</p>
</blockquote>
<p>从这个描述中我们知道几点：</p>
<ul>
<li>1）ViewPager类直接继承了ViewGroup类，所有它是一个容器类，可以在其中添加其他的view类。</li>
<li>2）ViewPager类需要一个PagerAdapter适配器类给它提供数据。</li>
<li>3）ViewPager经常和Fragment一起使用，并且提供了专门的FragmentPagerAdapter和FragmentStatePagerAdapter类供Fragment中的ViewPager使用。</li>
</ul>
<p>在编写ViewPager的应用的使用，还需要使用两个组件类分别是PagerTitleStrip类和PagerTabStrip类，PagerTitleStrip类直接继承自ViewGroup类，而PagerTabStrip类继承PagerTitleStrip类，所以这两个类也是容器类。但是有一点需要注意，在定义XML的layout的时候，这两个类必须是ViewPager标签的子标签，不然会出错。</p>
<p>layout.xml:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">RelativeLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">    <span class="attr">xmlns:tools</span>=<span class="string">"http://schemas.android.com/tools"</span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">tools:context</span>=<span class="string">".MainActivity"</span> &gt;</div><div class="line"> </div><div class="line">    <span class="tag">&lt;<span class="name">android.support.v4.view.ViewPager</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/viewpager"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span> &gt;</div><div class="line"> </div><div class="line">        <span class="tag">&lt;<span class="name">android.support.v4.view.PagerTabStrip</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/tabstrip"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"50dip"</span></div><div class="line">            <span class="attr">android:gravity</span>=<span class="string">"center"</span> /&gt;</div><div class="line">    <span class="tag">&lt;/<span class="name">android.support.v4.view.ViewPager</span>&gt;</span></div><div class="line"> </div><div class="line"><span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>MainActivity.java<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.example.android_viewpager1;</div><div class="line"> </div><div class="line"><span class="keyword">import</span> java.util.ArrayList;</div><div class="line"><span class="keyword">import</span> android.annotation.SuppressLint;</div><div class="line"><span class="keyword">import</span> android.app.Activity;</div><div class="line"><span class="keyword">import</span> android.os.Bundle;</div><div class="line"><span class="keyword">import</span> android.support.v4.view.PagerAdapter;</div><div class="line"><span class="keyword">import</span> android.support.v4.view.PagerTabStrip;</div><div class="line"><span class="keyword">import</span> android.support.v4.view.ViewPager;</div><div class="line"><span class="keyword">import</span> android.support.v4.view.ViewPager.OnPageChangeListener;</div><div class="line"><span class="keyword">import</span> android.util.Log;</div><div class="line"><span class="keyword">import</span> android.view.LayoutInflater;</div><div class="line"><span class="keyword">import</span> android.view.View;</div><div class="line"><span class="keyword">import</span> android.view.ViewGroup;</div><div class="line"> </div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> </span>&#123;</div><div class="line"> </div><div class="line">    ViewPager pager = <span class="keyword">null</span>;</div><div class="line">    PagerTabStrip tabStrip = <span class="keyword">null</span>;</div><div class="line">    ArrayList&lt;View&gt; viewContainter = <span class="keyword">new</span> ArrayList&lt;View&gt;();</div><div class="line">    ArrayList&lt;String&gt; titleContainer = <span class="keyword">new</span> ArrayList&lt;String&gt;();</div><div class="line">    <span class="keyword">public</span> String TAG = <span class="string">"tag"</span>;</div><div class="line"> </div><div class="line">    <span class="meta">@SuppressLint</span>(<span class="string">"ResourceAsColor"</span>)</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">        setContentView(R.layout.activity_main);</div><div class="line"> </div><div class="line">        pager = (ViewPager) <span class="keyword">this</span>.findViewById(R.id.viewpager);</div><div class="line">        tabStrip = (PagerTabStrip) <span class="keyword">this</span>.findViewById(R.id.tabstrip);</div><div class="line">        <span class="comment">//取消tab下面的长横线</span></div><div class="line">        tabStrip.setDrawFullUnderline(<span class="keyword">false</span>);</div><div class="line">        <span class="comment">//设置tab的背景色</span></div><div class="line">        tabStrip.setBackgroundColor(<span class="keyword">this</span>.getResources().getColor(R.color.bg));</div><div class="line">        <span class="comment">//设置当前tab页签的下划线颜色</span></div><div class="line">        tabStrip.setTabIndicatorColor(<span class="keyword">this</span>.getResources().getColor(R.color.red));</div><div class="line">        tabStrip.setTextSpacing(<span class="number">200</span>);</div><div class="line">         </div><div class="line">        View view1 = LayoutInflater.from(<span class="keyword">this</span>).inflate(R.layout.tab1, <span class="keyword">null</span>);</div><div class="line">        View view2 = LayoutInflater.from(<span class="keyword">this</span>).inflate(R.layout.tab2, <span class="keyword">null</span>);</div><div class="line">        View view3 = LayoutInflater.from(<span class="keyword">this</span>).inflate(R.layout.tab3, <span class="keyword">null</span>);</div><div class="line">        View view4 = LayoutInflater.from(<span class="keyword">this</span>).inflate(R.layout.tab4, <span class="keyword">null</span>);</div><div class="line">      <span class="comment">//viewpager开始添加view</span></div><div class="line">        viewContainter.add(view1);</div><div class="line">        viewContainter.add(view2);</div><div class="line">        viewContainter.add(view3);</div><div class="line">        viewContainter.add(view4);</div><div class="line">      <span class="comment">//页签项</span></div><div class="line">        titleContainer.add(<span class="string">"网易新闻"</span>);</div><div class="line">        titleContainer.add(<span class="string">"网易体育"</span>);</div><div class="line">        titleContainer.add(<span class="string">"网易财经"</span>);</div><div class="line">        titleContainer.add(<span class="string">"网易女人"</span>);</div><div class="line"> </div><div class="line">        pager.setAdapter(<span class="keyword">new</span> PagerAdapter() &#123;</div><div class="line"> </div><div class="line">            <span class="comment">//viewpager中的组件数量</span></div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCount</span><span class="params">()</span> </span>&#123;</div><div class="line">                <span class="keyword">return</span> viewContainter.size();</div><div class="line">            &#125;</div><div class="line">          <span class="comment">//滑动切换的时候销毁当前的组件</span></div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroyItem</span><span class="params">(ViewGroup container, <span class="keyword">int</span> position,</span></span></div><div class="line">                    Object object) &#123;</div><div class="line">                ((ViewPager) container).removeView(viewContainter.get(position));</div><div class="line">            &#125;</div><div class="line">          <span class="comment">//每次滑动的时候生成的组件</span></div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> Object <span class="title">instantiateItem</span><span class="params">(ViewGroup container, <span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">                ((ViewPager) container).addView(viewContainter.get(position));</div><div class="line">                <span class="keyword">return</span> viewContainter.get(position);</div><div class="line">            &#125;</div><div class="line"> </div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isViewFromObject</span><span class="params">(View arg0, Object arg1)</span> </span>&#123;</div><div class="line">                <span class="keyword">return</span> arg0 == arg1;</div><div class="line">            &#125;</div><div class="line"> </div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getItemPosition</span><span class="params">(Object object)</span> </span>&#123;</div><div class="line">                <span class="keyword">return</span> <span class="keyword">super</span>.getItemPosition(object);</div><div class="line">            &#125;</div><div class="line"> </div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> CharSequence <span class="title">getPageTitle</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">                <span class="keyword">return</span> titleContainer.get(position);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line"> </div><div class="line">        pager.setOnPageChangeListener(<span class="keyword">new</span> OnPageChangeListener() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onPageScrollStateChanged</span><span class="params">(<span class="keyword">int</span> arg0)</span> </span>&#123;</div><div class="line">                Log.d(TAG, <span class="string">"--------changed:"</span> + arg0);</div><div class="line">            &#125;</div><div class="line"> </div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onPageScrolled</span><span class="params">(<span class="keyword">int</span> arg0, <span class="keyword">float</span> arg1, <span class="keyword">int</span> arg2)</span> </span>&#123;</div><div class="line">                Log.d(TAG, <span class="string">"-------scrolled arg0:"</span> + arg0);</div><div class="line">                Log.d(TAG, <span class="string">"-------scrolled arg1:"</span> + arg1);</div><div class="line">                Log.d(TAG, <span class="string">"-------scrolled arg2:"</span> + arg2);</div><div class="line">            &#125;</div><div class="line"> </div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onPageSelected</span><span class="params">(<span class="keyword">int</span> arg0)</span> </span>&#123;</div><div class="line">                Log.d(TAG, <span class="string">"------selected:"</span> + arg0);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line"> </div><div class="line">    &#125;</div><div class="line"> </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>实现的效果如下：<br><img src="http://static.oschina.net/uploads/space/2014/0320/150920_Y0Ck_932977.png" alt=""></p>
<p>对于PagerAdapter类，android的文档已经说的很清楚了，必须至少实现如下的4个方法，如果需要更好的扩展也可以实现更多的方法。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> Object <span class="title">instantiateItem</span><span class="params">(ViewGroup container, <span class="keyword">int</span> position)</span></span></div><div class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroyItem</span><span class="params">(ViewGroup container, <span class="keyword">int</span> position,Object object)</span> </div><div class="line"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCount</span><span class="params">()</span></div><div class="line"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isViewFromObject</span><span class="params">(View arg0, Object arg1)</span></div></pre></td></tr></table></figure></p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="http://my.oschina.net/summerpxy/blog/210026" target="_blank" rel="external">http://my.oschina.net/summerpxy/blog/210026</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/11/06/android_viewpager1/" data-id="cj4zxopou0045q4nh2xv0tayk" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/viewpager/">viewpager</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-tools_hexo_build_guidance" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/11/06/tools_hexo_build_guidance/" class="article-date">
  <time datetime="2015-11-06T03:25:29.000Z" itemprop="datePublished">2015-11-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/tools/">tools</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/06/tools_hexo_build_guidance/">Hexo博客搭建图文教程[Windows]</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="一-前言"><a href="#一-前言" class="headerlink" title="一.前言"></a>一.前言</h2><p>一直纠结于哪里写博客，曾用过新浪博客，百度空间，JavaEye，LOFTER，OSChina，cnblogs，CSDN，自搭WordPress，都不满意。再后来也弄过Jekyll和Octopress，觉累不爱。直到多看了一眼hexo，这个逼格极高的程序猿写作方式，我喜欢。就连hexo的发音都像是黑客哦！如果你跟我一样纠结哪里写博，那就来到GitHub吧，让我们一起hexo！H人希绝对不会让你失望，相信很快hexo就会流行起来。hexo出自台湾大学生tommy351之手，是一个基于Node.js的静态博客程序，其编译上百篇文字只需要几秒。hexo生成的静态网页可以直接放到GitHub Pages，BAE，SAE等平台上。本文致力于提供一份足够简单，长期维护的基于Github Pages的Hexo博客搭建图文教程，希望能有所帮助。</p>
<h2 id="二-准备"><a href="#二-准备" class="headerlink" title="二.准备"></a>二.准备</h2><p>你需要准备好以下软件：</p>
<ul>
<li>Node.js环境</li>
<li>Git<br><strong> 配置Node.js环境</strong><br>下载Node.js安装文件：</li>
<li><a href="http://nodejs.org/dist/v0.12.1/node-v0.12.1-x86.msi" target="_blank" rel="external">Windows Installer 32-bit</a></li>
<li><a href="http://nodejs.org/dist/v0.12.1/x64/node-v0.12.1-x64.msi" target="_blank" rel="external">Windows Installer 64-bit</a></li>
</ul>
<p>安装Node.js，保持默认设置即可，一路Next，安装很快就结束了。<br>然后我们检查一下是不是要求的组件都安装好了，同时按下Win和R，打开运行窗口：</p>
<p>在新打开的窗口中输入cmd，敲击回车，打开命令行界面。<br>在打开的命令行界面中，输入<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">node -v</div><div class="line">npm -v</div></pre></td></tr></table></figure></p>
<p>如果结果如下图所示，则说明安装正确，可以进行下一步了，如果不正确，查看系统的环境变量是否已经配置（这个是自动配置的，但也有意外，可以手动重新配置一下），如果还是不行，则需要回头检查自己的安装过程。<br><img src="https://xuanwo.org/imgs/opinion/Nodejs-test.png" alt=""></p>
<h2 id="三-配置Git环境"><a href="#三-配置Git环境" class="headerlink" title="三.配置Git环境"></a>三.配置Git环境</h2><h3 id="下载Git安装文件"><a href="#下载Git安装文件" class="headerlink" title="下载Git安装文件"></a>下载Git安装文件</h3><ul>
<li><a href="https://github.com/msysgit/msysgit/releases/download/Git-1.9.5-preview20150319/Git-1.9.5-preview20150319.exe" target="_blank" rel="external">Git-1.9.5-preview20150319.exe</a><br>然后就进入了Git的安装界面，如图：<br><img src="https://xuanwo.org/imgs/opinion/Git-install.png" alt=""><br>和Node.js一样，大部分设置都只需要保持默认，但是出于我们操作方便考虑，建议PATH选项按照下图选择：<br><img src="https://xuanwo.org/imgs/opinion/Git-path-setting.png" alt=""></li>
</ul>
<blockquote>
<p>这是对上图的解释，不需要了解请直接跳过Git的默认设置下，出于安全考虑，只有在Git Bash中才能进行Git的相关操作。按照上图进行的选择，将会使得Git安装程序在系统PATH中加入Git的相关路径，使得你可以在CMD界面下调用Git，不用打开Git Bash了。</p>
</blockquote>
<p>一样的，我们来检查一下Git是不是安装正确了，打开命令行，输入：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git --version</div></pre></td></tr></table></figure></p>
<p>如果结果如下图所示，则说明安装正确，可以进行下一步了，如果不正确，检查自己的环境变量，如果还是不行，则需要回头检查自己的安装过程。</p>
<h3 id="注册账号"><a href="#注册账号" class="headerlink" title="注册账号"></a>注册账号</h3><p>如果已经拥有账号，请跳过此步~<br>打开<a href="https://github.com/" target="_blank" rel="external">github官网</a>，在下图的框中，分别输入自己的用户名，邮箱，密码。<br><img src="https://xuanwo.org/imgs/opinion/Github-sign-up.png" alt=""></p>
<p>然后前往自己刚才填写的邮箱，点开Github发送给你的注册确认信，确认注册，结束注册流程。<br>一定要确认注册，否则无法使用gh-pages！</p>
<h3 id="创建代码库"><a href="#创建代码库" class="headerlink" title="创建代码库"></a>创建代码库</h3><p>登陆之后，点击页面右上角的加号，选择New repository：<br><img src="https://xuanwo.org/imgs/opinion/Github-create-a-new-repo.png" alt=""></p>
<h3 id="进入代码库创建页面"><a href="#进入代码库创建页面" class="headerlink" title="进入代码库创建页面"></a>进入代码库创建页面</h3><p>在Repository name下填写yourname.github.io，Description (optional)下填写一些简单的描述（不写也没有关系），如图所示：<br><img src="https://xuanwo.org/imgs/opinion/Github-new-repo-setting.png" alt=""></p>
<p>正确创建之后，你将会看到如下界面：<br><img src="https://xuanwo.org/imgs/opinion/Github-new-repo-look-like.png" alt=""></p>
<h3 id="开启gh-pages功能"><a href="#开启gh-pages功能" class="headerlink" title="开启gh-pages功能"></a>开启gh-pages功能</h3><p>点击界面右侧的Settings，你将会打开这个库的setting页面，向下拖动，直到看见GitHub Pages，如图：<br><img src="https://xuanwo.org/imgs/opinion/Github-pages.png" alt=""></p>
<p>点击Automatic page generator，Github将会自动替你创建出一个gh-pages的页面。<br>如果你的配置没有问题，那么大约15分钟之后，yourname.github.io这个网址就可以正常访问了~<br>如果yourname.github.io已经可以正常访问了，那么Github一侧的配置已经全部结束了。<br>PS: yourname.github.io是固定格式，而且yourname要和你的github名一样。</p>
<h2 id="四-配置Hexo"><a href="#四-配置Hexo" class="headerlink" title="四.配置Hexo"></a>四.配置Hexo</h2><h3 id="安装Hexo"><a href="#安装Hexo" class="headerlink" title="安装Hexo"></a>安装Hexo</h3><p>在自己认为合适的地方创建一个文件夹，然后在文件夹空白处按住Shift+鼠标右键，然后点击在此处打开命令行窗口。（同样要记住啦，下文中会使用在当前目录打开命令行来代指上述的操作）<br>在命令行中输入：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install hexo-cli -g</div></pre></td></tr></table></figure></p>
<p>然后你将会看到:<br><img src="https://xuanwo.org/imgs/opinion/npm-install-hexo-cli.png" alt=""></p>
<p>可能你会看到一个WARN，但是不用担心，这不会影响你的正常使用。<br>然后输入<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install hexo --save</div></pre></td></tr></table></figure></p>
<p>然后你会看到命令行窗口刷了一大堆白字，下面我们来看一看Hexo是不是已经安装好了。<br>在命令行中输入：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hexo -v</div></pre></td></tr></table></figure></p>
<p>如果你看到了如图文字，则说明已经安装成功了。<br><img src="https://xuanwo.org/imgs/opinion/hexo-v.png" alt=""></p>
<h3 id="初始化Hexo"><a href="#初始化Hexo" class="headerlink" title="初始化Hexo"></a>初始化Hexo</h3><p>接着上面的操作，输入：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hexo init</div></pre></td></tr></table></figure></p>
<p>如图：<br><img src="https://xuanwo.org/imgs/opinion/hexo-init.png" alt=""></p>
<p>然后输入：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install</div></pre></td></tr></table></figure></p>
<p>之后npm将会自动安装你需要的组件，只需要等待npm操作即可。</p>
<h3 id="首次体验Hexo"><a href="#首次体验Hexo" class="headerlink" title="首次体验Hexo"></a>首次体验Hexo</h3><p>继续操作，同样是在命令行中，输入：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hexo g</div></pre></td></tr></table></figure></p>
<p>(hexo generate)<br>如图：<br><img src="https://xuanwo.org/imgs/opinion/hexo-g.png" alt=""></p>
<p>然后输入：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hexo s</div></pre></td></tr></table></figure></p>
<p>(hexo server)</p>
<p>然后会提示：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">INFO  Hexo is running at http://0.0.0.0:4000/. Press Ctrl+C to stop.</div></pre></td></tr></table></figure></p>
<p>在浏览器中打开<a href="http://localhost:4000/，你将会看到：" target="_blank" rel="external">http://localhost:4000/，你将会看到：</a><br><img src="https://xuanwo.org/imgs/opinion/hexo-first-time.png" alt=""></p>
<p>到目前为止，Hexo在本地的配置已经全都结束了。</p>
<h2 id="五-使用Hexo"><a href="#五-使用Hexo" class="headerlink" title="五.使用Hexo"></a>五.使用Hexo</h2><p>在配置过程中请使用<a href="http://www.yamllint.com/" target="_blank" rel="external">yamllint</a>来保证自己的yaml语法正确<br><strong> 修改全局配置文件</strong><br>此部分可以参考<a href="http://hexo.io/zh-cn/docs/configuration.html" target="_blank" rel="external">Hexo官方文档</a><br>您可以在 _config.yml 中修改大部份的配置。</p>
<h2 id="六-配置Deployment"><a href="#六-配置Deployment" class="headerlink" title="六.配置Deployment"></a>六.配置Deployment</h2><h3 id="添加SSH-Key"><a href="#添加SSH-Key" class="headerlink" title="添加SSH-Key"></a>添加SSH-Key</h3><p>首先，你需要为自己配置身份信息，打开Git Bash命令行(安装目录下，配置了环境变量直接cmd)，然后输入：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git config --global user.name <span class="string">"yourname"</span></div><div class="line">git config --global user.email <span class="string">"youremail"</span></div></pre></td></tr></table></figure></p>
<p>生成密钥：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ssh-keygen -t rsa -C <span class="string">"bu.ru@qq.com"</span></div></pre></td></tr></table></figure></p>
<p>输入文件路径：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">H:\hexo\blog&gt;ssh-keygen -t rsa -C <span class="string">"bu.ru@qq.com"</span></div><div class="line">Generating public/private rsa key pair.</div><div class="line">Enter file <span class="keyword">in</span> <span class="built_in">which</span> to save the key (//.ssh/id_rsa): H:\git\myssh\ssh</div><div class="line">Enter passphrase (empty <span class="keyword">for</span> no passphrase):</div><div class="line">Enter same passphrase again:</div><div class="line">Your identification has been saved <span class="keyword">in</span> H:\git\myssh\ssh.</div><div class="line">Your public key has been saved <span class="keyword">in</span> H:\git\myssh\ssh.pub.</div><div class="line">The key fingerprint is:</div><div class="line">b0:0c:2e:67:33:ab:c1:50:10:40:0a:ba:c1:80:59:22 bu.ru@qq.com</div></pre></td></tr></table></figure></p>
<p>有个bug，文件路径中的盘符H必须大写，否则会报错。<br>上述命令若执行成功，会在H:\git\myssh目录下生成两个文件id_rsa和id_rsa.pub，最后两步：</p>
<p>用文本编辑器打开ssh.pub文件，拷贝其中的内容，将其添加到Add SSH Key<br>将id_rsa和id_rsa.pub拷贝至你Git安装目录下的.ssh目录，如H:\PortableGit-1.8.4.ssh<br><img src="http://bruce.u.qiniudn.com/2013/11/22/hexo-your-blog/add-ssh-keys.jpg" alt=""><br>Add SSH KeysAdd SSH Keys</p>
<p>最后可以验证一下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ssh -T git@github.com</div></pre></td></tr></table></figure></p>
<p>若有问题，请重新设置。常见错误请参考：</p>
<ul>
<li><a href="http://help.github.com/articles/generating-ssh-keys" target="_blank" rel="external">GitHub Help - Generating SSH Keys</a></li>
<li><a href="http://help.github.com/articles/error-permission-denied-publickey" target="_blank" rel="external">GitHub Help - Error Permission denied (publickey)</a></li>
</ul>
<p>在_config.yml文件中，找到Deployment，然后按照如下修改：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">deploy:</div><div class="line">type: git</div><div class="line">repo: git@github.com:yourname/yourname.github.io.git</div><div class="line">branch: master</div></pre></td></tr></table></figure></p>
<p>如果使用git方式进行部署，执行npm install hexo-deployer-git –save来安装所需的插件<br>然后在当前目录打开命令行，输入：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hexo d</div></pre></td></tr></table></figure></p>
<p>随后按照提示，分别输入自己的Github账号用户名和密码，开始上传。<br>然后通过<a href="http://yourname.github.io/来访问自己刚刚上传的网站。" target="_blank" rel="external">http://yourname.github.io/来访问自己刚刚上传的网站。</a><br><strong> PS：</strong>如果hexo deploy提示失败，有可能是repo的问题，修改成github上的http地址试试，例如：repository: <a href="http://github.com/xxx/xxx.github.io.git" target="_blank" rel="external">http://github.com/xxx/xxx.github.io.git</a></p>
<h3 id="七-添加新文章"><a href="#七-添加新文章" class="headerlink" title="七.添加新文章"></a>七.添加新文章</h3><p>打开Hexo目录下的source文件夹，所有的文章都会以md形式保存在_post文件夹中，只要在_post文件夹中新建md类型的文档，就能在执行hexo g的时候被渲染。<br>新建的文章头需要添加一些yml信息，如下所示：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">title: hello-world   //在此处添加你的标题。</div><div class="line">date: 2014-11-7 08:55:29   //在此处输入你编辑这篇文章的时间。</div><div class="line">tags: [ACM, UVa, C/C++]  //在此处添加这篇文章的标签，多个标签需要使用`[ ]`来包裹，用`,`来分隔。</div><div class="line">categories: Exercise   //在此处输入这篇文章的分类。</div><div class="line">toc: true  //在此处设定是否开启目录，需要主题支持。</div><div class="line">---</div></pre></td></tr></table></figure></p>
<h2 id="八-进阶"><a href="#八-进阶" class="headerlink" title="八.进阶"></a>八.进阶</h2><p>如果成功完成了上述的全部步骤，恭喜你，你已经搭建了一个最为简单且基础的博客。但是这个博客还非常简单， 没有个人的定制，操作也比较复杂，下面的进阶技巧将会让你获得对Hexo更为深入的了解。</p>
<h3 id="更换主题"><a href="#更换主题" class="headerlink" title="更换主题"></a>更换主题</h3><p>可以在<a href="https://github.com/hexojs/hexo/wiki/Themes" target="_blank" rel="external">此处</a>寻找自己喜欢的主题<br>下载所有的主题文件，保存到Hexo目录下的themes文件夹下。然后在_config.yml文件中修改：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># Extensions</div><div class="line">## Plugins: http://hexo.io/plugins/</div><div class="line">## Themes: http://hexo.io/themes/</div><div class="line">theme: landscape //themes文件夹中对应文件夹的名称</div></pre></td></tr></table></figure></p>
<p>然后先执行hexo clean，然后重新hexo g，并且hexo d，很快就能看到新主题的效果了~</p>
<h3 id="更换域名"><a href="#更换域名" class="headerlink" title="更换域名"></a>更换域名</h3><p>首先，需要注册一个域名。在中国的话，.cn全都需要进行备案，如果不想备案的话，请注册别的顶级域名，可以使用godaddy或新网或万网中的任意一家，自己权衡价格即可。<br>然后，我们需要配置一下域名解析。推荐使用DNSPod的服务，比较稳定，解析速度比较快。在域名注册商出修改NS服务器地址为：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">f1g1ns1.dnspod.net</div><div class="line">f1g1ns2.dnspod.net</div></pre></td></tr></table></figure></p>
<p>以新网为例，首先点击域名管理进入管理页面：<br><img src="https://xuanwo.org/imgs/opinion/domin-setting.png" alt=""></p>
<p>然后点击域名后面的管理：<br><img src="https://xuanwo.org/imgs/opinion/domin-config.png" alt=""></p>
<p>进入域名管理的操作界面，点击域名管理，来到域名管理界面：<br><img src="https://xuanwo.org/imgs/opinion/domin-dnspod.png" alt=""></p>
<p>点击修改域名DNS，然后选择填写具体信息，在下面的空框中填入DNSPod的NS服务器：</p>
<p>然后我们进入DNSPod的界面，开始真正进入域名解析的配置= =。在DNSPod中，首先添加域名，然后分别添加如下条目：<br><img src="https://xuanwo.org/imgs/opinion/dnspod-setting.png" alt=""></p>
<p>最后，我们对Github进行一下配置。<br>在自己本地的hexo目录下的source文件夹中，新建一个CNAME文件（注意，没有后缀名。），内容为yourdomin.xxx。然后再执行一下hexo d -g，重新上传自己的博客。<br>在github中打开你自己的库，进入库的setting界面，如果看到了如下提示，说明配置成功了。<br><img src="https://xuanwo.org/imgs/opinion/Github-domin.png" alt=""></p>
<p>在这一系列的操作中，包括修改NS服务器，设置A解析等等，都需要一定的时间。短则10分钟，长则24小时，最长不会超过72小时。如果超过72小时，请检查自己的配置过程，或者修改自己本地的DNS服务器。</p>
<h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><ul>
<li><a href="https://xuanwo.org/2015/03/26/hexo-intor/" target="_blank" rel="external">https://xuanwo.org/2015/03/26/hexo-intor/</a></li>
<li><a href="http://ibruce.info/2013/11/22/hexo-your-blog/" target="_blank" rel="external">http://ibruce.info/2013/11/22/hexo-your-blog/</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/11/06/tools_hexo_build_guidance/" data-id="cj4zxopq5006cq4nh6ntfdhjg" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hexo/">hexo</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-android_as_shortkey" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/11/06/android_as_shortkey/" class="article-date">
  <time datetime="2015-11-06T01:57:29.000Z" itemprop="datePublished">2015-11-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/android/">android</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/06/android_as_shortkey/">倍数提高工作效率的Android Studio奇技</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>这是从Philippe Breault的系列文章《Android Studio Tips Of the Day》中提取出来的自认为精华的部分。<br>这些技巧在实际应用中能够非常大的提高工作效率。 </p>
<h2 id="关于快捷键"><a href="#关于快捷键" class="headerlink" title="关于快捷键"></a>关于快捷键</h2><p><strong> The File Structure Popup</strong> </p>
<blockquote>
<p>ctrl+f12 </p>
</blockquote>
<p>此快捷键可以调出当前文件的大纲，并通过模糊匹配快速跳转至指定的方法。<br>勾选上“show anonymous classes”后其功能相当于Eclipse中的ctrl+o<br><img src="http://zlv.me/pics/14-ctrl+f12.gif" alt=""></p>
<p><strong> The Call Hierarchy Popup</strong> </p>
<blockquote>
<p>ctrl+alt+h </p>
</blockquote>
<p>查看某个方法的调用路径。<br><img src="http://zlv.me/pics/14-ctrl+alt+h.gif" alt=""></p>
<p><strong> Quick Definition Lookup</strong> </p>
<blockquote>
<p>ctrl+shift+i </p>
</blockquote>
<p>不离开当前文件当前类的情况下快速查看某个方法或者类的实现。通过大概预览下调用的方法，可以避免许多未知的坑。<br><img src="http://zlv.me/pics/14-ctrl+shift+i.gif" alt=""></p>
<p><strong> Bookmarks!</strong><br>如其名，书签。帮助快速回到指定的位置，实际使用中简直爽得不行。</p>
<blockquote>
<p>f11 </p>
</blockquote>
<p>将当前位置添加到书签中或者从书签中移除。 </p>
<blockquote>
<p>shift+f11 </p>
</blockquote>
<p>显示有哪些书签。<br><img src="http://zlv.me/pics/14-Bookmarks.gif" alt=""></p>
<p><strong> Find Actions</strong> </p>
<blockquote>
<p>ctrl+shift+a </p>
</blockquote>
<p>对于没有设置快捷键或者忘记快捷键的菜单或者动作（Action），可能通过输入其名字快速调用。神技！！！<br>例如想要编译，只需要输入”release”，则列表框中就会出现”assembleRelease”选项，选择就可以进行编译。<br><img src="http://zlv.me/pics/14-FindActions.gif" alt=""></p>
<p><strong> Move Lines Up/Down</strong> </p>
<blockquote>
<p>alt+shift+up/down </p>
</blockquote>
<p>上下移动行，这个没什么好说的，肯定会用到。<br><img src="http://zlv.me/pics/14-MoveLinesUpDown.gif" alt=""></p>
<p><strong> Lines Edit</strong></p>
<blockquote>
<p>ctrl+y，ctrl+x, ctrl+d </p>
</blockquote>
<p>删除行，删除并复制行，复制行并粘贴，必备。<br><strong> VCS Operations Popup</strong> </p>
<blockquote>
<p>Alt+`(是1左边的那个键) </p>
</blockquote>
<p>此快捷键会显示一个版本管理常用的一个命令，可以通过命令前面的数字或者模糊匹配来快速选择命令。<br>极大的提高了工作效率，快速提交代码、暂存代码、切分支等操作操作如鱼得水。<br><img src="http://zlv.me/pics/14-vcspopup.gif" alt=""></p>
<p><strong> Hide All Panels</strong> </p>
<blockquote>
<p>ctrl+shift+f12 </p>
</blockquote>
<p>关闭或者恢复其他窗口。在编写代码的时候非常方便的全屏编辑框，可以更加专心的coding…<br><img src="http://zlv.me/pics/14-hideallwindows.gif" alt=""></p>
<p><strong> Parameter Info</strong> </p>
<blockquote>
<p>ctrl+p </p>
</blockquote>
<p>在调用一些方法的时候免不了会忘记或者不知道此方法需要哪些参数。ctrl+p可以显示出此方法需要的参数。必备技能之一。<br><strong> Rename</strong> </p>
<blockquote>
<p>shift+f6 </p>
</blockquote>
<p>重命名变量或者方法名。重构神技。<br><img src="http://zlv.me/pics/14-rename.gif" alt=""></p>
<h2 id="条件断点"><a href="#条件断点" class="headerlink" title="条件断点"></a>条件断点</h2><p>通过右键断点，可以对一个断点加入条件。只有当满足条件时，才会进入到断点中。调试神技，只对自己关心的情况进行调试，不浪费时间。<br><img src="http://zlv.me/pics/14-conditionalbreakpoint.gif" alt=""></p>
<h2 id="进入调试模式"><a href="#进入调试模式" class="headerlink" title="进入调试模式"></a>进入调试模式</h2><p>点击Attach Debugger(即绿色小虫旁边那个)可以快速进入调试而不需要重新部署和启动app。<br>可以选择为此功能设置一个快捷键或者通过前面提到的Find Actions(ctrl+shift+a)输入”attach”进行调用。<br><img src="http://zlv.me/pics/14-attachdebugger.gif" alt=""></p>
<h2 id="快速查看变量的值"><a href="#快速查看变量的值" class="headerlink" title="快速查看变量的值"></a>快速查看变量的值</h2><p>按住Alt点击想要查看的变量或者语句。如果想查看更多，则可以按Alt+f8调出Evaluate Expression窗口来自行输入自定义的语句。<br><img src="http://zlv.me/pics/14-mouse_evaluate_expression.gif" alt=""></p>
<h2 id="分析堆栈信息"><a href="#分析堆栈信息" class="headerlink" title="分析堆栈信息"></a>分析堆栈信息</h2><p>Find Actions(ctrl+shift+a)输入”analyze stacktrace”即可查看堆栈信息。<br><img src="http://zlv.me/pics/14-analyzestacktrace.gif" alt=""></p>
<h2 id="分析某个值的来源"><a href="#分析某个值的来源" class="headerlink" title="分析某个值的来源"></a>分析某个值的来源</h2><p>Find Actions(ctrl+shift+a)输入”Analyze Data Flow to Here”，可以查看某个变量某个参数其值是如何一路赋值过来的。<br>对于分析代码非常有用。<br><img src="http://zlv.me/pics/14-analyzedataflow.gif" alt=""></p>
<h2 id="多行编辑"><a href="#多行编辑" class="headerlink" title="多行编辑"></a>多行编辑</h2><p>强大的神技之一，用过vim的vim-multiple-cursors或者Sublime Text的多行编辑都不会忘记那种快感！ 也许不是平时用得最多的技能，但是却是关键时刻提高效率的工具。<br>快捷键：Alt+J<br><img src="http://zlv.me/pics/14-multiselection.gif" alt=""></p>
<h2 id="列编辑"><a href="#列编辑" class="headerlink" title="列编辑"></a>列编辑</h2><p>在vim中叫作块编辑，同样神技！使用方法：按住Alt加鼠标左键拉框即可<br>PS：发现Ubuntu下不可用，代替方法为按Alt+Shift+Insert之后拖框选择。<br>但是经过这么操作之后，神技就大打折扣了。估计是与Ubuntu的快捷键冲突了。<br><img src="http://zlv.me/pics/14-columnselection.gif" alt=""></p>
<h2 id="Enter和Tab在代码提示时的区别"><a href="#Enter和Tab在代码提示时的区别" class="headerlink" title="Enter和Tab在代码提示时的区别"></a>Enter和Tab在代码提示时的区别</h2><p>看图!<br><img src="http://zlv.me/pics/14-codecompletionentertab.gif" alt=""></p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="http://zlv.me/posts/2015/07/13/14_android-studio-tips/" target="_blank" rel="external">原文链接</a><br><a href="">Android Studio Tips Of the Day - Roundup #1</a><br><a href="">Android Studio Tips Of the Day - Roundup #2</a><br><a href="">Android Studio Tips Of the Day - Roundup #3</a><br><a href="">Android Studio Tips Of the Day - Roundup #4</a><br><a href="">Android Studio Tips Of the Day - Roundup #5</a><br><a href="">Android Studio Tips Of the Day - Roundup #6</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/11/06/android_as_shortkey/" data-id="cj4zxopm2000sq4nhyz6kxeer" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/android-studio/">android_studio</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/shortkey/">shortkey</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-article_humanism_chinese_wemen" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/11/06/article_humanism_chinese_wemen/" class="article-date">
  <time datetime="2015-11-06T01:34:29.000Z" itemprop="datePublished">2015-11-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/humanism/">humanism</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/06/article_humanism_chinese_wemen/">曾金燕：中国女性终其一生承受的暴力</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>生为中国女性，你难以有尊严地活成一个人，更不用说活成一个优雅的女人。</p>
</blockquote>
<p>从娘胎到坟墓，中国女性随时面临生死攸关的暴力。这些暴力威胁，不能不说是她所处的社会、制度、文化结构造成的。</p>
<p>娘胎时，因父母长辈想要男孩，B超显影发现是女婴后，流产。如果母亲是张秉爱这样贫困家庭的女子，要更长的时间来攒够流产的手术费，可能得拖到胎儿五六个月大才流产（纪录片《秉爱》，冯艳，2007）。如果不幸投胎在山东省，赶上当地政府发起的“百日无孩”运动，不管你是男是女，合法的第一胎还是不合法的超指标胎儿，统统强制流产。万幸活到临产，但却是家里第二胎，计生官员和乡镇干部也要将你母亲抓去强制引产，纵使你哇哇哭，也是一样扔到粪池中。“粪池婴儿”成为许多人的噩梦，但被蛆吃了、分解了，就成了受欢迎的农家肥。<br><img src="https://d3rhr7kgmtrq1v.cloudfront.net/media/de108d455ba44bd0ba60c4b6e5452025.jpg?imageView2/1/w/1080/h/720/format/jpg" alt=""><br>冯艳作品，纪录片《秉爱》剧照。</p>
<p>好不容易从娘胎里出来，因为是女孩，被父母装在行李包里扔在广东东莞路边。好心的湖南籍打工者看见了，捡起来喂养，取名“袁庆龄”，和中国人民共和国名誉主席宋庆龄同名不同姓。春节过后，父母要外出打工，庆龄由姨婆代养。庆龄还不到一岁，被计生干部冲进家里以“非法收养”名义抢走，和其他因“非法收养”或超生被抢走没收的女孩，送进孤儿院，成为“邵氏孤儿”。父母们得到音讯赶回家找孩子时，孩子已经被政府孤儿院的“海外收养”项目以高额收养费（人均约5000美元收养费）“卖”到美国、荷兰等发达国家。</p>
<p>1992年《中华人民共和国收养法》出台后，仅美国人就收养了超过七万名中国孤儿、弃婴。在海外收养家庭长大的女童事后回顾，也许要庆幸不用生活在中国。</p>
<p>活下来的女孩，最好不要有哥哥弟弟，否则家里一有什么变故，辍学、缺衣少食、外出打工、早早远嫁他乡的，是你而不是弟弟。父母外出打工没人管（纪录片《三姊妹》王兵，2013），也千万别学贵州毕节儿童自杀。好不容易上学上到六年级，却被海南万宁校长带出去开房，作为送给房管局官员的“礼物”（纪录片The Road from Hainan，王男袱，2016）。<br><img src="https://d3rhr7kgmtrq1v.cloudfront.net/media/7292fe34c4954ebb83fb10e44c1e84a2.jpg?imageView2/1/w/1080/h/720/format/jpg" alt=""><br>王兵作品，纪录片《三姊妹》剧照。</p>
<p>或者被成年“男朋友”拐走，发生性关系，被挟持卖淫，被轮奸。派出所不出警？但愿你的妈妈和唐慧一样“疯狂”，以“跳楼”逼警察作为，哪怕进劳教所也在所不惜，要将你救出来，为你治疗“创伤后应急精神障碍”和“性病”。和唐慧一样疯狂的，是同在湖南省的黄静妈妈黄淑华。裸体多处带伤死在宿舍的黄静，怎么可能是病死？派出所所长说，做爱时掐几把女人，算不了什么，不立案侦查。不性交处女膜当然不会破，骑在胸上乳交也是性行为。黄静不能开口但她的尸体在说话，即使谈恋爱，强迫我做爱我才会死（纪录片《天堂花园》，艾晓明、胡杰，2005）。</p>
<p>活下来多么不容易，农村城市都有广阔天地，应该出去闯荡人生。谁知一出门就被拐卖到大山里做媳妇，捆在小黑屋里打了又打，好不容易逃出门，派出所和村民一起将你抓住送回夫家，因为大山里娶媳妇都不容易。有多少云南和各省份的女子被层层倒卖不知所踪（纪录片《新娘》，潘剑林，2002），被倒手转卖活成郜艳敏是一个奇迹。她被打怕了，被强暴怕了，关小黑屋关怕了，子女也生了。渐渐地初中毕业的郜艳敏得到当地村民认可，当上代课老师，教养打她、抓她的村民的孩子，而且还获得丈夫许可，回河南省的娘家看父母。亲生爹娘说，拐卖也罢，生米已经煮成熟饭，孙儿也有了，回到娘家再嫁反而更困难，不如体谅夫家当年买你花了不少钱，家里也贫困，就和他们生活吧。郜艳敏于是“成长”为一名党员，一名“2006年感动河北十大年度人物”，经历还被拍成电影《嫁给大山的女人》，成为政府宣传的“转型成功”的出色女性。</p>
<p>幸好你生在一个比较文明的家庭，父母供养着上大学乃至出国留学，获得高薪高职位。不过，教育部对词语做了定义，过了27岁还不结婚，那就是“剩女”，存在价值越来越低。商业公司也看到机会，打广告逼婚。政府政策也罢，用人单位也罢，总而言之，需要牺牲的，女性先上；派发红利的，男人优先。</p>
<p>贵州毕节女教师被校长逼迫着陪酒被灌醉，随后被政府官员强奸。警方不立案的缘由是“戴套不算强奸”。同样被校领导逼迫陪酒后被强奸的事情，反复发生在江苏一名女教师身上。不堪忍受的她在新婚前跳楼自杀。官场女性面临的性骚扰、性胁迫更是数不胜数。他们说，要学会享受强奸，要学会利用年轻美貌的性，帮助你升官发财。</p>
<p>终于结婚不用做剩女了？你眼角的黑块是什么？撞到卫生间马桶？他向你道歉，哭着跪在你跟前，说一定会改变，不再打你。三次、五次以后，你向妇联、居委会、派出所求助，却被踢皮球一样踢回那个原本应该是生命中最亲密的男人。爸爸妈妈担心你离婚后一无所有更难再嫁，再嫁的男人也未必不打你。因为宅基地和财产都登记丈夫名下，实在忍受不了，你或者像李彦一样杀了他，或者一无所有地离开了他，或者……你要是像Kim那么幸运生于美国嫁给中国人，纵使网友骂你不懂中国文化；纵使你的丈夫李阳为你们共同创办的产业“疯狂英语”做讲座大受欢迎；你还是有能力获得公众尤其是女权主义者的支持，带着孩子摆脱家暴的噩梦。</p>
<p>女子监狱毕节的人们可没那么幸运，她们的暴力犯罪背后，往往有个施暴的父亲或丈夫，无处可去的她们，只有以暴制暴。不少女人为了养家、或为了逃离畸形的家庭压迫、或为了追求高不可攀的都市生活和完美理想的亲密关系，从事性工作，成为五千亿性产业产值的一名贡献者，和警察扫黄工作中罚款、殴打、收容教育的受害者。</p>
<blockquote>
<p>受过高等教育的女子，遭遇拳打脚踢的机会可能降低了。她可能是幸福的，也可能是不幸的。冷暴力，同性恋骗婚，丈夫长时间在家庭、育儿生活里缺位，你成为事实上的寡妇、单亲母亲。甚至你的生活更加悲惨，因为除了养育自己生产的孩子，还有可能要养育那个和你性交的、永远长不大的“类人孩”。</p>
</blockquote>
<p>当然，比起良心犯家庭的女人，你的处境也许还要好一些。至少不至于“软禁、羞辱、丢掉工作、流产、殴打、子女被歧视……”同时一齐发生在你身上，叫天天不应叫地地不灵。你不知教育孩子遇到危险时该怎么办，因为对你施加伤害的，正是不用接受审查、审计的秘密警察。</p>
<p>不管你有没有生育梦想，作为普通女人难以逃脱计划生育大网。结扎，女人上；上环，女人上。见面问候，你上环了吗？就业、升迁、加薪，人事部首先问，你的子宫怎么样？相关证件都备齐？需要的时候，你是生产力，不需要的时候，你最好一边去。生孩子，是给国家输送劳动力，目前经济形势不太好，人口结构失调危机的影响越来越大，不如都生二胎吧！</p>
<p>国家不养老，低保轮不到你头上，儿子们也只能外出打工，多几个儿子又能怎么样？你病危在床，几年未归家的儿子们，从南方工厂请假回家，一天、两天、三四天，儿子们不耐烦了：你怎么还不死，再不回去工厂就要开除我了！孩子们上学都还等着用钱。结果，你只好停止吃东西，活活将自己饿死，好让孩子们办丧事。</p>
<p>躺在坟墓里回顾你的一生，你不是没有努力过。但这个社会扼杀了你太多的机会。你无法有尊严地活成一个人，更不用说活成一个优雅的女人。</p>
<p>（曾金燕，香港大学社会工作及社会行政学系博士候选人，中国独立纪录片研究会发起人）</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/11/06/article_humanism_chinese_wemen/" data-id="cj4zxoppa004nq4nhb0m9atdz" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/chinese-weman/">chinese_weman</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/feminism/">feminism</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/humanism/">humanism</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-tools_sublime_text3_shortkey" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/11/05/tools_sublime_text3_shortkey/" class="article-date">
  <time datetime="2015-11-05T09:25:29.000Z" itemprop="datePublished">2015-11-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/tools/">tools</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/05/tools_sublime_text3_shortkey/">sublime实用功能和常用快捷键[Windows]</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>下面是sublime Text3的一些实用功能和常用快捷键介绍。ST3在Mac OX与Windows不同平台下的快捷键差别很大。注意下面是针对windows平台的解说。</p>
<h2 id="1-可以直接打开图片"><a href="#1-可以直接打开图片" class="headerlink" title="1. 可以直接打开图片"></a>1. 可以直接打开图片</h2><p>版本3有个很好的特性（对于前端来说）：可以直接在ST3中打开图片。</p>
<h2 id="2-Goto-Anything功能-—-快速查找（ctrl-P）"><a href="#2-Goto-Anything功能-—-快速查找（ctrl-P）" class="headerlink" title="2. Goto Anything功能 — 快速查找（ctrl + P）"></a>2. Goto Anything功能 — 快速查找（ctrl + P）</h2><ul>
<li>输入@+函数名可以快速找到函数。</li>
<li>输入#+文本可以快速进行文件内文本匹配。<h2 id="3-多行游标功能（ctrl-D，非常实用）"><a href="#3-多行游标功能（ctrl-D，非常实用）" class="headerlink" title="3. 多行游标功能（ctrl + D，非常实用）"></a>3. 多行游标功能（ctrl + D，非常实用）</h2>如何将文件中的某个单词更改为另一个？<br>方法一：利用查找替换功能：ctrl + H（类似于很多编辑器，如NotePad++）<br>方法二：多行游标功能，选中一个后，按ctrl+D可以同时选中另一个，同时多了另一个光标。<br>但多行游标能完成查找替换功能不能完成的工作。<br>比如在某些符合条件的语句后面添加新行，同时加入一些新的文本，如何快速的达到这一目的？</li>
<li>可以选中某一个模式，然后ctrl+D选中另一个，如果有某些不想添加新行的模式则按ctrl+K，ctrl+D跳过这个进入下一个符合条件的模式行。</li>
<li>还可以按Alt + F3快捷键全选所有符合条件的单词，产生多个光标，而不用一个个ctrl+D选中。</li>
<li>如果要在每行都加入光标，可以先ctrl+A然后ctrl+shift+L即可。</li>
<li>如果想在某个字符的多行后面加上光标，可以将光标放在这个字符后面，按住shift键，然后右键可以向下拖动产生多个光标。<h2 id="4-命令模式（推荐）"><a href="#4-命令模式（推荐）" class="headerlink" title="4. 命令模式（推荐）"></a>4. 命令模式（推荐）</h2>比如用ctrl+N新建一个文件后，默认是plain text，没有语法高亮功能，如何设置语法模式？</li>
<li>可以通过右下角的语法选择区选择希望设置的语法模式。</li>
<li>还有另一种更好的办法，即使用ctrl + shift + P打开命令模式，然后输入set syntax [language]设置为某种语言的语法模式，比如set syntax java则设置为java语法高亮。</li>
<li>st3支持模糊匹配，你也可以直接输入syntax java或ssjava。</li>
<li>若当前已经是某种语言的语法模式，则可以直接输入其它语言进行切换（而不用输入set syntax或syntax了），比如当然为java语法模式，那么直接输入js就可以马上切换为javascript语法模式。<br>还可以输入minimap隐藏或显示右边的minimap缩影<h2 id="5-快速跳转到某一行"><a href="#5-快速跳转到某一行" class="headerlink" title="5. 快速跳转到某一行"></a>5. 快速跳转到某一行</h2>按下Ctrl + G，输入行号，可以快速跳转到该行。（NotePad也是一样）<h2 id="6-快速添加新行"><a href="#6-快速添加新行" class="headerlink" title="6. 快速添加新行"></a>6. 快速添加新行</h2></li>
<li>Ctrl + Enter可以在当前行下新建一行。</li>
<li>Ctrl + Shift + Enter可以在当前行上面添加一行。<h2 id="7-多行缩进"><a href="#7-多行缩进" class="headerlink" title="7. 多行缩进"></a>7. 多行缩进</h2>选中多行后按Ctrl + ]可以增加缩进，按Ctrl + [可以减少缩进。<br>PS：发现用Tab和Shift + Tab也是可以的。<h2 id="8-完整拷贝，避免格式错乱"><a href="#8-完整拷贝，避免格式错乱" class="headerlink" title="8. 完整拷贝，避免格式错乱"></a>8. 完整拷贝，避免格式错乱</h2>我们发现，在从别的文件中拷贝一段代码过来的时候，多半只是第一行缩进，后面都乱了，这时可以使用Ctrl + Shift + V进行粘贴，可以在粘贴的过程中保持缩进，这时格式都是正确的。<h2 id="9-重新打开关闭的标签"><a href="#9-重新打开关闭的标签" class="headerlink" title="9. 重新打开关闭的标签"></a>9. 重新打开关闭的标签</h2>在Chrome里面，如果你不小心关闭了某个标签页并想恢复它，你可以按下Shift + Ctrl + T重新打开它。<br>在ST3中也一样，如果你不小心关闭了某个文件，可以按下Shift + Ctrl + T快速恢复。连续重复该按键，ST将会按照关闭的先后顺序重新打开标签页。<h2 id="10-按住shift-ctrl然后按←或→可快速选中一行中的某一部分，连续按扩大选择范围。"><a href="#10-按住shift-ctrl然后按←或→可快速选中一行中的某一部分，连续按扩大选择范围。" class="headerlink" title="10. 按住shift + ctrl然后按←或→可快速选中一行中的某一部分，连续按扩大选择范围。"></a>10. 按住shift + ctrl然后按←或→可快速选中一行中的某一部分，连续按扩大选择范围。</h2>比如你需要将某一部分进行注释(ctrl+/)或删除，使用这个功能就很方便。<h2 id="11-上下移动行"><a href="#11-上下移动行" class="headerlink" title="11. 上下移动行"></a>11. 上下移动行</h2>定位光标或选中某块区域，然后按shift+ctrl+↑↓可以上下移动该行。<h2 id="12-shift-ctrl-d可快速复制光标所在的一整行，并复制到该行之前。"><a href="#12-shift-ctrl-d可快速复制光标所在的一整行，并复制到该行之前。" class="headerlink" title="12. shift + ctrl + d可快速复制光标所在的一整行，并复制到该行之前。"></a>12. shift + ctrl + d可快速复制光标所在的一整行，并复制到该行之前。</h2><h2 id="13-Ctrl-Shift-M：选中花括号里面的全部内容不包括-。"><a href="#13-Ctrl-Shift-M：选中花括号里面的全部内容不包括-。" class="headerlink" title="13. Ctrl+Shift+M：选中花括号里面的全部内容不包括{}。"></a>13. Ctrl+Shift+M：选中花括号里面的全部内容不包括{}。</h2><h2 id="14-Ctrl-Shift-K：删除整行。"><a href="#14-Ctrl-Shift-K：删除整行。" class="headerlink" title="14. Ctrl+Shift+K：删除整行。"></a>14. Ctrl+Shift+K：删除整行。</h2><h2 id="15-快速关闭HTML里的标签"><a href="#15-快速关闭HTML里的标签" class="headerlink" title="15. 快速关闭HTML里的标签"></a>15. 快速关闭HTML里的标签</h2>写html文件时利用快捷键Alt + .可以快速关闭某个标签，如写<html>后按Alt+.可以快速得到</html>。<br>但这样还是挺繁琐，可以使用前端插件Emmet插件，直接在新建的html文件里（首先得设置语法模式为html）直接输入!（代表html5格式的html文档）然后按下ctrl+E即可。</li>
</ul>
<h3 id="附：如何安装package-control"><a href="#附：如何安装package-control" class="headerlink" title="附：如何安装package control"></a>附：如何安装package control</h3><p>通过快捷键ctrl+` 或者View &gt; Show Console 菜单打开控制台，输入下面Python执行代码（适用于Python3.x解释器）：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> urllib.request,os; pf=<span class="string">'Package Control.sublime-package'</span>; ipp = sublime.installed_packages_path(); os.makedirs( ipp ) <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(ipp) <span class="keyword">else</span> <span class="keyword">None</span>; urllib.request.install_opener( urllib.request.build_opener( urllib.request.ProxyHandler( ))); open( os.path.join( ipp, pf), <span class="string">'wb'</span> ).write( urllib.request.urlopen( <span class="string">'http://sublime.wbond.net/'</span> +pf.replace( <span class="string">' '</span>,<span class="string">'%20'</span> )).read()); print( <span class="string">'Please restart Sublime Text to finish installation'</span>)</div></pre></td></tr></table></figure></p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li><a href="http://www.cnblogs.com/lanxuezaipiao/p/4151095.html" target="_blank" rel="external">原文链接</a></li>
<li><a href="http://www.imooc.com/view/40?utm_source=jobboleblog" target="_blank" rel="external">前端开发工具技巧介绍—Sublime篇</a></li>
<li><a href="http://www.cnblogs.com/lhb25/p/10-essential-sublime-text-plugins.html" target="_blank" rel="external">全栈开发必备的10款 Sublime Text 插件</a></li>
<li><a href="http://www.cnblogs.com/liun1994/p/3692488.html" target="_blank" rel="external">Sublime Text shift+ctrl妙用</a></li>
<li><a href="http://www.cnblogs.com/wayou/p/highlight_code_with_sublimetext_style.html" target="_blank" rel="external">如何在博客中使用SublimeText风格的代码高亮样式</a></li>
<li><a href="http://www.jianshu.com/p/378338f10263" target="_blank" rel="external">sublime text 2 下的Markdown写作</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/11/05/tools_sublime_text3_shortkey/" data-id="cj4zxopq5006kq4nhmixt01wy" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/sublime/">sublime</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-music_folk_playlist" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/11/05/music_folk_playlist/" class="article-date">
  <time datetime="2015-11-05T07:23:29.000Z" itemprop="datePublished">2015-11-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/music/">music</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/05/music_folk_playlist/">我喜欢的民谣歌曲</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>现在才知道markdown支持网易外链，直接将iframe代码放进markdown文件就可以了，宽度和高度可以自由设置。</p>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="100%" height="400" src="http://music.163.com/outchain/player?type=0&id=67001575&auto=0&height=430"></iframe>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/11/05/music_folk_playlist/" data-id="cj4zxoppa0051q4nhvsblaqhz" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iframe/">iframe</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/markdown/">markdown</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/music/">music</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/page/7/">&laquo; __('prev')</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="page-number" href="/page/7/">7</a><span class="page-number current">8</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/9/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/algorithm/">algorithm</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/android/">android</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/article/">article</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/coding/">coding</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/">database</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/framework/">framework</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/humanism/">humanism</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/message-push/">message_push</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/music/">music</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/ndk/">ndk</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/note/">note</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/protocol/">protocol</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/reading/">reading</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/springmvc/">springmvc</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/string/">string</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/study/">study</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/tools/">tools</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/versioncontroll/">versioncontroll</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/">web</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/好文/">好文</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/电影/">电影</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/AliPay/">AliPay</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Einstein/">Einstein</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GreenDao/">GreenDao</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ORMLite/">ORMLite</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WXPay/">WXPay</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/activity/">activity</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/android-studio/">android_studio</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/android-ui/">android_ui</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/androidstudio/">androidstudio</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/application/">application</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/book/">book</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/broadcast/">broadcast</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bugfix/">bugfix</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/chinese-weman/">chinese_weman</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/code-collection/">code_collection</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/context/">context</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/database/">database</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/decomplication/">decomplication</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/design-model/">design model</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/eclipse/">eclipse</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/eventbus/">eventbus</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/feminism/">feminism</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fullstack/">fullstack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/">github</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/google/">google</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gradle/">gradle</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/handle/">handle</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/handler/">handler</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/http/">http</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/https/">https</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/humanism/">humanism</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iframe/">iframe</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/image/">image</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/imageloader/">imageloader</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/intent/">intent</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/intentflag/">intentflag</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iphone/">iphone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jni/">jni</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/listview/">listview</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/markdown/">markdown</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/material-design/">material_design</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/maven/">maven</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/music/">music</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mvp/">mvp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nd/">nd</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/notification/">notification</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/obfuscation/">obfuscation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/observer/">observer</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/opensource/">opensource</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/otto/">otto</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pageradapter/">pageradapter</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pay/">pay</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/placeholder/">placeholder</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/project-build/">project_build</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pulltorefresh/">pulltorefresh</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pulltorefreshlistview/">pulltorefreshlistview</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/saxophone/">saxophone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/screen-record/">screen-record</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shortkey/">shortkey</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/snack/">snack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/socket/">socket</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sort/">sort</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spannable/">spannable</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/speech/">speech</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/springmvc/">springmvc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sqlite/">sqlite</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssl/">ssl</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sublime/">sublime</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/svg/">svg</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/svn/">svn</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/templates/">templates</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/textview/">textview</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tomcat/">tomcat</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/translate/">translate</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/viewpager/">viewpager</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/volley/">volley</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/website/">website</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webview/">webview</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xpnet/">xpnet</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/书单/">书单</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/史玉柱/">史玉柱</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/感悟/">感悟</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/电影/">电影</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/贾樟柯/">贾樟柯</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/AliPay/" style="font-size: 10px;">AliPay</a> <a href="/tags/Einstein/" style="font-size: 10px;">Einstein</a> <a href="/tags/GreenDao/" style="font-size: 10px;">GreenDao</a> <a href="/tags/ORMLite/" style="font-size: 10px;">ORMLite</a> <a href="/tags/WXPay/" style="font-size: 10px;">WXPay</a> <a href="/tags/activity/" style="font-size: 10px;">activity</a> <a href="/tags/android-studio/" style="font-size: 10px;">android_studio</a> <a href="/tags/android-ui/" style="font-size: 10px;">android_ui</a> <a href="/tags/androidstudio/" style="font-size: 20px;">androidstudio</a> <a href="/tags/animation/" style="font-size: 20px;">animation</a> <a href="/tags/application/" style="font-size: 10px;">application</a> <a href="/tags/book/" style="font-size: 10px;">book</a> <a href="/tags/broadcast/" style="font-size: 10px;">broadcast</a> <a href="/tags/bugfix/" style="font-size: 13.33px;">bugfix</a> <a href="/tags/chinese-weman/" style="font-size: 10px;">chinese_weman</a> <a href="/tags/code-collection/" style="font-size: 10px;">code_collection</a> <a href="/tags/context/" style="font-size: 10px;">context</a> <a href="/tags/database/" style="font-size: 10px;">database</a> <a href="/tags/decomplication/" style="font-size: 10px;">decomplication</a> <a href="/tags/design-model/" style="font-size: 13.33px;">design model</a> <a href="/tags/eclipse/" style="font-size: 10px;">eclipse</a> <a href="/tags/eventbus/" style="font-size: 10px;">eventbus</a> <a href="/tags/feminism/" style="font-size: 10px;">feminism</a> <a href="/tags/fullstack/" style="font-size: 10px;">fullstack</a> <a href="/tags/github/" style="font-size: 13.33px;">github</a> <a href="/tags/google/" style="font-size: 10px;">google</a> <a href="/tags/gradle/" style="font-size: 16.67px;">gradle</a> <a href="/tags/handle/" style="font-size: 10px;">handle</a> <a href="/tags/handler/" style="font-size: 10px;">handler</a> <a href="/tags/hexo/" style="font-size: 16.67px;">hexo</a> <a href="/tags/http/" style="font-size: 10px;">http</a> <a href="/tags/https/" style="font-size: 10px;">https</a> <a href="/tags/humanism/" style="font-size: 10px;">humanism</a> <a href="/tags/iframe/" style="font-size: 10px;">iframe</a> <a href="/tags/image/" style="font-size: 10px;">image</a> <a href="/tags/imageloader/" style="font-size: 20px;">imageloader</a> <a href="/tags/intent/" style="font-size: 10px;">intent</a> <a href="/tags/intentflag/" style="font-size: 13.33px;">intentflag</a> <a href="/tags/iphone/" style="font-size: 10px;">iphone</a> <a href="/tags/jni/" style="font-size: 10px;">jni</a> <a href="/tags/listview/" style="font-size: 10px;">listview</a> <a href="/tags/markdown/" style="font-size: 10px;">markdown</a> <a href="/tags/material-design/" style="font-size: 10px;">material_design</a> <a href="/tags/maven/" style="font-size: 10px;">maven</a> <a href="/tags/music/" style="font-size: 13.33px;">music</a> <a href="/tags/mvp/" style="font-size: 10px;">mvp</a> <a href="/tags/mysql/" style="font-size: 16.67px;">mysql</a> <a href="/tags/nd/" style="font-size: 10px;">nd</a> <a href="/tags/notification/" style="font-size: 10px;">notification</a> <a href="/tags/obfuscation/" style="font-size: 10px;">obfuscation</a> <a href="/tags/observer/" style="font-size: 10px;">observer</a> <a href="/tags/opensource/" style="font-size: 13.33px;">opensource</a> <a href="/tags/otto/" style="font-size: 10px;">otto</a> <a href="/tags/pageradapter/" style="font-size: 10px;">pageradapter</a> <a href="/tags/pay/" style="font-size: 13.33px;">pay</a> <a href="/tags/placeholder/" style="font-size: 10px;">placeholder</a> <a href="/tags/project-build/" style="font-size: 10px;">project_build</a> <a href="/tags/pulltorefresh/" style="font-size: 10px;">pulltorefresh</a> <a href="/tags/pulltorefreshlistview/" style="font-size: 13.33px;">pulltorefreshlistview</a> <a href="/tags/saxophone/" style="font-size: 10px;">saxophone</a> <a href="/tags/screen-record/" style="font-size: 10px;">screen-record</a> <a href="/tags/shortkey/" style="font-size: 10px;">shortkey</a> <a href="/tags/snack/" style="font-size: 10px;">snack</a> <a href="/tags/socket/" style="font-size: 10px;">socket</a> <a href="/tags/sort/" style="font-size: 13.33px;">sort</a> <a href="/tags/spannable/" style="font-size: 10px;">spannable</a> <a href="/tags/speech/" style="font-size: 10px;">speech</a> <a href="/tags/springmvc/" style="font-size: 10px;">springmvc</a> <a href="/tags/sqlite/" style="font-size: 10px;">sqlite</a> <a href="/tags/ssl/" style="font-size: 13.33px;">ssl</a> <a href="/tags/sublime/" style="font-size: 10px;">sublime</a> <a href="/tags/svg/" style="font-size: 13.33px;">svg</a> <a href="/tags/svn/" style="font-size: 13.33px;">svn</a> <a href="/tags/templates/" style="font-size: 10px;">templates</a> <a href="/tags/textview/" style="font-size: 10px;">textview</a> <a href="/tags/tomcat/" style="font-size: 16.67px;">tomcat</a> <a href="/tags/translate/" style="font-size: 10px;">translate</a> <a href="/tags/viewpager/" style="font-size: 13.33px;">viewpager</a> <a href="/tags/volley/" style="font-size: 10px;">volley</a> <a href="/tags/website/" style="font-size: 13.33px;">website</a> <a href="/tags/webview/" style="font-size: 10px;">webview</a> <a href="/tags/xpnet/" style="font-size: 13.33px;">xpnet</a> <a href="/tags/书单/" style="font-size: 10px;">书单</a> <a href="/tags/史玉柱/" style="font-size: 10px;">史玉柱</a> <a href="/tags/感悟/" style="font-size: 10px;">感悟</a> <a href="/tags/电影/" style="font-size: 10px;">电影</a> <a href="/tags/贾樟柯/" style="font-size: 10px;">贾樟柯</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">February 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/11/11/study_my_website_collection/">常用网站收集</a>
          </li>
        
          <li>
            <a href="/2016/05/04/web_develop_config/">WEB开发之环境配置</a>
          </li>
        
          <li>
            <a href="/2016/05/04/web_springmvc1/">Spring MVC入门(一)</a>
          </li>
        
          <li>
            <a href="/2016/04/07/android_network_ssl/">为你的Android App实现自签名的SSL证书</a>
          </li>
        
          <li>
            <a href="/2016/03/28/android_notification_push/">Android实现推送方式解决方案</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 ARESXIONG<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>