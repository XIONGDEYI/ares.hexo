<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>ARESXIONG</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="ARESXIONG">
<meta property="og:url" content="http://yoursite.com/page/5/index.html">
<meta property="og:site_name" content="ARESXIONG">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ARESXIONG">
  
    <link rel="alternate" href="/atom.xml" title="ARESXIONG" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">ARESXIONG</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-article_we_have_no_choice_but_to_work_hard" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/03/article_we_have_no_choice_but_to_work_hard/" class="article-date">
  <time datetime="2015-12-02T17:01:29.000Z" itemprop="datePublished">2015-12-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/好文/">好文</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/03/article_we_have_no_choice_but_to_work_hard/">除了努力，我们别无选择</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>略哥哥死的那年，我12岁，他14岁。<br>他骑着单车，经过一个漫着大水的堤坝，被卷入洪流。那天端午刚过，暑热乍起。几个在下流洗衣的妇人，听见扑腾的声音，以为是一条白色的大鱼。<br>第二天午后，父亲和叔伯们在很远的水流里，找到衣衫褴褛污渍横陈，已经不会再睁开眼睛的他。<br>我聪慧得无以复加的略哥哥，象棋下得无人能及的略哥哥，那个站在黄昏的篱笆前，食指一曲一张，将扑克弹得满天飞的略哥哥，就这样走了。<br>我从学校赶到他家时，他正躺在一个小小的棺椁里，就像和我捉一个迷藏，而他永远地赢了。<br>伯父和伯母像被抽空了骨头，他们被人围着，一开口，眼泪就滚滚而流。<br>但终于到了最后的送别。<br>第三天午后，那支白色的队伍，停在一块向南的山坡，将略哥哥放了下来。<br>那里开阔明净，草浅风轻，对面还有一个日夜通明的加油站。看风水的先生说：坟头对着光，他就能看清方向，找到路再回来。<br>伯母几次崩溃。<br>鸿哥哥扶着她，一遍遍地说，妈，你还有我，你还有我。</p>
<h2 id="壹"><a href="#壹" class="headerlink" title="壹"></a>壹</h2><p>我不知道这件事是不是最大的动因。<br>总而言之，后来，鸿哥哥就像个疯子一样努力。<br>有一年，家里穷得没有了办法，父亲邀了两个人，贩猪肉去南昌卖。肉卖完后，去医学院看鸿哥哥。他那时正在考研究生，努力得叫人害怕。<br>我父亲回来后，感叹说，我看他的同学，都是戏戏浪浪的，只有鸿哥哥，一刻不停地在看书……根本没有时间玩，一个多月没洗澡。你好好学着点啊……<br>一个真正竭尽全力的人，运气都不会差。<br>他果然顺利考上。<br>再以后，顺利考博，出国。28岁，他带着嫂子一起留美，36岁拿到美国绿卡，从此定居USA。在美时，他成为一上市公司的技术总监，早早就实现了财务自由，而在生物医学领域，又研发了分子检测的专利，近些年被中山大学聘为客座教授，带了一批博士生，还成立了自己的公司，牛逼得一塌糊涂。<br>前些天，他回国，我们一起吃饭。<br>我问他：“为什么这么努力呢？”<br>“除了努力，我们别无选择。”<br>又说到他当年的同学，大多安稳地呆在小地方，朝九晚五，早早就进入一种僵局。<br>“这不是生活简单，而是一种委顿和懒惰。我们一定要警惕。当一个人失去追求卓越的信念，平庸就开始了。”</p>
<h2 id="贰"><a href="#贰" class="headerlink" title="贰"></a>贰</h2><p>蛇蜕皮，蝉脱壳，毛毛虫破茧。<br>每一个从底层逆袭的人，没有一个不是脱层皮，或者掉身肉的。<br>这世上没有毫无道理的横空出世，所有的闪亮登场背后，都是多年苦心孤诣沉默不语的自我挑战，对极限的不断突破。</p>
<p><strong> 弱者相信运气，强者只信因果。</strong></p>
<p>我刚刚练习写作的时候，有一个前辈，曾给了我一个浅白但又至关重要的建议：</p>
<blockquote>
<p>别想那么多，你只要记得，任何人用十年时间，全神贯注、心无旁骛地做一件事，都会成为顶极人才。</p>
</blockquote>
<p>后来，我觉得他说太保险了。<br>只要用两年专注于一件事，就可以在业内“小荷才露尖尖角”。<br>用五年时间，就能成为佼佼者。</p>
<p>而十年，足够让你出类拔萃，成为明星。<br>丹尼尔·科伊尔的《一万小时天才理论》和马尔科姆·格拉德威尔的《异类》，也是同样的意思：人们眼中的天才，之所以卓越非凡，并非天资超人一等，而是付出了持续不断的努力。<br>1万小时的锤炼，是任何人从平凡变成超凡的必要条件。<br>达·芬奇至少画了10000小时，才有了《蒙娜丽莎》；莫扎特至少练习了10000小时，才写出了第九号协奏曲；比尔·盖茨设计了7年的程序，才有了微软。</p>
<p>达尔文说：<strong> “我一直认为除了傻子，人在智力上差别不大，不同的只是热情和努力。”</strong><br>真正决定一个人成就的，从来就不是天分，也不是运气，而是严格的自律和高强度的付出。</p>
<h2 id="叁"><a href="#叁" class="headerlink" title="叁"></a>叁</h2><p>我们都是滚滚红尘里，那最平凡的一些。但是，我们都有着隐秘的愿望：有更多的自由，有更多的选择，在更好的世界里生活。<br>为了实现这一点，你要做的只有两条：</p>
<p>1， 找准自己最擅长的，你最有可能倾注全部热情的，然后，紧紧抱着它，一头扎进去。</p>
<p>但努力，不是指在你缺乏兴趣的工作上使劲，而是在你觉得最不辜负此生的事上投入。<br>村上春树在《挪威的森林》里，借永泽的嘴，说过一句话。<br>“那不叫努力，只是劳动而已……我所说的努力不是这样。所谓努力，指的是主动而有目的的活动。”<br>找准之后，让它成为你锋利的刀斧，你精准的指南针，你稳固的梯子，你翘起梦想之国的杠杆。</p>
<p>2， 投入所有精力，不要管结果，不要听别人瞎BB。<br>就像费曼说的，“如果你喜欢一个事，又有这样的才干，那就把整个人都投入进去，就要像一把刀直扎下去直到刀柄一样，不要问为什么，也不要管会碰到什么。”</p>
<h2 id="肆"><a href="#肆" class="headerlink" title="肆"></a>肆</h2><p>最累的人，是最闲的人。<br>不努力很容易让我们陷入焦虑。<br>因为，我们会开始和自己交战。<br>一个自我想在庸常的生活里，像掉落沼泽的人一样陷下去。一个自我却不甘心，挣扎着要爬上来。<br>这种对抗与较劲，就会让我们痛苦，不仅不能让我们休息，反而会让我们无法宽恕自己，陷入焦虑，甚至抑郁。<br>然后，为了获得平衡，我们不再横向比较，减少与小伙伴们联络，变得自闭，眼光一直向下，向下。<br>但这种自我封闭，从来不是一件舒服的事，它伴随激烈的否定，绝望的挣扎，把自己往抑郁的深渊里愈推愈深。<br>在钟爱的事情上投入时间，开始创造，获得自我价值，对于我们，都是一种有益的疗救，而非消极的消耗。<br>维克多·弗兰克说，当一个人努力做一件事，或真心关爱一个人时，幸福便悄悄来临了。<br>而努力本身，也会给我们带来巨大的回报。<br>当我们沉潜于某一事物，完全忘我，完全融入，沉入一种超然的平静中，生命中真正的幸福便会来临。比物质的享受更甚，比他人的赞许更炒不可言。<br>当我懒惰的时候，是我病最重的时候。<br>当我努力的时候，是我最健康的时候。<br>就像那天席间，我还问了鸿哥哥一句话，“那么拼，是不是和略哥哥的事情有关？”<br>他说，有，但不全是。更多的，这是一种本能，如果不努力，会感觉不舒服。</p>
<h2 id="伍"><a href="#伍" class="headerlink" title="伍"></a>伍</h2><p>为什么我们要努力？</p>
<p><strong> 1， 因为我们是不甘平庸的年轻人。</strong><br>因为我们想有更多的自由与选择；<br>我们想生命更丰富；<br>我们想有更多的尊重与爱；<br>我们想有一天，能坐在偶像的对面，和他称兄道弟，而不是一直跪舔；<br>我们想有一天，能踏上那些喜欢的异国，坐在当地最负盛名的酒吧，用流利的英文，和一个青年说，我们那个国家，也有很多有趣的事情呢……而不是一直在这儿做白日梦。</p>
<p><strong> 2， 因为不努力，我们会焦虑。</strong></p>
<p>这世界高速运转，从来不会因为你的自动退伍，而停歇片刻。<br>而当你一停下，你会发现，朋友们都在竭尽全力地向前，他们朝气蓬勃，他们熠熠生辉，他们就在你梦想的路上，开始闪闪发亮。<br>这种社会比较一定会带给你巨大的痛苦，深度的自卑。<br>你会惧怕他们的消息，抗拒他们的接近，关紧心门，自毁双目，以纵容自己的失败。<br>简而言之，我们之所以要努力，无非要获得外界肯定，内心幸福。<br>如果你还有骨头，如果你还有血气，如果你也不服输，那么，别刷手机了，立刻，马上，把手头的工作干完。<br>不要找借口，不要拖延，不要沉溺于淘宝微信真人秀，不要参加无意义的社交。<br>全神贯注地，用10000个小时，去做一件你最想做好的事，然后，抵达你的梦想。<br>你没必要一开始就很厉害，但现在，你要开始去变得很厉害。</p>
<p><strong> Now，just do it.</strong></p>
<p>请相信，当我们持续努力，整个世界都会慢慢走过来。</p>
<h2 id="原文转自"><a href="#原文转自" class="headerlink" title="原文转自"></a>原文转自</h2><p><a href="http://mp.weixin.qq.com/s?__biz=MzA4OTI5NDMyNw==&amp;mid=400831167&amp;idx=1&amp;sn=e31e4010a035e64858fbbe4949206ee9&amp;scene=1&amp;srcid=1203bRUKQsxVhT5NuzbVkkH6#rd" target="_blank" rel="external">周冲的影像声色</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/12/03/article_we_have_no_choice_but_to_work_hard/" data-id="cj4zx2kjl004nqonhuj3zwcbq" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/感悟/">感悟</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-android_design_model_mvp" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/02/android_design_model_mvp/" class="article-date">
  <time datetime="2015-12-02T02:15:29.000Z" itemprop="datePublished">2015-12-02</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/android/">android</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/02/android_design_model_mvp/">Android设计模式之MVP</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>MVP 是从经典的模式MVC演变而来，类似于MVC的设计模式，M-Model-模型、V-View-视图、P-Presenter-表示器。Presenter负责逻辑的处理，Model提供数据，View负责显示。不同于MVC，它让Model和View完全解耦。后文有关于两者的对比。<br><img src="http://rocko-blog.qiniudn.com/Android%E4%B8%AD%E7%9A%84MVP_1.png" alt=""></p>
<p><strong> MVP之Model</strong><br>Model 是用户界面需要显示数据的抽象，也可以理解为从业务数据（结果）那里到用户界面的抽象（Business rule, data access, model classes）。本文 Demo 为了简单处理就直接把业务放到了对应的 Model 之中。</p>
<p><strong> MVP之View</strong><br>视图这一层体现的很轻薄，负责显示数据、提供友好界面跟用户交互就行。MVP下Activity和Fragment体现在了这一层，Activity一般也就做加载UI视图、设置监听再交由Presenter处理的一些工作，所以也就需要持有相应Presenter的引用。例如，Activity上滚动列表时隐藏或者显示Acionbar（Toolbar），这样的UI逻辑时也应该在这一层。另外在View上输入的数据做一些判断时，例如，EditText的输入数据，假如是简单的非空判断则可以作为View层的逻辑，而当需要对EditText的数据进行更复杂的比较时，如从数据库获取本地数据进行判断时明显需要经过Model层才能返回了，所以这些细节需要自己掂量。</p>
<p><strong> MVP之Presenter</strong><br>Presenter这一层处理着程序各种逻辑的分发，收到View层UI上的反馈命令、定时命令、系统命令等指令后分发处理逻辑交由业务层做具体的业务操作，然后将得到的 Model 给 View 显示。</p>
<p>MVP的优点：</p>
<ul>
<li>模型与视图完全分离，我们可以修改视图而不影响模型。</li>
<li>可以更高效地使用模型，因为所有的交互都发生在一个地方——Presenter内部。</li>
<li>我们可以将一个Presenter用于多个视图，而不需要改变Presenter的逻辑。这个特性非常的有用，因为视图的变化总是比模型的变化频繁。</li>
<li>如果我们把逻辑放在Presenter中，那么我们就可以脱离用户接口来测试这些逻辑（单元测试）。</li>
</ul>
<h2 id="使用示例"><a href="#使用示例" class="headerlink" title="使用示例"></a>使用示例</h2><p>1.明确需求，界面如下：可存，可根据id读取数据。<br><img src="http://img.blog.csdn.net/20140928093833691?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQva254dzAwMDE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br>包结构图<br><img src="http://img.blog.csdn.net/20140928093820322?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQva254dzAwMDE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""></p>
<p>2.建立bean<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserBean</span> </span>&#123;  </div><div class="line">     <span class="keyword">private</span> String mFirstName;  </div><div class="line">     <span class="keyword">private</span> String mLastName;  </div><div class="line">  </div><div class="line">     <span class="function"><span class="keyword">public</span> <span class="title">UserBean</span><span class="params">(String firstName, String lastName)</span> </span>&#123;  </div><div class="line">            <span class="keyword">this</span>. mFirstName = firstName;  </div><div class="line">            <span class="keyword">this</span>. mLastName = lastName;  </div><div class="line">     &#125;  </div><div class="line">  </div><div class="line">     <span class="function"><span class="keyword">public</span> String <span class="title">getFirstName</span><span class="params">()</span> </span>&#123;  </div><div class="line">            <span class="keyword">return</span> mFirstName;  </div><div class="line">     &#125;  </div><div class="line">  </div><div class="line">     <span class="function"><span class="keyword">public</span> String <span class="title">getLastName</span><span class="params">()</span> </span>&#123;  </div><div class="line">            <span class="keyword">return</span> mLastName;  </div><div class="line">     &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>3.建立model（处理业务逻辑，这里指数据读写），先写接口，后写实现。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IUserModel</span> </span>&#123;  </div><div class="line">     <span class="function"><span class="keyword">void</span> <span class="title">setID</span><span class="params">(<span class="keyword">int</span> id)</span></span>;  </div><div class="line">  </div><div class="line">     <span class="function"><span class="keyword">void</span> <span class="title">setFirstName</span><span class="params">(String firstName)</span></span>;  </div><div class="line">  </div><div class="line">     <span class="function"><span class="keyword">void</span> <span class="title">setLastName</span><span class="params">(String lastName)</span></span>;  </div><div class="line">  </div><div class="line">     <span class="function"><span class="keyword">int</span> <span class="title">getID</span><span class="params">()</span></span>;  </div><div class="line">  </div><div class="line">     <span class="function">UserBean <span class="title">load</span><span class="params">(<span class="keyword">int</span> id)</span></span>;<span class="comment">// 通过id读取user信息,返回一个UserBean  </span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>实现不在这里写了。</p>
<p>4.建立view（更新ui中的view状态），这里列出需要操作当前view的方法，也是接口。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IUserView</span> </span>&#123;  </div><div class="line">     <span class="function"><span class="keyword">int</span> <span class="title">getID</span><span class="params">()</span></span>;  </div><div class="line">  </div><div class="line">     <span class="function">String <span class="title">getFristName</span><span class="params">()</span></span>;  </div><div class="line">  </div><div class="line">     <span class="function">String <span class="title">getLastName</span><span class="params">()</span></span>;  </div><div class="line">  </div><div class="line">     <span class="function"><span class="keyword">void</span> <span class="title">setFirstName</span><span class="params">(String firstName)</span></span>;  </div><div class="line">  </div><div class="line">     <span class="function"><span class="keyword">void</span> <span class="title">setLastName</span><span class="params">(String lastName)</span></span>;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>5.建立presenter（主导器，通过iView和iModel接口操作model和view），activity可以把所有逻辑给presenter处理，这样java逻辑就从手机的activity中分离出来。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserPresenter</span> </span>&#123;  </div><div class="line">     <span class="keyword">private</span> IUserView mUserView;  </div><div class="line">     <span class="keyword">private</span> IUserModel mUserModel;  </div><div class="line">  </div><div class="line">     <span class="function"><span class="keyword">public</span> <span class="title">UserPresenter</span><span class="params">(IUserView view)</span> </span>&#123;  </div><div class="line">            mUserView = view;  </div><div class="line">            mUserModel = <span class="keyword">new</span> UserModel();  </div><div class="line">     &#125;  </div><div class="line">  </div><div class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveUser</span><span class="params">( <span class="keyword">int</span> id, String firstName, String lastName)</span> </span>&#123;  </div><div class="line">            mUserModel.setID(id);  </div><div class="line">            mUserModel.setFirstName(firstName);  </div><div class="line">            mUserModel.setLastName(lastName);  </div><div class="line">     &#125;  </div><div class="line">  </div><div class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">loadUser</span><span class="params">( <span class="keyword">int</span> id)</span> </span>&#123;  </div><div class="line">           UserBean user = mUserModel.load(id);  </div><div class="line">            mUserView.setFirstName(user.getFirstName()); <span class="comment">// 通过调用IUserView的方法来更新显示  </span></div><div class="line">            mUserView.setLastName(user.getLastName());  </div><div class="line">     &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>6.activity中实现iview接口，在其中操作view，实例化一个presenter变量。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> <span class="keyword">implements</span> <span class="title">OnClickListener</span>,<span class="title">IUserView</span> </span>&#123;  </div><div class="line">  </div><div class="line">     UserPresenter presenter;  </div><div class="line">     EditText id,first,last;  </div><div class="line">     <span class="meta">@Override</span>  </div><div class="line">     <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;  </div><div class="line">            <span class="keyword">super</span>.onCreate(savedInstanceState);  </div><div class="line">           setContentView(R.layout. activity_main);  </div><div class="line">             </div><div class="line">           findViewById(R.id. save).setOnClickListener( <span class="keyword">this</span>);  </div><div class="line">           findViewById(R.id. load).setOnClickListener( <span class="keyword">this</span>);  </div><div class="line">            id = (EditText) findViewById(R.id. id);  </div><div class="line">            first = (EditText) findViewById(R.id. first);  </div><div class="line">            last = (EditText) findViewById(R.id. last);  </div><div class="line">             </div><div class="line">            presenter = <span class="keyword">new</span> UserPresenter( <span class="keyword">this</span>);  </div><div class="line">     &#125;  </div><div class="line">  </div><div class="line">     <span class="meta">@Override</span>  </div><div class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;  </div><div class="line">            <span class="keyword">switch</span> (v.getId()) &#123;  </div><div class="line">            <span class="keyword">case</span> R.id. save:  </div><div class="line">                 presenter.saveUser(getID(), getFristName(), getLastName());  </div><div class="line">                 <span class="keyword">break</span>;  </div><div class="line">            <span class="keyword">case</span> R.id. load:  </div><div class="line">                 presenter.loadUser(getID());  </div><div class="line">                 <span class="keyword">break</span>;  </div><div class="line">            <span class="keyword">default</span>:  </div><div class="line">                 <span class="keyword">break</span>;  </div><div class="line">           &#125;  </div><div class="line">     &#125;  </div><div class="line">  </div><div class="line">     <span class="meta">@Override</span>  </div><div class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getID</span><span class="params">()</span> </span>&#123;  </div><div class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Integer( id.getText().toString());  </div><div class="line">     &#125;  </div><div class="line">  </div><div class="line">     <span class="meta">@Override</span>  </div><div class="line">     <span class="function"><span class="keyword">public</span> String <span class="title">getFristName</span><span class="params">()</span> </span>&#123;  </div><div class="line">            <span class="keyword">return</span> first.getText().toString();  </div><div class="line">     &#125;  </div><div class="line">  </div><div class="line">     <span class="meta">@Override</span>  </div><div class="line">     <span class="function"><span class="keyword">public</span> String <span class="title">getLastName</span><span class="params">()</span> </span>&#123;  </div><div class="line">            <span class="keyword">return</span> last.getText().toString();  </div><div class="line">     &#125;  </div><div class="line">  </div><div class="line">     <span class="meta">@Override</span>  </div><div class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setFirstName</span><span class="params">(String firstName)</span> </span>&#123;  </div><div class="line">            first.setText(firstName);  </div><div class="line">     &#125;  </div><div class="line">  </div><div class="line">     <span class="meta">@Override</span>  </div><div class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLastName</span><span class="params">(String lastName)</span> </span>&#123;  </div><div class="line">            last.setText(lastName);  </div><div class="line">     &#125;  </div><div class="line">  </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>7.所谓的mvp，即是（model-处理业务逻辑（主要是数据读写，或者与后台通信（其实也是读写数据）），view-处理ui控件，presenter-主导器，操作model和view）</p>
<h2 id="与MVC的区别"><a href="#与MVC的区别" class="headerlink" title="与MVC的区别"></a>与MVC的区别</h2><p>作为一种新的模式，MVP与MVC有着一个重大的区别：在MVP中View并不直接使用Model，它们之间的通信是通过Presenter (MVC中的Controller)来进行的，所有的交互都发生在Presenter内部，而在MVC中View会从直接Model中读取数据而不是通过 Controller。</p>
<p>在MVC里，View是可以直接访问Model的！从而，View里会包含Model信息，不可避免的还要包括一些业务逻辑。 在MVC模型里，更关注的Model的不变，而同时有多个对Model的不同显示，及View。所以，在MVC模型里，Model不依赖于View，但是View是依赖于Model的。不仅如此，因为有一些业务逻辑在View里实现了，导致要更改View也是比较困难的，至少那些业务逻辑是无法重用的。</p>
<p>MVP如何解决MVC的问题？</p>
<p>在MVP里，Presenter完全把Model和View进行了分离，主要的程序逻辑在Presenter里实现。而且，Presenter与具体的View是没有直接关联的，而是通过定义好的接口进行交互，从而使得在变更View时候可以保持Presenter的不变，即重用！ 不仅如此，我们还可以编写测试用的View，模拟用户的各种操作，从而实现对Presenter的测试–而不需要使用自动化的测试工具。 我们甚至可以在Model和View都没有完成时候，就可以通过编写Mock Object（即实现了Model和View的接口，但没有具体的内容的）来测试Presenter的逻辑。 在MVP里，应用程序的逻辑主要在Presenter来实现，其中的View是很薄的一层。因此就有人提出了Presenter First的设计模式，就是根据User Story来首先设计和开发Presenter。在这个过程中，View是很简单的，能够把信息显示清楚就可以了。在后面，根据需要再随便更改View，而对Presenter没有任何的影响了。 如果要实现的UI比较复杂，而且相关的显示逻辑还跟Model有关系，就可以在View和Presenter之间放置一个Adapter。由这个Adapter来访问Model和View，避免两者之间的关联。而同时，因为Adapter实现了View的接口，从而可以保证与Presenter之间接口的不变。这样就可以保证View和Presenter之间接口的简洁，又不失去UI的灵活性。 在MVP模式里，View只应该有简单的Set/Get的方法，用户输入和设置界面显示的内容，除此就不应该有更多的内容，绝不容许直接访问Model—这就是与MVC很大的不同之处。</p>
<p><strong> [MVC]</strong></p>
<ul>
<li>View：对应于布局文件</li>
<li>Model：业务逻辑和实体模型</li>
<li>Controllor：对应于Activity<br><strong> [MVP]</strong></li>
<li>View 对应于Activity，负责View的绘制以及与用户交互</li>
<li>Model 依然是业务逻辑和实体模型</li>
<li>Presenter 负责完成View于Model间的交互<br><img src="http://img.blog.csdn.net/20150622212916054" alt=""></li>
</ul>
<p>MVP之所以让人觉得耳目一新，是因为这次的跳跃是从并不标准的MVC到MVP的一个转变，减少了Activity的职责，简化了Activity中的代码，将复杂的逻辑代码提取到了Presenter中进行处理。与之对应的好处就是，耦合度更低，更方便的进行测试。</p>
<h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><ul>
<li><a href="http://rocko.xyz/2015/02/06/Android%E4%B8%AD%E7%9A%84MVP/" target="_blank" rel="external">Android中的MVP</a></li>
<li><a href="http://blog.csdn.net/vector_yi/article/details/24719873" target="_blank" rel="external">MVP模式在Android开发中的应用</a></li>
<li><a href="http://www.tuicool.com/articles/VJZrYb" target="_blank" rel="external">Android开发MVP模式</a></li>
<li><a href="http://blog.csdn.net/lmj623565791/article/details/46596109" target="_blank" rel="external">浅谈 MVP in Android</a></li>
<li><a href="https://github.com/VectorYi/MVPSample" target="_blank" rel="external">博客源码DEMO</a></li>
<li><a href="https://github.com/saulmm/Material-Movies" target="_blank" rel="external">源码DEMO1-Material-Movies</a></li>
<li><a href="https://github.com/antoniolg/androidmvp" target="_blank" rel="external">源码DEMO2-androidmvp</a></li>
<li><a href="https://github.com/pedrovgs/EffectiveAndroidUI" target="_blank" rel="external">源码DEMO3-EffectiveAndroidUI</a></li>
<li><a href="https://github.com/spengilley/ActivityFragmentMVP" target="_blank" rel="external">源码DEMO4-ActivityFragmentMVP</a></li>
<li><a href="https://github.com/glomadrian/MvpCleanArchitecture" target="_blank" rel="external">源码DEMO5-MvpCleanArchitecture</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/12/02/android_design_model_mvp/" data-id="cj4zx2kgt001fqonhhbd13a8s" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/design-model/">design model</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mvp/">mvp</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-android_application" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/01/android_application/" class="article-date">
  <time datetime="2015-12-01T04:01:29.000Z" itemprop="datePublished">2015-12-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/android/">android</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/01/android_application/">Application使用详解</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>Application和Activity,Service一样是Android框架的一个系统组件，当Android程序启动时系统会创建一个Application对象，用来存储系统的一些信息。</p>
<p>Android系统自动会为每个程序运行时创建一个Application类的对象且只创建一个，所以Application可以说是单例（singleton）模式的一个类。</p>
<p>通常我们是不需要指定一个Application的，系统会自动帮我们创建，如果需要创建自己的Application，那也很简单！创建一个类继承Application并在AndroidManifest.xml 文件中的application标签中进行注册（只需要给application标签增加name属性，并添加自己的 Application的名字即可）。</p>
<p>启动Application时，系统会创建一个PID，即进程ID，所有的Activity都会在此进程上运行。那么我们在Application创建的时候初始化全局变量，同一个应用的所有Activity都可以取到这些全局变量的值，换句话说，我们在某一个Activity中改变了这些全局变量的值，那么在同一个应用的其他Activity中值就会改变。</p>
<p>Application对象的生命周期是整个程序中最长的，它的生命周期就等于这个程序的生命周期。因为它是全局的单例的，所以在不同的Activity,Service中获得的对象都是同一个对象。所以可以通过Application来进行一些全局操作，如：数据传递、数据共享和数据缓存等操作。</p>
<h2 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h2><p>在Android中，可以通过继承Application类来实现应用程序级的全局变量，这种全局变量方法相对静态类更有保障，直到应用的所有Activity全部被destory掉之后才会被释放掉。</p>
<p><strong> 通过Application传递数据</strong></p>
<p>假如有一个Activity A, 跳转到 Activity B ,并需要推荐一些数据，通常的作法是Intent.putExtra() 让Intent携带，或者有一个Bundle把信息加入Bundle让Intent推荐Bundle对象，实现传递。但这样作有一个问题在 于，Intent和Bundle所能携带的数据类型都是一些基本的数据类型，如果想实现复杂的数据传递就比较麻烦了，通常需要实现 Serializable或者Parcellable接口。这其实是Android的一种IPC数据传递的方法。如果我们的两个Activity在同一个 进程当中为什么还要这么麻烦呢，只要把需要传递的对象的引用传递过去就可以了。 基本思路是这样的。在Application中创建一个HashMap ，以字符串为索引，Object为value这样我们的HashMap就可以存储任何类型的对象了。在Activity A中把需要传递的对象放入这个HashMap，然后通过Intent或者其它途经再把这索引的字符串传递给Activity B ,Activity B 就可以根据这个字符串在HashMap中取出这个对象了。只要再向下转个型 ，就实现了对象的传递。</p>
<p><strong> Application数据缓存</strong></p>
<p>我一般会习惯在application中建立两个HashMap一个用于数据的传递，一个用于缓 存一些数据。比如有一个Activity需要从网站获取一些数据，获取完之后我们就可以把这个数据cache到Application 当中，当页面设置到其它Activity再回来的时候，就可以直接使用缓存好的数据了。但如果需要cache一些大量的数据，最好是cache一些 (软引用)SoftReference ，并把这些数据cache到本地rom上或者sd卡上。如果在application中的缓存不存在，从本地缓存查找，如果本地缓存的数据也不存在再从网 络上获取。</p>
<h2 id="实现步骤"><a href="#实现步骤" class="headerlink" title="实现步骤"></a>实现步骤</h2><p>1、继承Application<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomApplication</span> <span class="keyword">extends</span> <span class="title">Application</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String VALUE = <span class="string">"Harvey"</span>;</div><div class="line">    </div><div class="line">    <span class="keyword">private</span> String value;</div><div class="line">    </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">()</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">super</span>.onCreate();</div><div class="line">        setValue(VALUE); <span class="comment">// 初始化全局变量</span></div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(String value)</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">this</span>.value = value;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getValue</span><span class="params">()</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">return</span> value;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>注：继承Application类，主要重写里面的onCreate()方法（android.app.Application包的onCreate()才是真正的Android程序的入口点），就是创建的时候，初始化变量的值。然后在整个应用中的各个文件中就可以对该变量进行操作了。</p>
<p>2、在ApplicationManifest.xml文件中配置自定义的Application<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">application</span></span></div><div class="line">        <span class="attr">android:name</span>=<span class="string">"CustomApplication"</span>&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">application</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>实例代码：</p>
<p>CustomApplication.java<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 继承Application</div><div class="line"> * </div><div class="line"> * <span class="doctag">@author</span> admin</div><div class="line"> * </div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomApplication</span> <span class="keyword">extends</span> <span class="title">Application</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String VALUE = <span class="string">"Harvey"</span>;</div><div class="line">    </div><div class="line">    <span class="keyword">private</span> String value;</div><div class="line">    </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">()</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">super</span>.onCreate();</div><div class="line">        setValue(VALUE); <span class="comment">// 初始化全局变量</span></div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(String value)</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">this</span>.value = value;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getValue</span><span class="params">()</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">return</span> value;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>FirstActivity.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FirstActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">private</span> CustomApplication app;</div><div class="line">    </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">        setContentView(R.layout.main);</div><div class="line">        </div><div class="line">        app = (CustomApplication) getApplication(); <span class="comment">// 获得CustomApplication对象</span></div><div class="line">        </div><div class="line">        Log.i(<span class="string">"FirstActivity"</span>, <span class="string">"初始值====="</span> + app.getValue()); <span class="comment">// 获取进程中的全局变量值，看是否是初始化值</span></div><div class="line">        </div><div class="line">        app.setValue(<span class="string">"Harvey Ren"</span>); <span class="comment">// 重新设置值</span></div><div class="line">        </div><div class="line">        Log.i(<span class="string">"FirstActivity"</span>, <span class="string">"修改后====="</span> + app.getValue()); <span class="comment">// 再次获取进程中的全局变量值，看是否被修改</span></div><div class="line">        </div><div class="line">        Intent intent = <span class="keyword">new</span> Intent();</div><div class="line">        intent.setClass(<span class="keyword">this</span>, SecondActivity.class);</div><div class="line">        startActivity(intent);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>注：只需要调用Context的 getApplicationContext或者Activity的getApplication方法来获得一个Application对象，然后再得到相应的成员变量即可。它是代表我们的应用程序的类，使用它可以获得当前应用的主题和资源文件中的内容等，这个类更灵活的一个特性就是可以被我们继承，来添加我们自己的全局属性。</p>
<p>SecondActivity.java<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecondActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">private</span> CustomApplication app;</div><div class="line">    </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">        setContentView(R.layout.main);</div><div class="line"></div><div class="line">        app = (CustomApplication) getApplication(); <span class="comment">// 获取应用程序</span></div><div class="line"></div><div class="line">       Log.i(<span class="string">"SecondActivity"</span>, <span class="string">"当前值====="</span> + app.getValue()); <span class="comment">// 获取全局值</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>AndroidManifest.xml<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">manifest</span></span></div><div class="line">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></div><div class="line">    <span class="attr">package</span>=<span class="string">"com.android.test"</span></div><div class="line">    <span class="attr">android:versionCode</span>=<span class="string">"1"</span></div><div class="line">    <span class="attr">android:versionName</span>=<span class="string">"1.0"</span>&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">uses-sdk</span></span></div><div class="line">        <span class="attr">android:minSdkVersion</span>=<span class="string">"8"</span> /&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">application</span></span></div><div class="line">        <span class="attr">android:icon</span>=<span class="string">"@drawable/icon"</span></div><div class="line">        <span class="attr">android:label</span>=<span class="string">"@string/app_name"</span></div><div class="line">        <span class="attr">android:name</span>=<span class="string">"CustomApplication"</span>&gt;</div><div class="line">        <span class="comment">&lt;!-- 将我们以前一直用的默认Application设置成自定义的CustomApplication --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">activity</span></span></div><div class="line">            <span class="attr">android:name</span>=<span class="string">".FirstActivity"</span></div><div class="line">            <span class="attr">android:label</span>=<span class="string">"@string/app_name"</span>&gt;</div><div class="line">            <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">action</span></span></div><div class="line">                    <span class="attr">android:name</span>=<span class="string">"android.intent.action.MAIN"</span> /&gt;</div><div class="line">                <span class="tag">&lt;<span class="name">category</span></span></div><div class="line">                    <span class="attr">android:name</span>=<span class="string">"android.intent.category.LAUNCHER"</span> /&gt;</div><div class="line">            <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">activity</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">activity</span></span></div><div class="line">            <span class="attr">android:name</span>=<span class="string">".SecondActivity"</span></div><div class="line">            <span class="attr">android:label</span>=<span class="string">"@string/app_name"</span>&gt;</div><div class="line">        <span class="tag">&lt;/<span class="name">activity</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">application</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>在没有context的类中，可以通过下面的方式拿到application。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">Application</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> MyApp instance = <span class="keyword">new</span> MyApp();</div><div class="line">    </div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 全局变量</div><div class="line">     */</div><div class="line">    <span class="keyword">private</span> String name = <span class="string">"Rowandjj"</span>;</div><div class="line">    </div><div class="line">    <span class="comment">/*</span></div><div class="line">     * android应用程序真正入口。</div><div class="line">     * 此方法在所有activity，servie，receiver组件之前调用</div><div class="line">     * */</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">()</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">super</span>.onCreate();<span class="comment">//必须调用父类方法</span></div><div class="line">        Log.i(<span class="string">"CREATE"</span>,<span class="string">"application created...."</span>);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    </div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 此方法方便在那些没有context对象的类中使用</div><div class="line">     * <span class="doctag">@return</span> MyApp实例</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> MyApp <span class="title">getApplicationInstance</span><span class="params">()</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">return</span> instance;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><p><strong> PitFalls(易犯的错误)</strong></p>
<p>使用Application如果保存了一些不该保存的对象很容易导致内存泄漏。如果在Application的oncreate中执行比较耗时的操作，将直接影响的程序的启动时间。不些清理工作不能依靠onTerminate完成，因为android会尽量让你的程序一直运行，所以很有可能 onTerminate不会被调用。</p>
<p><strong> MemoryLeak（内存泄露）</strong></p>
<p>在Java中内存泄漏是只，某个(某些)对象已经不在被使用应该被gc所回收，但有一个对象持有这个对象的引用而阻止这个对象被回收。比如我们通常会这样创建一个View TextView tv = new TextView(this);这里的this通常都是Activity。所以这个TextView就持有着这个Activity的引用。下面看张图 (Google IO 2011 ppt中抄得)<br>通常情况下，当用户转动手机的时候，android会重新调用OnCreate()方法生成一个新的Activity，原来的 Activity应该被GC所回收。但如果有个对象比如一个View的作用域超过了这个Activity(比如有一个static对象或者我们把这个 View的引用放到了Application当中)，这时候原来的Activity将不能被GC所回收，Activity本身又持有很多对象的引用，所以整个Activity的内存被泄漏了。<br>备注：经常导致内存泄漏核心原因： keeping a long-lived reference to a Context.持有一个context的对象，从而gc不能回收。 情况如下：</p>
<p>1.一个View的作用域超出了所在的Activity的作用域，比如一个static的View或者把一个View cache到了application当中等等。</p>
<blockquote>
<p>理解：内存,静态的数据和缓存中的数据,注意释放。</p>
</blockquote>
<p>2.某些与View关联的Drawable的作用域超出了Activity的作用域。</p>
<p>3.Runnable对象：比如在一个Activity中启用了一个新线程去执行一个任务，在这期间这个Activity被系统回收了， 但Runnalbe的 任务还没有执行完毕并持有Activity的引用而泄漏，但这种泄漏一般来泄漏一段时间，只有Runnalbe的线程执行完闭，这个 Activity又可以被正常回收了。</p>
<p>4.内存类的对象作用域超出Activity的范围：比如定义了一个内存类来存储数据，又把这个内存类的对象传给了其它Activity 或者Service等。因为内部类的对象会持有当前类的引用，所以也就持有了Context的引用。解决方法是如果不需要当前的引用把内部类写成static或者，把内部类抽取出来变成一个单独的类，或者把避免内部对象作用域超出Activity的作用域。out Of Memery Error 在android中每一个程序所分到的内存大小是有限的，如果超过了这个数就会报Out Of Memory Error。 android给程序分配的内存大小与手机硬件有关，以下是一些手机的数据：</p>
<p>G1:16M Droid:24 Nexus One:32M Xoom:48Ms<br>所以尽量把程序中的一些大的数据cache到本地文件。以免内存使用量超标。<br>记得数据传递完成之后，把存放在application的HashMap中的数据remove掉，以免发生内存的泄漏</p>
<p><strong> 生命周期</strong></p>
<ul>
<li><p>onCreate 在创建应用程序时创建。</p>
</li>
<li><p>onTerminate 当终止应用程序对象时调用，不保证一定被调用，当程序是被内核终止以便为其他应用程序释放资源，那么将不会提醒，并且不调用应用程序的对象的onTerminate方法而直接终止进程。</p>
</li>
<li><p>onLowMemory 当后台程序已经终止资源还匮乏时会调用这个方法。好的应用程序一般会在这个方法里面释放一些不必要的资源来应付当后台程序已经终止，前台应用程序内存还不够时的情况。</p>
</li>
<li><p>onConfigurationChanged 配置改变时触发这个方法</p>
</li>
</ul>
<p>备注:application 被杀死的情况分析：为了决定在内存较低的时候杀掉哪个进程, Android会根据运行在这些进程内的组件及他们的状态把进程划分成一个”重要程度层次”. 其重要的程度按以下规则排序:</p>
<p>1：前端进程可以是一个持有运行在屏幕最前端并与用户交互的Activity的进程(onResume方法被调用时)，也可以是持有一个正在运行的IntentReceiver(也就是说他正在执行自己的onReceiveIntent方法)的进程. 在系统中, 只会有少数这样的进程, 并且除非内存已经低到不够这些进程运行, 否则系统不会主动杀掉这些进程. 这时, 设备通常已经达到了需要内存整理的状态, 所以杀掉这些进程是为了不让用户界面停止响应.</p>
<p>2：可视进程是持有一个被用户可见, 但没有显示在最前端 (onPause方法被调用时) 的Activity的进程. 举例来说, 这种进程通常出现在一个前端Activity以一个对话框出现并保持前一个Activity可见时. 这种进程被系统认为是极其重要的, 并且通常不会被杀掉, 除非为了保持所有前端进程正常运行不得不杀掉这些可见进程.<br>3：服务进程是持有一个Service的进程, 该Service是由startService()方法启动的, 尽管这些进程用户不能直接看到, 但是通常他们做的工作用户是十分关注的(例如, 在后台播放mp3或是在后台下载 上传文件), 所以, 除非为了保持所有的前端进程和可视进程正常运行外, 系统是不会杀掉服务进程的.</p>
<p>4：后台进程是持有一个不再被用户可见的Activity(onStop()方法被调用时)的进程. 这些进程不会直接影响用户体验. 加入这些进程已经完整的,正确的完成了自己的生命周期(访问Activity查看更多细节), 系统会在为前三种进程释放内存时随时杀掉这些后台进程. 通常会有很多的后台进程在运行, 所以这些进程被存放在一个LRU列表中, 以保证在低内存的时候, 最近一个被用户看到的进程会被最后杀掉.</p>
<p>5：空进程是没有持有任何活动应用组件的进程. 保留这种进程的唯一理由是为了提供一种缓存机制, 缩短他的应用下次运行时的启动时间. 就其本身而言, 系统杀掉这些进程的目的是为了在这些空进程和底层的核心缓存之间平衡整个系统的资源.</p>
<p>当需要给一个进程分类的时候, 系统会在该进程中处于活动状态的所有组件里掉选一个重要等级最高作为分类依据. 查看Activity, Service,和IntentReceiver的文档, 了解每个组件在进程整个生命周期中的贡献. 每一个classes的文档详细描述他们在各自应用的生命周期中所起得作用.</p>
<p><strong> application的context</strong></p>
<ul>
<li>1、它描述的是一个应用程序环境的信息，即上下文。</li>
<li>2、该类是一个抽象(abstract class)类，Android提供了该抽象类的具体实现类(后面我们会讲到是ContextIml类)。</li>
<li>3、通过它我们可以获取应用程序的资源和类，也包括一些应用级别操作，例如：启动一个Activity，发送广播，接受Intent信息等。</li>
</ul>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="http://www.cnblogs.com/renqingping/archive/2012/10/24/Application.html" target="_blank" rel="external">Application类</a><br><a href="http://www.android100.org/html/201406/04/17304.html" target="_blank" rel="external">Application类作用浅析</a><br><a href="http://bbs.9ria.com/thread-222819-1-1.html" target="_blank" rel="external">ANDROID application详解与用法</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/12/01/android_application/" data-id="cj4zx2kfy000lqonh5uyvlubc" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/application/">application</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-android_viewpager_pageradapter" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/11/30/android_viewpager_pageradapter/" class="article-date">
  <time datetime="2015-11-30T09:44:29.000Z" itemprop="datePublished">2015-11-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/android/">android</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/30/android_viewpager_pageradapter/">PagerAdapter的使用</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>PagerAdapter是android.support.v4包中的类，它的子类有FragmentPagerAdapter,FragmentStatePagerAdapter，这两个adapter都是Fragment的适配器，用于实现Fragment的滑动效果，PagerAdapter主要是viewpager的适配器，而viewPager则也是在android.support.v4 扩展包中新添加的一个强大的控件，可以实现控件的滑动效果，比如咱们在软件中常见的广告栏的滑动效果，用viewPager就可以实现。今天主要介绍如何使用viewPager并重写PagerAdapter实现常见广告栏的滑动效果。</p>
<h2 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h2><p>首先，如果继承pageradapter，至少必须重写下面的四个方法 </p>
<ul>
<li>instantiateItem(ViewGroup, int)</li>
<li>destroyItem(ViewGroup, int, Object)</li>
<li>getCount()</li>
<li>isViewFromObject(View, Object)</li>
</ul>
<h2 id="使用示例"><a href="#使用示例" class="headerlink" title="使用示例"></a>使用示例</h2><p>下面我们以代码的形式，说明这四个方法的含义以及如何使用<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">ViewPagerAdapter</span> <span class="keyword">extends</span> <span class="title">PagerAdapter</span> </span>&#123;</div><div class="line"></div><div class="line">        <span class="comment">// 获取要滑动的控件的数量，在这里我们以滑动的广告栏为例，那么这里就应该是展示的广告图片的ImageView数量</span></div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCount</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">return</span> images.size();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// 来判断显示的是否是同一张图片，这里我们将两个参数相比较返回即可</span></div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isViewFromObject</span><span class="params">(View arg0, Object arg1)</span> </span>&#123;</div><div class="line">            <span class="keyword">return</span> arg0 == arg1;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// PagerAdapter只缓存三张要显示的图片，如果滑动的图片超出了缓存的范围，就会调用这个方法，将图片销毁</span></div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroyItem</span><span class="params">(ViewGroup view, <span class="keyword">int</span> position, Object object)</span> </span>&#123;</div><div class="line">            view.removeView(images.get(position));</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// 当要显示的图片可以进行缓存的时候，会调用这个方法进行显示图片的初始化，我们将要显示的ImageView加入到ViewGroup中，然后作为返回值返回即可</span></div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> Object <span class="title">instantiateItem</span><span class="params">(ViewGroup view, <span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">            view.addView(images.get(position));</div><div class="line">            <span class="keyword">return</span> images.get(position);</div><div class="line">        &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p>实现了这四个方法，就可以实现滑动的效果了。 </p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="http://www.it165.net/pro/html/201403/11289.html" target="_blank" rel="external">Android关于PagerAdapter的使用方法的总结</a><br><a href="http://www.cnblogs.com/tinyphp/p/3891850.html" target="_blank" rel="external">ViewPager适配器PagerAdapter的使用</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/11/30/android_viewpager_pageradapter/" data-id="cj4zx2kj6004bqonhytnub4w9" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/pageradapter/">pageradapter</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/viewpager/">viewpager</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-protocol_ssl_socket" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/11/30/protocol_ssl_socket/" class="article-date">
  <time datetime="2015-11-30T09:04:29.000Z" itemprop="datePublished">2015-11-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/protocol/">protocol</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/30/protocol_ssl_socket/">用SSL构建安全的Socket</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>SSL(安全套接层)是 Netscape公司在1994年开发的，最初用于WEB浏览器，为浏览器与服务器间的数据传递提供安全保障，提供了加密、来源认证和数据完整性的功能。现在SSL3.0得到了普遍的使用，它的改进版TLS(传输层安全)已经成为互联网标准。SSL本身和TCP套接字连接是很相似的，在协议栈中，SSL可以被简单的看作是安全的TCP连接，但是某些TCP连接的特性它是不支持的，比如带外数据(out-of-bound)。</p>
<p>在构建基于 Socket的C/S程序时，通过添加对SSL的支持来保障数据安全和完整是不错的方法。完善的Java为我们提供了简单的实现方法：JSSE(Java 安全套接字扩展)。JSSE是一个纯Java实现的SSL和TLS协议框架，抽象了SSL和TLS复杂的算法，使安全问题变得简单。JSSE已经成为 J2SE1.4版本中的标准组件，支持SSL 3.0和TLS 1.0。我们将通过一个具体的例子演示JSSE的一些基本应用。例子中的服务器端将打开一个SSL Socket，只有持有指定证书的客户端可以与它连接，所有的数据传递都是加密的。</p>
<p>构造一个SSLSocket是非常简单的：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">SSLServerSocketFactory factory=(SSLServerSocketFactory)SSLServerSocketFactory.getDefault();</div><div class="line">SSLServerSocket server = (SSLServerSocket) factory.createServerSocket(portNumber);</div><div class="line">SSLSocket socket = (SSLSocket);</div></pre></td></tr></table></figure></p>
<p>但是执行这样的程序会产生一个异常，报告找不到可信任的证书。SSLSocket和普通的Socket是不一样的，它需要一个证书来进行安全认证。</p>
<h2 id="证书"><a href="#证书" class="headerlink" title="证书"></a>证书</h2><p>生成一个CA证书，在命令行下执行：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">keytool –genkey –keystore SSLKey –keyalg rsa –<span class="built_in">alias</span> SSL</div></pre></td></tr></table></figure></p>
<p>参数是用户可以自己指定的，第一个参数是要生成的证书的名字，第二个参数是证书的别名。rsa指明了我们使用的加密方法。</p>
<p>系统会要求输入证书发放者的信息，逐项输入即可。系统生成的文件命将会和证书名相同。证书可以提交给权威CA认证组织审核，如果通过审核，组织会提供信任担保，向客户担保你的连接是安全的。当然这不是必须的。在我们的例子中会把证书直接打包到客户端程序中，保证客户端是授权用户，避免伪造客户，所以不需要提交审核。</p>
<h2 id="服务器端"><a href="#服务器端" class="headerlink" title="服务器端"></a>服务器端</h2><p>现在可以编写服务器端的代码，与普通的Socket代码不同，我们需要在程序中导入证书，并使用该证书构造SSLSocket。需要的说明的是：</p>
<ul>
<li><p>KeyStore ks=KeyStore.getInstance(“JKS”);<br>访问Java密钥库，JKS是keytool创建的Java密钥库，保存密钥。</p>
</li>
<li><p>KeyManagerFactory kmf=KeyManagerFactory.getInstance(“SunX509”);<br>创建用于管理JKS密钥库的X.509密钥管理器。</p>
</li>
<li><p>SSLContext sslContext=SSLContext.getInstance(“SSLv3”);<br>构造SSL环境，指定SSL版本为3.0，也可以使用TLSv1，但是SSLv3更加常用。</p>
</li>
<li><p>sslContext.init(kmf.getKeyManagers(),null,null);<br>初始化SSL环境。第二个参数是告诉JSSE使用的可信任证书的来源，设置为null是从javax.net.ssl.<br>trustStore中获得证书。第三个参数是JSSE生成的随机数，这个参数将影响系统的安全性，设置为null是个好选择，可以保证JSSE的安全性。</p>
</li>
</ul>
<p>完整代码如下：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line">*SSL Socket的服务器端</div><div class="line">*@Author Bromon</div><div class="line">*/</div><div class="line"><span class="keyword">import</span> java.net.Socket;</div><div class="line"><span class="keyword">import</span> java.security.KeyStore;</div><div class="line"></div><div class="line"><span class="keyword">import</span> javax.net.ssl.KeyManagerFactory;</div><div class="line"><span class="keyword">import</span> javax.net.ssl.SSLContext;</div><div class="line"><span class="keyword">import</span> javax.net.ssl.SSLServerSocket;</div><div class="line"><span class="keyword">import</span> javax.net.ssl.SSLServerSocketFactory;</div><div class="line"><span class="keyword">import</span> javax.net.ssl.SSLSocket;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SSLServer</span> </span>&#123;</div><div class="line">    <span class="keyword">static</span> <span class="keyword">int</span> port = <span class="number">8266</span>; <span class="comment">// 系统将要监听的端口号,82.6.6是偶以前女朋友的生日^_^</span></div><div class="line">    <span class="keyword">static</span> SSLServerSocket server;</div><div class="line"></div><div class="line">    <span class="comment">/*</span></div><div class="line">     * 构造函数</div><div class="line">     */</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SSLServer</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/*</span></div><div class="line">     * @param port 监听的端口号</div><div class="line">     * </div><div class="line">     * @return 返回一个SSLServerSocket对象</div><div class="line">     */</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> SSLServerSocket <span class="title">getServerSocket</span><span class="params">(<span class="keyword">int</span> thePort)</span> </span>&#123;</div><div class="line">        SSLServerSocket s = <span class="keyword">null</span>;</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            String key = <span class="string">"SSLKey"</span>; <span class="comment">// 要使用的证书名</span></div><div class="line"></div><div class="line">            <span class="keyword">char</span> keyStorePass[] = <span class="string">"12345678"</span>.toCharArray(); <span class="comment">// 证书密码</span></div><div class="line"></div><div class="line">            <span class="keyword">char</span> keyPassword[] = <span class="string">"12345678"</span>.toCharArray(); <span class="comment">// 证书别称所使用的主要密码</span></div><div class="line"></div><div class="line">            KeyStore ks = KeyStore.getInstance(<span class="string">"JKS"</span>); <span class="comment">// 创建JKS密钥库</span></div><div class="line"></div><div class="line">            ks.load(<span class="keyword">new</span> FileInputStream(key), keyStorePass);</div><div class="line"></div><div class="line">            <span class="comment">// 创建管理JKS密钥库的X.509密钥管理器</span></div><div class="line">            KeyManagerFactory kmf = KeyManagerFactory.getInstance(<span class="string">"SunX509"</span>);</div><div class="line"></div><div class="line">            kmf.init(ks, keyPassword);</div><div class="line"></div><div class="line">            SSLContext sslContext = SSLContext.getInstance(<span class="string">"SSLv3"</span>);</div><div class="line"></div><div class="line">            sslContext.init(kmf.getKeyManagers(), <span class="keyword">null</span>, <span class="keyword">null</span>);</div><div class="line"></div><div class="line">            <span class="comment">// 根据上面配置的SSL上下文来产生SSLServerSocketFactory,与通常的产生方法不同</span></div><div class="line">            SSLServerSocketFactory factory = sslContext.getServerSocketFactory();</div><div class="line"></div><div class="line">            s = (SSLServerSocket) factory.createServerSocket(thePort);</div><div class="line"></div><div class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">            System.out.println(e);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> (s);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            server = getServerSocket(port);</div><div class="line">            System.out.println(<span class="string">"在”+port+”端口等待连接..."</span>);</div><div class="line"></div><div class="line">            <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</div><div class="line">                SSLSocket socket = (SSLSocket) server.accept();</div><div class="line"></div><div class="line">                <span class="comment">// 将得到的socket交给CreateThread对象处理,主线程继续监听</span></div><div class="line">                <span class="keyword">new</span> CreateThread(socket);</div><div class="line"></div><div class="line">            &#125;</div><div class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">            System.out.println(<span class="string">"main方法错误80:"</span> + e);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line"> * 内部类,获得主线程的socket连接,生成子线程来处理</div><div class="line"> */</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">CreateThread</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</div><div class="line">    <span class="keyword">static</span> BufferedReader in;</div><div class="line">    <span class="keyword">static</span> PrintWriter out;</div><div class="line">    <span class="keyword">static</span> Socket s;</div><div class="line"></div><div class="line">    <span class="comment">/*</span></div><div class="line">     * 构造函数,获得socket连接,初始化in和out对象</div><div class="line">     */</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CreateThread</span><span class="params">(Socket socket)</span> </span>&#123;</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            s = socket;</div><div class="line">            in = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(s.getInputStream(), <span class="string">"gb2312"</span>));</div><div class="line"></div><div class="line">            out = <span class="keyword">new</span> PrintWriter(s.getOutputStream(), <span class="keyword">true</span>);</div><div class="line"></div><div class="line">            start(); <span class="comment">// 开新线程执行run方法</span></div><div class="line"></div><div class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">            System.out.println(e);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/*</span></div><div class="line">     * 线程方法,处理socket传递过来的数据</div><div class="line">     */</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            String msg = in.readLine();</div><div class="line">            System.out.println(msg);</div><div class="line">            s.close();</div><div class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">            System.out.println(e);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">``` </div><div class="line"></div><div class="line">将我们刚才生成的证书放到程序所在的目录下，上面的代码就可以在编译之后执行：</div><div class="line">``` bash</div><div class="line">java org.ec107.ssl.SSLServer</div></pre></td></tr></table></figure></p>
<p>在8266端口等待连接…</p>
<h2 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h2><p>客户端的代码相对简单，我们可以不在程序中指定SSL环境，而是在执行客户端程序时指定。需要注意的是客户端并没有导入证书，而是采用了默认的工厂方法构造SSLSocket：</p>
<ul>
<li>SSLSocketFactory factory=(SSLSocketFactory)SSLSocketFactory.getDefault(); //构造默认的工厂方法</li>
<li>Socket s=factory.createSocket(“localhost”,port);</li>
</ul>
<p>打开一个SSLSocket连接<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line">*SSL Socket 的客户端</div><div class="line">*@Author Bromon</div><div class="line">*/</div><div class="line"><span class="keyword">import</span> java.net.Socket;</div><div class="line"></div><div class="line"><span class="keyword">import</span> javax.net.ssl.SSLSocketFactory;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SSLClient</span> </span>&#123;</div><div class="line">    <span class="keyword">static</span> <span class="keyword">int</span> port = <span class="number">8266</span>;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            SSLSocketFactory factory = (SSLSocketFactory) SSLSocketFactory.getDefault();</div><div class="line"></div><div class="line">            Socket s = factory.createSocket(<span class="string">"localhost"</span>, port);</div><div class="line"></div><div class="line">            PrintWriter out = <span class="keyword">new</span> PrintWriter(s.getOutputStream(), <span class="keyword">true</span>);</div><div class="line">            out.println(<span class="string">"安全的说你好"</span>);</div><div class="line">            out.close();</div><div class="line">            s.close();</div><div class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">            System.out.println(e);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>把服务器产生的证书(SSLKey)拷贝到程序所在的目录，执行这个程序的时候需要向javax.net.ssl.trustStore环境变量传入证书名：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">java –Djavax.net.ssl.trustStore=SSLKey org.xxx.ssl.SSLClient //自己程序的包路径</div></pre></td></tr></table></figure></p>
<p>可以在服务器的控制台看到客户端发送过来的数据。<br>执行客户端可以有另一种方法，把证书拷贝到java home/lib/security目录下，名字改为jssecacerts，然后可以直接执行客户端：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">java org.xxx.ssl.SSLClient</div></pre></td></tr></table></figure></p>
<p>程序会自动的到上述目录下去寻找jssecacerts文件作为默认的证书。需要注意的是这里的java home并不是我们在安装J2SE时指定的那个JAVA_HOME。可以执行一个程序来得到java home的位置：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GetJavaHome</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</div><div class="line">        System.out.println(System.getProperty(“java.home”));</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>一般情况下(windows 2K)hava home的位置是在C:Program FilesJavaj2re1.4.0_02，相对的，证书就应该拷贝到C:Program FilesJavaj2re1.4.0_02libsecurity下，如果安装了自带JDK的Java IDE，比如 JBuilder，情况可能会有不同。</p>
<p>如果程序客户在不持有证书的情况下直接进行连接，服务器端会产生运行时异常，不允许进行连接。</p>
<blockquote>
<p>运行环境：windows 2K server，j2sdk1.4.1</p>
</blockquote>
<h2 id="SSL双向认证java实现"><a href="#SSL双向认证java实现" class="headerlink" title="SSL双向认证java实现"></a>SSL双向认证java实现</h2><p>下面通过模拟场景，介绍SSL双向认证的java实现。</p>
<p>默认的情况下，我认为读者已经对SSL原理有一定的了解，所以文章中对SSL的原理，不做详细的介绍。<br>如果有这个需要，那么通过GOOGLE，可以搜索到很多这样的文章。</p>
<p><strong> 模拟场景</strong><br>Server端和Client端通信，需要进行授权和身份的验证，即Client只能接受Server的消息，Server只能接受Client的消息。</p>
<p><strong> 实现技术</strong><br>JSSE（Java Security Socket Extension）<br>是Sun为了解决在Internet上的安全通讯而推出的解决方案。它实现了SSL和TSL（传输层安全）协议。在JSSE中包含了数据加密，服务器验证，消息完整性和客户端验证等技术。通过使用JSSE，开发人员可以在客户机和服务器之间通过TCP/IP协议安全地传输数据</p>
<p>为了实现消息认证。<br>Server需要：</p>
<ul>
<li>1）KeyStore: 其中保存服务端的私钥</li>
<li>2）Trust KeyStore:其中保存客户端的授权证书</li>
</ul>
<p>同样，Client需要：</p>
<ul>
<li>1）KeyStore：其中保存客户端的私钥</li>
<li>2）Trust KeyStore：其中保存服务端的授权证书</li>
</ul>
<p>我们可以使用Java自带的keytool命令，去生成这样信息文件<br>1）生成服务端私钥，并且导入到服务端KeyStore文件中<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">keytool -genkey -<span class="built_in">alias</span> serverkey -keystore kserver.keystore</div></pre></td></tr></table></figure></p>
<p>过程中，分别需要填写，根据需求自己设置就行</p>
<blockquote>
<p>keystore密码：123456<br>名字和姓氏：stone<br>组织单位名称：eulic<br>组织名称：eulic<br>城市或区域名称：HZ<br>州或省份名称：ZJ<br>国家代码：CN</p>
</blockquote>
<p>serverkey私钥的密码，不填写和keystore的密码一致：123456<br>就可以生成kserver.keystore文件<br>server.keystore是给服务端用的，其中保存着自己的私钥</p>
<p>2）根据私钥，导出服务端证书<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">keytool -<span class="built_in">export</span> -<span class="built_in">alias</span> serverkey -keystore kserver.keystore -file server.crt</div></pre></td></tr></table></figure></p>
<p>server.crt就是服务端的证书</p>
<p>3）将服务端证书，导入到客户端的Trust KeyStore中<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">keytool -import -<span class="built_in">alias</span> serverkey -file server.crt -keystore tclient.keystore</div></pre></td></tr></table></figure></p>
<p>tclient.keystore是给客户端用的，其中保存着受信任的证书</p>
<p>采用同样的方法，生成客户端的私钥，客户端的证书，并且导入到服务端的Trust KeyStore中</p>
<ul>
<li>1）keytool -genkey -alias clientkey -keystore kclient.keystore</li>
<li>2）keytool -export -alias clientkey -keystore kclient.keystore -file client.crt</li>
<li>3）keytool -import -alias clientkey -file client.crt -keystore tserver.keystore</li>
</ul>
<p>如此一来，生成的文件分成两组<br>服务端保存：kserver.keystore tserver.keystore<br>客户端保存：kclient.keystore  tclient.kyestore</p>
<p>接下来，就采用JSSE，分别生成SSLServerSocket,SSLSocket</p>
<p>服务端，生成SSLServerSocket代码<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">SSLContext ctx = SSLContext.getInstance(<span class="string">"SSL"</span>);</div><div class="line"></div><div class="line">KeyManagerFactory kmf = KeyManagerFactory.getInstance(<span class="string">"SunX509"</span>);</div><div class="line">TrustManagerFactory tmf = TrustManagerFactory.getInstance(<span class="string">"SunX509"</span>);</div><div class="line"></div><div class="line">KeyStore ks = KeyStore.getInstance(<span class="string">"JKS"</span>);</div><div class="line">KeyStore tks = KeyStore.getInstance(<span class="string">"JKS"</span>);</div><div class="line"></div><div class="line">ks.load(<span class="keyword">new</span> FileInputStream(<span class="string">"data/kserver.keystore"</span>), SERVER_KEY_STORE_PASSWORD.toCharArray());</div><div class="line">tks.load(<span class="keyword">new</span> FileInputStream(<span class="string">"data/tserver.keystore"</span>), SERVER_TRUST_KEY_STORE_PASSWORD.toCharArray());</div><div class="line"></div><div class="line">kmf.init(ks, SERVER_KEY_STORE_PASSWORD.toCharArray());</div><div class="line">tmf.init(tks);</div><div class="line"></div><div class="line">ctx.init(kmf.getKeyManagers(), tmf.getTrustManagers(), <span class="keyword">null</span>);</div><div class="line"></div><div class="line"><span class="keyword">return</span> (SSLServerSocket) ctx.getServerSocketFactory().createServerSocket(DEFAULT_PORT);</div></pre></td></tr></table></figure></p>
<p>客户端，生成SSLSocket的代码，大同小异<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">SSLContext ctx = SSLContext.getInstance(<span class="string">"SSL"</span>);</div><div class="line"></div><div class="line">KeyManagerFactory kmf = KeyManagerFactory.getInstance(<span class="string">"SunX509"</span>);</div><div class="line">TrustManagerFactory tmf = TrustManagerFactory.getInstance(<span class="string">"SunX509"</span>);</div><div class="line"></div><div class="line">KeyStore ks = KeyStore.getInstance(<span class="string">"JKS"</span>);</div><div class="line">KeyStore tks = KeyStore.getInstance(<span class="string">"JKS"</span>);</div><div class="line"></div><div class="line">ks.load(<span class="keyword">new</span> FileInputStream(<span class="string">"data/kclient.keystore"</span>), CLIENT_KEY_STORE_PASSWORD.toCharArray());</div><div class="line">tks.load(<span class="keyword">new</span> FileInputStream(<span class="string">"data/tclient.keystore"</span>), CLIENT_TRUST_KEY_STORE_PASSWORD.toCharArray());</div><div class="line"></div><div class="line">kmf.init(ks, CLIENT_KEY_STORE_PASSWORD.toCharArray());</div><div class="line">tmf.init(tks);</div><div class="line"></div><div class="line">ctx.init(kmf.getKeyManagers(), tmf.getTrustManagers(), <span class="keyword">null</span>);</div><div class="line"></div><div class="line"><span class="keyword">return</span> (SSLSocket) ctx.getSocketFactory().createSocket(DEFAULT_HOST, DEFAULT_PORT);</div></pre></td></tr></table></figure></p>
<p>如此，就完成了服务端和客户端之间的基于身份认证的交互。</p>
<p>client采用kclient.keystore中的clientkey私钥进行数据加密，发送给server<br>server采用tserver.keystore中的client.crt证书（包含了clientkey的公钥）对数据解密，如果解密成功，证明消息来自client，进行逻辑处理</p>
<p>server采用kserver.keystore中的serverkey私钥进行数据叫米，发送给client<br>client采用tclient.keystore中的server.crt证书（包含了serverkey的公钥）对数据解密，如果解密成功，证明消息来自server，进行逻辑处理</p>
<p>如果过程中，解密失败，那么证明消息来源错误。不进行逻辑处理。这样就完成了双向的身份认证。</p>
<p>下面我附上简单的SSLServer.java SSLClient.java，供大家演示用。<br>启动服务端的时候，大家不妨采用telnet 127.0.0.1 7777连接，看看能不能实现消息传递。</p>
<p><a href="http://writeblog.csdn.net/Files/stone2083/java/lab.zip" target="_blank" rel="external">SSL DEMO</a><br>备注：<br>demo是采用maven构建项目的<br>demo文件的编码是用utf8，为了避免中文乱码，请把workspace设置成utf8编码</p>
<p>申明下,我自己对ssl的认识还是很肤浅的,仅仅上次和cnnic合作的时候,为了了解安全性问题,才被迫稍微看了相应的一些知识.</p>
<p>所谓认证,是要对某台(当然可以是集群)服务器身份做认证.<br>认证方式有两种:<br>自签名认证:服务端生成key,然后根据key导出证书.公布于站点.<br>通过第三方认证机构认证:有服务端生成key,然后导出认证信息,交由天威诚信等第三方认证机构认证,最后生成证书,公布于站点.</p>
<p>客户端,将证书下载,确认为可信任公司认证信息,并且导入到受信任区(trustscore),建立连接与服务端进行正常交互.至此,就完成了对服务端的认证.<br>所以客户端必须将证书导入信任区.</p>
<p>java中,可以查看证书:<br>写个简单的方法:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">FileInputStream fis = <span class="keyword">new</span> FileInputStream(<span class="string">"cert.cer"</span>);</div><div class="line">CertificateFactory cf=CertificateFactory.getInstance(<span class="string">"X509"</span>);</div><div class="line">X509Certificate c=(X509Certificate) cf.generateCertificate(fis);</div><div class="line">System.out.println(c.getSubjectDN());</div><div class="line"><span class="comment">//可以查看下X509Certificate的一些get方法.</span></div></pre></td></tr></table></figure></p>
<p>其实keytool仅仅是jdk中的工具.<br>openssl是更常用的一个工具,可见<a href="http://www.openssl.org/" target="_blank" rel="external">官网</a></p>
<h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><ul>
<li><a href="http://blog.csdn.net/yangdelong/article/details/4575983" target="_blank" rel="external">用SSL构建安全的Socket</a></li>
<li><a href="http://www.blogjava.net/stone2083/archive/2008/07/10/169015.html" target="_blank" rel="external">SSL双向认证java实现</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/11/30/protocol_ssl_socket/" data-id="cj4zx2kk1005kqonhm4yrp2lz" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/socket/">socket</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ssl/">ssl</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-protocol_http_and_https" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/11/30/protocol_http_and_https/" class="article-date">
  <time datetime="2015-11-30T07:48:29.000Z" itemprop="datePublished">2015-11-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/protocol/">protocol</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/30/protocol_http_and_https/">HTTP协议和HTTPS协议详解</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>HTTP是一个属于应用层的面向对象的协议，由于其简捷、快速的方式，适用于分布式超媒体信息系统。它于1990年提出，经过几年的使用与发展，得到不断地完善和扩展。目前在WWW中使用的是HTTP/1.0的第六版，HTTP/1.1的规范化工作正在进行之中，而且HTTP-NG(Next Generation of HTTP)的建议已经提出。<br>HTTP协议的主要特点可概括如下：<br>1.支持客户/服务器模式。<br>2.简单快速：客户向服务器请求服务时，只需传送请求方法和路径。请求方法常用的有GET、HEAD、POST。每种方法规定了客户与服务器联系的类型不同。由于HTTP协议简单，使得HTTP服务器的程序规模小，因而通信速度很快。<br>3.灵活：HTTP允许传输任意类型的数据对象。正在传输的类型由Content-Type加以标记。<br>4.无连接：无连接的含义是限制每次连接只处理一个请求。服务器处理完客户的请求，并收到客户的应答后，即断开连接。采用这种方式可以节省传输时间。<br>5.无状态：HTTP协议是无状态协议。无状态是指协议对于事务处理没有记忆能力。缺少状态意味着如果后续处理需要前面的信息，则它必须重传，这样可能导致每次连接传送的数据量增大。另一方面，在服务器不需要先前信息时它的应答就较快。</p>
<h2 id="HTTP协议"><a href="#HTTP协议" class="headerlink" title="HTTP协议"></a>HTTP协议</h2><p><strong> 1.1 HTTP协议详解之URL篇</strong><br>http（超文本传输协议）是一个基于请求与响应模式的、无状态的、应用层的协议，常基于TCP的连接方式，HTTP1.1版本中给出一种持续连接的机制，绝大多数的Web开发，都是构建在HTTP协议之上的Web应用。</p>
<p>HTTP URL (URL是一种特殊类型的URI，包含了用于查找某个资源的足够的信息)的格式如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">http://host[<span class="string">":"</span>port][abs_path]</div></pre></td></tr></table></figure></p>
<p>http表示要通过HTTP协议来定位网络资源；host表示合法的Internet主机域名或者IP地址；port指定一个端口号，为空则使用缺省端口80；abs_path指定请求资源的URI；如果URL中没有给出abs_path，那么当它作为请求URI时，必须以“/”的形式给出，通常这个工作浏览器自动帮我们完成。<br>eg:<br>1、输入：<br>2、http:192.168.0.116:8080/index.jsp</p>
<p><strong> 1.2 HTTP协议详解之请求篇</strong><br>http请求由三部分组成，分别是：请求行、消息报头、请求正文</p>
<p>1、请求行以一个方法符号开头，以空格分开，后面跟着请求的URI和协议的版本，格式如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Method Request-URI HTTP-Version CRLF</div></pre></td></tr></table></figure></p>
<p>其中 Method表示请求方法；Request-URI是一个统一资源标识符；HTTP-Version表示请求的HTTP协议版本；CRLF表示回车和换行（除了作为结尾的CRLF外，不允许出现单独的CR或LF字符）。</p>
<p>请求方法（所有方法全为大写）有多种，各个方法的解释如下：</p>
<ul>
<li>GET　　　 请求获取Request-URI所标识的资源</li>
<li>POST　　　在Request-URI所标识的资源后附加新的数据</li>
<li>HEAD　　　请求获取由Request-URI所标识的资源的响应消息报头</li>
<li>PUT　　　 请求服务器存储一个资源，并用Request-URI作为其标识</li>
<li>DELETE　　请求服务器删除Request-URI所标识的资源</li>
<li>TRACE　　 请求服务器回送收到的请求信息，主要用于测试或诊断</li>
<li>CONNECT　 保留将来使用</li>
<li>OPTIONS　 请求查询服务器的性能，或者查询与资源相关的选项和需求</li>
</ul>
<p>应用举例：<br>GET方法：在浏览器的地址栏中输入网址的方式访问网页时，浏览器采用GET方法向服务器获取资源，eg:GET /form.html HTTP/1.1 (CRLF)</p>
<p>POST方法要求被请求服务器接受附在请求后面的数据，常用于提交表单。<br>eg：POST /reg.jsp HTTP/ (CRLF)<br>Accept:image/gif,image/x-xbit,… (CRLF)<br>…<br>HOST:www.guet.edu.cn (CRLF)<br>Content-Length:22 (CRLF)<br>Connection:Keep-Alive (CRLF)<br>Cache-Control:no-cache (CRLF)<br>(CRLF) //该CRLF表示消息报头已经结束，在此之前为消息报头<br>user=jeffrey&amp;pwd=1234 //此行以下为提交的数据</p>
<p>HEAD方法与GET方法几乎是一样的，对于HEAD请求的回应部分来说，它的HTTP头部中包含的信息与通过GET请求所得到的信息是相同的。利用这个方法，不必传输整个资源内容，就可以得到Request-URI所标识的资源的信息。该方法常用于测试超链接的有效性，是否可以访问，以及最近是否更新。<br>2、请求报头后述<br>3、请求正文(略)</p>
<p><strong> 1.3 HTTP协议详解之响应篇</strong><br>在接收和解释请求消息后，服务器返回一个HTTP响应消息。</p>
<p>HTTP响应也是由三个部分组成，分别是：状态行、消息报头、响应正文<br>1、状态行格式如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">HTTP-Version Status-Code Reason-Phrase CRLF</div></pre></td></tr></table></figure></p>
<p>其中，HTTP-Version表示服务器HTTP协议的版本；Status-Code表示服务器发回的响应状态代码；Reason-Phrase表示状态代码的文本描述。<br>状态代码有三位数字组成，第一个数字定义了响应的类别，且有五种可能取值：</p>
<ul>
<li>1xx：指示信息     –表示请求已接收，继续处理</li>
<li>2xx：成功         –表示请求已被成功接收、理解、接受</li>
<li>3xx：重定向       –要完成请求必须进行更进一步的操作</li>
<li>4xx：客户端错误   –请求有语法错误或请求无法实现</li>
<li>5xx：服务器端错误 –服务器未能实现合法的请求</li>
</ul>
<p>常见状态代码、状态描述、说明：</p>
<ul>
<li>200 OK //客户端请求成功</li>
<li>400 Bad Request //客户端请求有语法错误，不能被服务器所理解</li>
<li>401 Unauthorized //请求未经授权，这个状态代码必须和WWW-Authenticate报头域一起使用</li>
<li>403 Forbidden //服务器收到请求，但是拒绝提供服务</li>
<li>404 Not Found //请求资源不存在，eg：输入了错误的URL</li>
<li>500 Internal Server Error //服务器发生不可预期的错误</li>
<li>503 Server Unavailable //服务器当前不能处理客户端的请求，一段时间后可能恢复正常<br>eg：HTTP/1.1 200 OK （CRLF）</li>
</ul>
<p>2、响应报头后述</p>
<p>3、响应正文就是服务器返回的资源的内容</p>
<p><strong> 1.4 HTTP协议详解之消息报头篇</strong><br>HTTP消息由客户端到服务器的请求和服务器到客户端的响应组成。请求消息和响应消息都是由开始行（对于请求消息，开始行就是请求行，对于响应消息，开始行就是状态行），消息报头（可选），空行（只有CRLF的行），消息正文（可选）组成。</p>
<p>HTTP消息报头包括普通报头、请求报头、响应报头、实体报头。<br>每一个报头域都是由名字+“：”+空格+值 组成，消息报头域的名字是大小写无关的。</p>
<p>1、普通报头<br>在普通报头中，有少数报头域用于所有的请求和响应消息，但并不用于被传输的实体，只用于传输的消息。<br>eg：Cache-Control 用于指定缓存指令，缓存指令是单向的（响应中出现的缓存指令在请求中未必会出现），且是独立的（一个消息的缓存指令不会影响另一个消息处理的缓存机制），HTTP1.0使用的类似的报头域为Pragma。</p>
<ul>
<li>请求时的缓存指令包括：no-cache（用于指示请求或响应消息不能缓存）、no-store、max-age、max-stale、min-fresh、only-if-cached;</li>
<li>响应时的缓存指令包括：public、private、no-cache、no-store、no-transform、must-revalidate、proxy-revalidate、max-age、s-maxage.</li>
</ul>
<p>eg：为了指示IE浏览器（客户端）不要缓存页面，服务器端的JSP程序可以编写如下：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">response.sehHeader(<span class="string">"Cache-Control"</span>,<span class="string">"no-cache"</span>);</div><div class="line"><span class="comment">//response.setHeader("Pragma","no-cache");作用相当于上述代码，通常两者//合用</span></div></pre></td></tr></table></figure></p>
<p>这句代码将在发送的响应消息中设置普通报头域：Cache-Control:no-cache</p>
<p>Date普通报头域表示消息产生的日期和时间</p>
<p>Connection普通报头域允许发送指定连接的选项。例如指定连接是连续，或者指定“close”选项，通知服务器，在响应完成后，关闭连接</p>
<p>2、请求报头<br>请求报头允许客户端向服务器端传递请求的附加信息以及客户端自身的信息。<br>常用的请求报头</p>
<ul>
<li>Accept请求报头域用于指定客户端接受哪些类型的信息。<br>eg：Accept：image/gif，表明客户端希望接受GIF图象格式的资源；Accept：text/html，表明客户端希望接受html文本。</li>
<li>Accept-Charset请求报头域用于指定客户端接受的字符集。<br>eg：Accept-Charset:iso-8859-1,gb2312.如果在请求消息中没有设置这个域，缺省是任何字符集都可以接受。、</li>
<li>Accept-Encoding请求报头域类似于Accept，但是它是用于指定可接受的内容编码。<br>eg：Accept-Encoding:gzip.deflate.如果请求消息中没有设置这个域服务器假定客户端对各种内容编码都可以接受。</li>
<li>Accept-Language请求报头域类似于Accept，但是它是用于指定一种自然语言。<br>eg：Accept-Language:zh-cn.如果请求消息中没有设置这个报头域，服务器假定客户端对各种语言都可以接受。</li>
<li>Authorization 请求报头域主要用于证明客户端有权查看某个资源。当浏览器访问一个页面时，如果收到服务器的响应代码为401（未授权），可以发送一个包含Authorization请求报头域的请求，要求服务器对其进行验证。<br>Host请求报头域主要用于指定被请求资源的Internet主机和端口号，它通常从HTTP URL中提取出来的，发送请求时，该报头域是必需的。<br>eg：我们在浏览器中输入：<a href="http://www.guet.edu.cn/index.html" target="_blank" rel="external">http://www.guet.edu.cn/index.html</a></li>
</ul>
<p>浏览器发送的请求消息中，就会包含Host请求报头域，如下：Host：www.guet.edu.cn<br>此处使用缺省端口号80，若指定了端口号，则变成：Host：www.guet.edu.cn:指定端口号</p>
<p>User-Agent我们上网登陆论坛的时候，往往会看到一些欢迎信息，其中列出了你的操作系统的名称和版本，你所使用的浏览器的名称和版本，这往往让很多人感到很神奇，实际上，服务器应用程序就是从User-Agent这个请求报头域中获取到这些信息。User-Agent请求报头域允许客户端将它的操作系统、浏览器和其它属性告诉服务器。不过，这个报头域不是必需的，如果我们自己编写一个浏览器，不使用User-Agent请求报头域，那么服务器端就无法得知我们的信息了。<br>请求报头举例：</p>
<ul>
<li>GET /form.html HTTP/1.1 (CRLF)</li>
<li>Accept:image/gif,image/x-xbitmap,image/jpeg,application/x-shockwave-flash,application/vnd.ms-excel,application/vnd.ms-powerpoint,application/msword,<em>/</em> (CRLF)</li>
<li>Accept-Language:zh-cn (CRLF)</li>
<li>Accept-Encoding:gzip,deflate (CRLF)</li>
<li>If-Modified-Since:Wed,05 Jan 2007 11:21:25 GMT (CRLF)</li>
<li>If-None-Match:W/“80b1a4c018f3c41:8317” (CRLF)</li>
<li>User-Agent:Mozilla/4.0(compatible;MSIE6.0;Windows NT 5.0) (CRLF)</li>
<li>Host:www.guet.edu.cn (CRLF)</li>
<li>Connection:Keep-Alive (CRLF)</li>
</ul>
<p>3、响应报头<br>响应报头允许服务器传递不能放在状态行中的附加响应信息，以及关于服务器的信息和对Request-URI所标识的资源进行下一步访问的信息。<br>常用的响应报头<br>Location响应报头域用于重定向接受者到一个新的位置。Location响应报头域常用在更换域名的时候。<br>Server响应报头域包含了服务器用来处理请求的软件信息。与User-Agent请求报头域是相对应的。下面是Server响应报头域的一个例子：Server：Apache-Coyote/1.1<br>WWW-Authenticate响应报头域必须被包含在401（未授权的）响应消息中，客户端收到401响应消息时候，并发送Authorization报头域请求服务器对其进行验证时，服务端响应报头就包含该报头域。<br>eg：WWW-Authenticate:Basic realm=”Basic Auth Test!” //可以看出服务器对请求资源采用的是基本验证机制。</p>
<p>4、实体报头<br>请求和响应消息都可以传送一个实体。一个实体由实体报头域和实体正文组成，但并不是说实体报头域和实体正文要在一起发送，可以只发送实体报头域。实体报头定义了关于实体正文（eg：有无实体正文）和请求所标识的资源的元信息。<br>常用的实体报头</p>
<ul>
<li>Content-Encoding实体报头域被用作媒体类型的修饰符，它的值指示了已经被应用到实体正文的附加内容的编码，因而要获得Content-Type报头域中所引用的媒体类型，必须采用相应的解码机制。ContentEncoding这样用于记录文档的压缩方法，eg：Content-Encoding：gzip</li>
<li>Content-Language实体报头域描述了资源所用的自然语言。没有设置该域则认为实体内容将提供给所有的语言阅读<br>者。eg：Content-Language:da</li>
<li>Content-Length实体报头域用于指明实体正文的长度，以字节方式存储的十进制数字来表示。</li>
<li>Content-Type实体报头域用语指明发送给接收者的实体正文的媒体类型。eg：Content-Type:text/html;charset=ISO-8859-1 Content-Type:text/html;charset=GB2312</li>
<li>Last-Modified实体报头域用于指示资源的最后修改日期和时间。</li>
<li>Expires实体报头域给出响应过期的日期和时间。为了让代理服务器或浏览器在一段时间以后更新缓存中(再次访问曾访问过的页面时，直接从缓存中加载，缩短响应时间和降低服务器负载)的页面，我们可以使用Expires实体报头域指定页面过期的时间。eg：Expires：Thu，15 Sep 2006 16:23:12 GMT<br>HTTP1.1的客户端和缓存必须将其他非法的日期格式（包括0）看作已经过期。eg：为了让浏览器不要缓存页面，我们也可以利用Expires实体报头域，设置为0，jsp中程序如下：response.setDateHeader(“Expires”,”0”);</li>
</ul>
<p>工具类为HttpUtil.java<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.io.UnsupportedEncodingException;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.apache.http.HttpEntity;</div><div class="line"><span class="keyword">import</span> org.apache.http.HttpResponse;</div><div class="line"><span class="keyword">import</span> org.apache.http.client.ClientProtocolException;</div><div class="line"><span class="keyword">import</span> org.apache.http.client.methods.HttpGet;</div><div class="line"><span class="keyword">import</span> org.apache.http.client.methods.HttpPost;</div><div class="line"><span class="keyword">import</span> org.apache.http.entity.StringEntity;</div><div class="line"><span class="keyword">import</span> org.apache.http.impl.client.DefaultHttpClient;</div><div class="line"><span class="keyword">import</span> org.apache.http.params.HttpConnectionParams;</div><div class="line"><span class="keyword">import</span> org.apache.http.params.HttpParams;</div><div class="line"><span class="keyword">import</span> org.apache.http.util.EntityUtils;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpUtil</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">httpGet</span><span class="params">(String httpUrl)</span> </span>&#123;</div><div class="line">        String result = <span class="string">""</span>;</div><div class="line">        DefaultHttpClient httpclient = <span class="keyword">new</span> DefaultHttpClient();<span class="comment">// 创建http客户端</span></div><div class="line">        HttpGet httpget = <span class="keyword">new</span> HttpGet(httpUrl);</div><div class="line">        HttpResponse response = <span class="keyword">null</span>;</div><div class="line">        HttpParams params = httpclient.getParams(); <span class="comment">// 计算网络超时用</span></div><div class="line">        HttpConnectionParams.setConnectionTimeout(params, <span class="number">15</span> * <span class="number">1000</span>);</div><div class="line">        HttpConnectionParams.setSoTimeout(params, <span class="number">20</span> * <span class="number">1000</span>);</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            response = httpclient.execute(httpget);</div><div class="line">            HttpEntity entity = response.getEntity();<span class="comment">// 得到http的内容</span></div><div class="line">            response.getStatusLine().getStatusCode();<span class="comment">// 得到http的状态返回值</span></div><div class="line">            result = EntityUtils.toString(response.getEntity());<span class="comment">// 得到具体的返回值，一般是xml文件</span></div><div class="line">            entity.consumeContent();<span class="comment">// 如果entity不为空，则释放内存空间</span></div><div class="line">            httpclient.getCookieStore();<span class="comment">// 得到cookis</span></div><div class="line">            httpclient.getConnectionManager().shutdown();<span class="comment">// 关闭http客户端</span></div><div class="line">        &#125; <span class="keyword">catch</span> (ClientProtocolException e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> result;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">httpPost</span><span class="params">(String httpUrl, String data)</span> </span>&#123;</div><div class="line">        String result = <span class="string">""</span>;</div><div class="line">        DefaultHttpClient httpclient = <span class="keyword">new</span> DefaultHttpClient();</div><div class="line">        HttpPost httpPost = <span class="keyword">new</span> HttpPost(httpUrl);</div><div class="line">        <span class="comment">// httpclient.setCookieStore(DataDefine.mCookieStore);</span></div><div class="line">        HttpParams params = httpclient.getParams(); <span class="comment">// 计算网络超时用</span></div><div class="line">        HttpConnectionParams.setConnectionTimeout(params, <span class="number">15</span> * <span class="number">1000</span>);</div><div class="line">        HttpConnectionParams.setSoTimeout(params, <span class="number">20</span> * <span class="number">1000</span>);</div><div class="line">        httpPost.setHeader(<span class="string">"Content-Type"</span>, <span class="string">"text/xml"</span>);</div><div class="line">        StringEntity httpPostEntity;</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            httpPostEntity = <span class="keyword">new</span> StringEntity(data, <span class="string">"UTF-8"</span>);</div><div class="line">            httpPost.setEntity(httpPostEntity);</div><div class="line">            HttpResponse response = httpclient.execute(httpPost);</div><div class="line">            HttpEntity entity = response.getEntity();<span class="comment">// 得到http的内容</span></div><div class="line">            response.getStatusLine().getStatusCode();<span class="comment">// 得到http的状态返回值</span></div><div class="line">            result = EntityUtils.toString(response.getEntity());<span class="comment">// 得到具体的返回值，一般是xml文件</span></div><div class="line">            entity.consumeContent();<span class="comment">// 如果entity不为空，则释放内存空间</span></div><div class="line">            httpclient.getCookieStore();<span class="comment">// 得到cookis</span></div><div class="line">            httpclient.getConnectionManager().shutdown();<span class="comment">// 关闭http客户端</span></div><div class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125; <span class="comment">// base64是经过编码的字符串，可以理解为字符串 // StringEntity</span></div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            httpPostEntity = <span class="keyword">new</span> StringEntity(<span class="string">"UTF-8"</span>);</div><div class="line">        &#125; <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;</div><div class="line">            <span class="comment">// TODO Auto-generated catch block</span></div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> result;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="HTTPS协议"><a href="#HTTPS协议" class="headerlink" title="HTTPS协议"></a>HTTPS协议</h2><p>HTTPS（Hypertext Transfer Protocol over Secure Socket Layer，基于SSL的HTTP协议）使用了HTTP协议，但HTTPS使用不同于HTTP协议的默认端口及一个加密、身份验证层（HTTP与TCP之间）。这个协议的最初研发由网景公司进行，提供了身份验证与加密通信方法，现在它被广泛用于互联网上安全敏感的通信。HTTPS是一个安全通信通道，用于在客户计算机和服务器之间交换信息。它使用安全套接字层(SSL)进行信息交换，简单来说它是HTTP的安全版。它是由Netscape开发并内置于其浏览器中，用于对数据进行压缩和解压操作，并返回网络上传送回的结果。</p>
<p>HTTPS实际上应用了Netscape的安全全套接字层(SSL)作为HTTP应用层的子层。(HTTPS使用端口443，而不是象HTTP那样使用端口80来和TCP/IP进行通信。)SSL使用40 位关键字作为RC4流加密算法，这对于商业信息的加密是合适的。HTTPS和SSL支持使用X。509数字认证，如果需要的话用户可以确认发送者是谁。</p>
<p>客户端在使用HTTPS方式与Web服务器通信时有以下几个步骤。<br>（1）客户使用https的URL访问Web服务器，要求与Web服务器建立SSL连接。<br>（2）Web服务器收到客户端请求后，会将网站的证书信息（证书中包含公钥）传送一份给客户端。<br>（3）客户端的浏览器与Web服务器开始协商SSL连接的安全等级，也就是信息加密的等级。<br>（4）客户端的浏览器根据双方同意的安全等级，建立会话密钥，然后利用网站的公钥将会话密钥加密，并传送给网站。<br>（5）Web服务器利用自己的私钥解密出会话密钥。<br>（6）Web服务器利用会话密钥加密与客户端之间的通信。</p>
<p>工具类为HttpsUtil.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.BufferedReader;</div><div class="line"><span class="keyword">import</span> java.io.DataOutputStream;</div><div class="line"><span class="keyword">import</span> java.io.InputStreamReader;</div><div class="line"><span class="keyword">import</span> java.net.HttpURLConnection;</div><div class="line"><span class="keyword">import</span> java.net.URL;</div><div class="line"></div><div class="line"><span class="keyword">import</span> javax.net.ssl.HostnameVerifier;</div><div class="line"><span class="keyword">import</span> javax.net.ssl.HttpsURLConnection;</div><div class="line"><span class="keyword">import</span> javax.net.ssl.SSLContext;</div><div class="line"><span class="keyword">import</span> javax.net.ssl.TrustManager;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpsUtil</span> </span>&#123;</div><div class="line">    <span class="keyword">static</span> TrustManager[] xtmArray = <span class="keyword">new</span> MytmArray[] &#123; <span class="keyword">new</span> MytmArray() &#125;;<span class="comment">// 创建信任规则列表</span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">int</span> CONNENT_TIMEOUT = <span class="number">15000</span>;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">int</span> READ_TIMEOUT = <span class="number">15000</span>;</div><div class="line">    <span class="keyword">static</span> HostnameVerifier DO_NOT_VERIFY = <span class="keyword">new</span> HostnameVerifier() &#123;</div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">verify</span><span class="params">(String hostname, SSLSession session)</span> </span>&#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * * 信任所有主机-对于任何证书都不做检查 Create a trust manager that does not validate *</div><div class="line">     * certificate chains， Android 采用X509的证书信息机制，Install the all-trusting trust</div><div class="line">     * * manager</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">trustAllHosts</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            SSLContext sc = SSLContext.getInstance(<span class="string">"TLS"</span>);</div><div class="line">            sc.init(<span class="keyword">null</span>, xtmArray, <span class="keyword">new</span> java.security.SecureRandom());</div><div class="line">            HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory()); <span class="comment">// 不进行主机名确认,对所有主机</span></div><div class="line">            HttpsURLConnection.setDefaultHostnameVerifier(DO_NOT_VERIFY);</div><div class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">    &#125; </div><div class="line">    </div><div class="line">    <span class="comment">// https get方法，返回值是https请求，服务端返回的数据string类型，数据进行xml解析 </span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">HttpsGet</span><span class="params">(String httpsurl)</span> </span>&#123; </div><div class="line">        <span class="keyword">return</span> HttpsPost(httpsurl, <span class="keyword">null</span>); </div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * https post方法，返回值是https请求，服务端返回的数据string类型，数据进行xml解析</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">HttpsPost</span><span class="params">(String httpsurl, String data)</span> </span>&#123;</div><div class="line">        String result = <span class="keyword">null</span>;</div><div class="line">        HttpURLConnection http = <span class="keyword">null</span>;</div><div class="line">        URL url;</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            url = <span class="keyword">new</span> URL(httpsurl); <span class="comment">// 判断是http请求还是https请求</span></div><div class="line">            <span class="keyword">if</span> (url.getProtocol().toLowerCase().equals(<span class="string">"https"</span>)) &#123;</div><div class="line">                trustAllHosts();</div><div class="line">                http = (HttpsURLConnection) url.openConnection();</div><div class="line">                ((HttpsURLConnection) http).setHostnameVerifier(DO_NOT_VERIFY);<span class="comment">// 不进行主机名确认</span></div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                http = (HttpURLConnection) url.openConnection();</div><div class="line">            &#125;</div><div class="line">            http.setConnectTimeout(CONNENT_TIMEOUT);<span class="comment">// 设置超时时间</span></div><div class="line">            http.setReadTimeout(READ_TIMEOUT);</div><div class="line">            <span class="keyword">if</span> (data == <span class="keyword">null</span>) &#123;</div><div class="line">                http.setRequestMethod(<span class="string">"GET"</span>);<span class="comment">// 设置请求类型</span></div><div class="line">                http.setDoInput(<span class="keyword">true</span>);</div><div class="line">                <span class="comment">// http.setRequestProperty("Content-Type", "text/xml");</span></div><div class="line">                <span class="keyword">if</span> (AppSession.mCookieStore != <span class="keyword">null</span>)</div><div class="line">                    http.setRequestProperty(<span class="string">"Cookie"</span>, AppSession.mCookieStore);</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                http.setRequestMethod(<span class="string">"POST"</span>);<span class="comment">// 设置请求类型为post</span></div><div class="line">                http.setDoInput(<span class="keyword">true</span>);</div><div class="line">                http.setDoOutput(<span class="keyword">true</span>);</div><div class="line">                <span class="comment">// http.setRequestProperty("Content-Type", "text/xml");</span></div><div class="line">                <span class="keyword">if</span> (AppSession.mCookieStore != <span class="keyword">null</span> &amp;&amp; AppSession.mCookieStore.trim().length() &gt; <span class="number">0</span>)</div><div class="line">                    http.setRequestProperty(<span class="string">"Cookie"</span>, AppSession.mCookieStore);</div><div class="line">                DataOutputStream out = <span class="keyword">new</span> DataOutputStream(http.getOutputStream());</div><div class="line">                out.writeBytes(data);</div><div class="line">                out.flush();</div><div class="line">                out.close();</div><div class="line">            &#125; <span class="comment">// 设置http返回状态200（ok）还是403</span></div><div class="line">            AppSession.httpsResponseCode = http.getResponseCode();</div><div class="line">            BufferedReader in = <span class="keyword">null</span>;</div><div class="line">            <span class="keyword">if</span> (AppSession.httpsResponseCode == <span class="number">200</span>) &#123;</div><div class="line">                getCookie(http);</div><div class="line">                in = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(http.getInputStream()));</div><div class="line">            &#125; <span class="keyword">else</span></div><div class="line">                in = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(http.getErrorStream()));</div><div class="line">            String temp = in.readLine();</div><div class="line">            <span class="keyword">while</span> (temp != <span class="keyword">null</span>) &#123;</div><div class="line">                <span class="keyword">if</span> (result != <span class="keyword">null</span>)</div><div class="line">                    result += temp;</div><div class="line">                <span class="keyword">else</span></div><div class="line">                    result = temp;</div><div class="line">                temp = in.readLine();</div><div class="line">            &#125;</div><div class="line">            in.close();</div><div class="line">            http.disconnect();</div><div class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> result;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/** * 得到cookie * */</span></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">getCookie</span><span class="params">(HttpURLConnection http)</span> </span>&#123;</div><div class="line">        String cookieVal = <span class="keyword">null</span>;</div><div class="line">        String key = <span class="keyword">null</span>;</div><div class="line">        AppSession.mCookieStore = <span class="string">""</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; (key = http.getHeaderFieldKey(i)) != <span class="keyword">null</span>; i++) &#123;</div><div class="line">            <span class="keyword">if</span> (key.equalsIgnoreCase(<span class="string">"set-cookie"</span>)) &#123;</div><div class="line">                cookieVal = http.getHeaderField(i);</div><div class="line">                cookieVal = cookieVal.substring(<span class="number">0</span>, cookieVal.indexOf(<span class="string">";"</span>));</div><div class="line">                AppSession.mCookieStore = AppSession.mCookieStore + cookieVal + <span class="string">";"</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>总的来说，http效率更高，https安全性更高。</p>
<h2 id="两者的区别"><a href="#两者的区别" class="headerlink" title="两者的区别"></a>两者的区别</h2><p>https协议需要到ca申请证书，一般免费证书很少，需要交费。<br>http是超文本传输协议，信息是明文传输，https 则是具有安全性的ssl加密传输协议 http和https使用的是完全不同的连接方式用的端口也不一样：前者是80，后者是443。<br>http的连接很简单，是无状态的 HTTPS协议是由SSL+HTTP协议构建的可进行加密传输、身份认证的网络协议 要比http协议安全 HTTPS解决的问题：</p>
<p>1、信任主机的问题。 采用https 的server 必须从CA 申请一个用于证明服务器用途类型的证书。<br>改证书只有用于对应的server 的时候，客户度才信任次主机。所以目前所有的银行系统网站，关键部分应用都是https 的。 客户通过信任该证书，从而信任了该主机。其实这样做效率很低，但是银行更侧重安全。 这一点对我们没有任何意义，我们的server，采用的证书不管自己issue 还是从公众的地方issue， 客户端都是自己人，所以我们也就肯定信任该server。</p>
<p>2、通讯过程中的数据的泄密和被窜改。<br>1）一般意义上的https， 就是 server 有一个证书。<br>主要目的是保证server 就是他声称的server。这个跟第一点一样。服务端和客户端之间的所有通讯，都是加密的。<br>具体讲，是客户端产生一个对称的密钥，通过server 的证书来交换密钥。 一般意义上的握手过程。加下来所有的信息往来就都是加密的。 第三方即使截获，也没有任何意义。因为他没有密钥。当然窜改也就没有什么意义了。</p>
<p>2）少许对客户端有要求的情况下，会要求客户端也必须有一个证书。<br>这里客户端证书，其实就类似表示个人信息的时候，除了用户名/密码， 还有一个CA 认证过的身份。 应为个人证书一般来说上别人无法模拟的，所有这样能够更深的确认自己的身份。目前少数个人银行的专业版是这种做法，具体证书可能是拿U盘作为一个备份的载体。像我用的交通银行的网上银行就是采取的这种方式。 HTTPS 一定是繁琐的。<br>本来简单的http协议，一个get一个response。由于https 要还密钥和确认加密算法的需要。单握手就需要6/7 个往返。任何应用中，过多的round trip 肯定影响性能。接下来才是具体的http协议，每一次响应或者请求， 都要求客户端和服务端对会话的内容做加密/解密。尽管对称加密/解密效率比较高，可是仍然要消耗过多的CPU，为此有专门的SSL 芯片。 如果CPU 信能比较低的话，肯定会降低性能，从而不能serve 更多的请求。</p>
<h2 id="SSL的简介"><a href="#SSL的简介" class="headerlink" title="SSL的简介"></a>SSL的简介</h2><p>SSL是Netscape公司所提出的安全保密协议，在浏览器(如Internet Explorer、Netscape Navigator)和Web服务器(如Netscape的Netscape Enterprise Server、ColdFusion Server等等)之间构造安全通道来进行数据传输，SSL运行在TCP/IP层之上、应用层之下，为应用程序提供加密数据通道，它采用了RC4、MD5 以及RSA等加密算法，使用40 位的密钥，适用于商业信息的加密。</p>
<p>同时，Netscape公司相应开发了HTTPS协议并内置于其浏览器中，HTTPS实际上就是SSL over HTTP，它使用默认端口443，而不是像HTTP那样使用端口80来和TCP/IP进行通信。HTTPS协议使用SSL在发送方把原始数据进行加密，然 后在接受方进行解密，加密和解密需要发送方和接受方通过交换共知的密钥来实现，因此，所传送的数据不容易被网络黑客截获和解密。</p>
<p>然而，加密和解密过程需要耗费系统大量的开销，严重降低机器的性能，相关测试数据表明使用HTTPS协议传输数据的工作效率只有使用HTTP协议传输的十 分之一。</p>
<p>假如为了安全保密，将一个网站所有的Web应用都启用SSL技术来加密，并使用HTTPS协议进行传输，那么该网站的性能和效率将会大大降低，而且没有这个必要，因为一般来说并不是所有数据都要求那么高的安全保密级别，所以，我们只需对那些涉及机密数据的交互处理使用HTTPS协议，这样就做到鱼与熊掌兼得。总之不需要用https 的地方，就尽量不要用。</p>
<h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><ul>
<li><a href="http://blog.csdn.net/gueter/article/details/1524447" target="_blank" rel="external">HTTP协议详解 </a></li>
<li><a href="http://kubihai.com/flash/539514.html" target="_blank" rel="external">HTTP协议和HTTPS协议详解</a></li>
<li><a href="http://www.chinaz.com/web/2015/0707/420248.shtml" target="_blank" rel="external">https和http有何区别？</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/11/30/protocol_http_and_https/" data-id="cj4zx2kk1005hqonh4xubqamy" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/http/">http</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/https/">https</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-android_animation_translate" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/11/24/android_animation_translate/" class="article-date">
  <time datetime="2015-11-24T06:48:29.000Z" itemprop="datePublished">2015-11-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/android/">android</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/24/android_animation_translate/">Android动画之translate(位移动画)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p> <a href="http://www.oschina.net/question/97118_34343" target="_blank" rel="external">Android的左右滑动切换</a>讲述了Activity的左右滑动切换，下面深入了解Activity切换的原理，主要对左右滑动进行深入的探讨，并以项目中的一个切换效果来进一步了解。</p>
<h2 id="Tween-Animation"><a href="#Tween-Animation" class="headerlink" title="Tween Animation"></a>Tween Animation</h2><p>Activity的切换效果使用的是Android的动画效果，Android的动画在官方有相关资料：<a href="http://developer.android.com/guide/topics/graphics/animation.html" target="_blank" rel="external">animation</a>和<a href="http://developer.android.com/guide/topics/resources/animation-resource.html" target="_blank" rel="external">animation-resource</a> ，Activity的切换动画实际上是Android的View Animation(视图动画)中的Tween Animation效果，Tween Animation分为4种动画效果，分别是：</p>
<ul>
<li>alpha (透明变化) </li>
<li>translate(位置移动) </li>
<li>scale(缩放) </li>
<li>rotate(旋转)</li>
</ul>
<p>左右滑动切换使用的是 translate(位置移动)的效果，Translate动画是非常好理解，就是定义一个开始的位置和一个结束位置，定义移动时间，然后就能自动产生移动动画。Android的translate移动方向有 横向(X) 竖向(Y), 左右滑动使用了横向移动效果，对于竖向(Y)的位置如下：<br><img src="http://static.oschina.net/uploads/space/2011/1218/132811_Req6_97118.png" alt=""></p>
<h2 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h2><p>定义一个向上退出的动画（从位置2 移动位置3）和从下面进入（从位置1移动位置2）的动画定义文件如下：<br>out_to_up.xml (从屏幕上面退出)<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">translate</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">    <span class="attr">android:interpolator</span>=<span class="string">"@android:anim/accelerate_interpolator"</span></div><div class="line">    <span class="attr">android:fromYDelta</span>=<span class="string">"0%p"</span></div><div class="line">    <span class="attr">android:toYDelta</span>=<span class="string">"-100%p"</span></div><div class="line">    <span class="attr">android:duration</span>=<span class="string">"1000"</span>&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">translate</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>in_from_down.xml (从屏幕下面进入)<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">translate</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">    <span class="attr">android:interpolator</span>=<span class="string">"@android:anim/accelerate_interpolator"</span></div><div class="line">    <span class="attr">android:fromYDelta</span>=<span class="string">"100%p"</span></div><div class="line">    <span class="attr">android:toYDelta</span>=<span class="string">"0%p"</span></div><div class="line">    <span class="attr">android:duration</span>=<span class="string">"1000"</span>&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">translate</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>接下来讲一讲translate的几个重要的属性：</p>
<p>android:interpolator: 加速器，非常有用的属性，可以简单理解为动画的速度，可以是越来越快，也可以是越来越慢，或者是先快后忙，或者是均匀的速度等等，对于值如下：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">@android:anim/accelerate_interpolator： 越来越快</div><div class="line">@android:anim/decelerate_interpolator：越来越慢</div><div class="line">@android:anim/accelerate_decelerate_interpolator：先快后慢</div><div class="line">@android:anim/anticipate_interpolator: 先后退一小步然后向前加速</div><div class="line">@android:anim/overshoot_interpolator：快速到达终点超出一小步然后回到终点</div><div class="line">@android:anim/anticipate_overshoot_interpolator：到达终点超出一小步然后回到终点</div><div class="line">@android:anim/bounce_interpolator：到达终点产生弹球效果，弹几下回到终点</div><div class="line">@android:anim/linear_interpolator：均匀速度。</div></pre></td></tr></table></figure></p>
<ul>
<li>android:duration: 动画运行时间，定义在多次时间（ms）内完成动画</li>
<li>android:startOffset: 延迟一定时间后运行动画</li>
<li>fromXDelta: X轴方向开始位置，可以是%，也可以是具体的像素</li>
<li>toXDelta:   X轴方向结束位置，可以是%，也可以是具体的像素</li>
<li>fromYDelta: Y轴方向开始位置，可以是%，也可以是具体的像素</li>
<li>toYDelta:   Y轴方向结束位置，可以是%，也可以是具体的像素</li>
</ul>
<p>当你了解上面的属性后，你可以组合出很多有趣的位置移动效果。比如使用加速器：@android:anim/bounce_interpolator 可以产生弹球落地时的效果。</p>
<h2 id="实际应用"><a href="#实际应用" class="headerlink" title="实际应用"></a>实际应用</h2><p>在实际项目中需要在进行只使用“左右上下滑动”的效果可能还不够炫，希望在切换时能产生更动态的效果，比如开始切换时第1个Activity先向后退一步，然后在向左方向退出屏幕。然后第2个Activity紧跟后面从右边进入屏幕，到达终点时有一个动态效果。在了解了动画加速器后，大家都知道可以采用：anticipate_overshoot_interpolator、anticipate_interpolator、overshoot_interpolator 这三个加速器实现左右滑动切换时启动或者结束的动态效果。</p>
<p>动画文件定义如下：<br>dync_out_to_left.xml<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">translate</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">    <span class="attr">android:duration</span>=<span class="string">"500"</span></div><div class="line">    <span class="attr">android:fromXDelta</span>=<span class="string">"0%p"</span></div><div class="line">    <span class="attr">android:interpolator</span>=<span class="string">"@android:anim/anticipate_interpolator"</span></div><div class="line">    <span class="attr">android:toXDelta</span>=<span class="string">"-100%p"</span> /&gt;</div></pre></td></tr></table></figure></p>
<p>dync_in_from_right.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">translate</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">    <span class="attr">android:duration</span>=<span class="string">"500"</span></div><div class="line">    <span class="attr">android:fromXDelta</span>=<span class="string">"100%p"</span></div><div class="line">    <span class="attr">android:interpolator</span>=<span class="string">" @android:anim/anticipate_overshoot_interpolator "</span></div><div class="line">    <span class="attr">android:toXDelta</span>=<span class="string">"0%p"</span> /&gt;</div></pre></td></tr></table></figure>
<p>但是再使用以上动画配置，会出现以下问题：</p>
<ol>
<li>第1个Activity使用anticipate_interpolator时，开始移动时先向后退一步，然后向前移动。但向后退一步步伐太大，略显夸张，实际应用中只希望退后一小小步就行了。</li>
<li>由于开始向后退一步，额外增加了移动时间，导致前一Activity和后一个Activity的时间不同步。</li>
</ol>
<p>为了解决以上问题，重新定义动态效果，将第1个Activity的移动分为2个动画效果：<br>(1) 用200毫秒时间先向后移动2%p的位置<br>(2) 延迟200毫秒后从2%p位置向前移动到-100%p位置。 然后第2个Activity从延迟200毫秒然后从102%p位置移动到0%p位置。</p>
<p>动画定义如下：<br>new_dync_out_to_left.xml<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">    <span class="attr">android:shareInterpolator</span>=<span class="string">"false"</span> &gt;</div><div class="line">    <span class="tag">&lt;<span class="name">translate</span></span></div><div class="line">        <span class="attr">android:duration</span>=<span class="string">"200"</span></div><div class="line">        <span class="attr">android:fromXDelta</span>=<span class="string">"0%p"</span></div><div class="line">        <span class="attr">android:interpolator</span>=<span class="string">"@android:anim/accelerate_decelerate_interpolator"</span></div><div class="line">        <span class="attr">android:toXDelta</span>=<span class="string">"2%p"</span> /&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">translate</span></span></div><div class="line">        <span class="attr">android:duration</span>=<span class="string">"1000"</span></div><div class="line">        <span class="attr">android:fromXDelta</span>=<span class="string">"2%p"</span></div><div class="line">        <span class="attr">android:interpolator</span>=<span class="string">"@android:anim/accelerate_interpolator"</span></div><div class="line">        <span class="attr">android:startOffset</span>=<span class="string">"200"</span></div><div class="line">        <span class="attr">android:toXDelta</span>=<span class="string">"-100%p"</span> /&gt;</div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></div><div class="line"></div><div class="line">new_dync_in_from_right.xml</div><div class="line">``` xml</div><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">translate</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">    <span class="attr">android:duration</span>=<span class="string">"1000"</span></div><div class="line">    <span class="attr">android:fromXDelta</span>=<span class="string">"102%p"</span></div><div class="line">    <span class="attr">android:interpolator</span>=<span class="string">"@android:anim/anticipate_overshoot_interpolator"</span></div><div class="line">    <span class="attr">android:startOffset</span>=<span class="string">"200"</span></div><div class="line">    <span class="attr">android:toXDelta</span>=<span class="string">"0%p"</span> /&gt;</div></pre></td></tr></table></figure></p>
<p>源代码见<a href="http://pan.baidu.com/s/1kTCRUpp" target="_blank" rel="external">ActivitySwitchDemo</a> 密码：rl3v</p>
<p>本文整理自bavariama的博客，原文链接见<a href="http://www.cnblogs.com/bavariama/archive/2013/01/29/2881225.html" target="_blank" rel="external">Android动画之translate(位移动画)</a>。</p>
<h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><ul>
<li><a href="http://developer.android.com/guide/topics/graphics/animation.html" target="_blank" rel="external">Animation官方文档</a></li>
<li><a href="http://developer.android.com/intl/zh-cn/guide/topics/graphics/view-animation.html" target="_blank" rel="external">view-animation</a></li>
<li><a href="http://pan.baidu.com/s/1kTCRUpp" target="_blank" rel="external">ActivitySwitchDemo</a> 密码：rl3v</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/11/24/android_animation_translate/" data-id="cj4zx2kfy000iqonhev6ijhnd" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/animation/">animation</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/translate/">translate</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-tools_tomcat_conect_to_mysql" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/11/23/tools_tomcat_conect_to_mysql/" class="article-date">
  <time datetime="2015-11-23T07:18:29.000Z" itemprop="datePublished">2015-11-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/tools/">tools</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/23/tools_tomcat_conect_to_mysql/">Tomcat8配置MySQL数据库连接</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>Web开发中与数据库的连接是必不可少的，而数据库连接池技术很好的优化了动态页与数据库的连接，相比单个连接数据库连接池节省了很大的资源。</p>
<h2 id="操作步骤"><a href="#操作步骤" class="headerlink" title="操作步骤"></a>操作步骤</h2><p>1.将MySQL的JDBC驱动mysql-connector-java-5.1.18-bin.jar复制到Tomcat安装目录里的lib文件夹下。驱动可以从MySQL官网上下载，为jar包。</p>
<p>2.将Tomcat的配置文件Context.xml做如下修改：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">Context</span> <span class="attr">path</span>=<span class="string">"/DBTest"</span> <span class="attr">docBase</span>=<span class="string">"DBTest"</span></span></div><div class="line">        <span class="attr">debug</span>=<span class="string">"5"</span> <span class="attr">reloadable</span>=<span class="string">"true"</span> <span class="attr">crossContext</span>=<span class="string">"true"</span>&gt;</div><div class="line"></div><div class="line">    <span class="comment">&lt;!-- maxActive: Maximum number of dB connections in pool. Make sure you</span></div><div class="line">         configure your mysqld max_connections large enough to handle</div><div class="line">         all of your db connections. Set to -1 for no limit.</div><div class="line">         --&gt;</div><div class="line">  ... ...</div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">Resource</span> <span class="attr">name</span>=<span class="string">"jdbc/DBTest"</span> <span class="attr">auth</span>=<span class="string">"Container"</span> <span class="attr">type</span>=<span class="string">"javax.sql.DataSource"</span></span></div><div class="line">               <span class="attr">maxActive</span>=<span class="string">"100"</span> <span class="attr">maxIdle</span>=<span class="string">"30"</span> <span class="attr">maxWait</span>=<span class="string">"10000"</span></div><div class="line">               <span class="attr">username</span>=<span class="string">"xxxxxx"</span> <span class="attr">password</span>=<span class="string">"xxxxxx"</span> <span class="attr">driverClassName</span>=<span class="string">"com.mysql.jdbc.Driver"</span></div><div class="line">               <span class="attr">url</span>=<span class="string">"jdbc:mysql://localhost:3306/dbname?autoReconnect=true"</span>/&gt;</div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">Context</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>注意：</p>
<ul>
<li>代码中Resource标签里dbname改为自己的项目路径；dbname改为自己的数据源名，但是后面使用时候要与这里的配置保持一致。</li>
<li>username和password改为自己MySQL的用户名密码。</li>
<li>url的格式依次为jdbc:mysql://{你的数据库服务所在的IP，如果为本机就为localhost}:{你的数据库服务端口号}/{MySQL中要使用的数据库名称}?autoReconnect=true。</li>
</ul>
<p>或者使用全局资源配置，在$CATALINA_HOME/conf/server.xml的<globalnamingresources>中增加全局资源配置<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">Resource</span> <span class="attr">name</span>=<span class="string">"jdbc/DBTest"</span> <span class="attr">auth</span>=<span class="string">"Container"</span> <span class="attr">type</span>=<span class="string">"javax.sql.DataSource"</span></span></div><div class="line">    <span class="attr">driverClassName</span>=<span class="string">"com.mysql.jdbc.Driver"</span></div><div class="line">    <span class="attr">maxActive</span>=<span class="string">"10"</span> <span class="attr">maxIdle</span>=<span class="string">"5"</span> <span class="attr">maxWait</span>=<span class="string">"10000"</span></div><div class="line">    <span class="attr">username</span>=<span class="string">"xxxxxx"</span> <span class="attr">password</span>=<span class="string">"xxxxxx"</span></div><div class="line">    <span class="attr">url</span>=<span class="string">"jdbc:mysql://localhost:3306/dbname"</span></div><div class="line">    <span class="attr">description</span>=<span class="string">"DBTest for dbname Applications"</span> /&gt;</div></pre></td></tr></table></figure></globalnamingresources></p>
<p>在Context中，使用ResourceLink连接全局资源<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">Context</span> <span class="attr">path</span>=<span class="string">"/dbname"</span> <span class="attr">docBase</span>=<span class="string">"D:/workspace/dbname/WebContent"</span> <span class="attr">debug</span>=<span class="string">"0"</span> <span class="attr">reloadable</span>=<span class="string">"true"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">ResourceLink</span> <span class="attr">name</span>=<span class="string">"jdbc/DBTest"</span> <span class="attr">global</span>=<span class="string">"jdbc/DBTest"</span>  <span class="attr">type</span>=<span class="string">"javax.sql.DataSource"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">Context</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>3.修改项目WEB-INF/web.xml 配置文件（若无，请新建），在“”之上添加如下代码：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">resource-ref</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>DB Connection<span class="tag">&lt;/<span class="name">description</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">res-ref-name</span>&gt;</span>jdbc/dbname<span class="tag">&lt;/<span class="name">res-ref-name</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">res-type</span>&gt;</span>javax.sql.DataSource<span class="tag">&lt;/<span class="name">res-type</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">res-auth</span>&gt;</span>Container<span class="tag">&lt;/<span class="name">res-auth</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">resource-ref</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h2 id="参数说明"><a href="#参数说明" class="headerlink" title="参数说明"></a>参数说明</h2><p>context.xml中的参数的解析如下：</p>
<ul>
<li>name属性是数据源名称，通常采取jdbc/**.</li>
<li>type属性是数据源方式。</li>
<li>driverClassName属性是驱动程序名称。</li>
<li>username，password，数据库名称和密码</li>
<li>url:访问的数据库路径。</li>
<li>maxActive属性是并发连接的最大数。设置为0则无限制。</li>
<li>maxWait属性是等待连接的最大连接的时间。</li>
<li>maxIdle属性是连接池中空闲的连接的个数。</li>
</ul>
<p>上文中的设置的 maxActive=”100”说明可以最大连接的个数为100个，再建立连接，则出现异常。<br>而maxIdle=”30”说明当关闭数据库时（不是真正的断开连接，而是归还连接池中）连接池中最大可以有空闲的连接数为30个。<br>若是再有建立连接，此时若连接池中没有空闲的连接，但是又没有达到maxActive并发的最大连接数，则在连接池中建立连接。</p>
<h2 id="代码示例"><a href="#代码示例" class="headerlink" title="代码示例"></a>代码示例</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">Context initContext = <span class="keyword">new</span> InitialContext();</div><div class="line">Context envContext  = (Context)initContext.lookup(<span class="string">"java:/comp/env"</span>);</div><div class="line">DataSource ds = (DataSource)envContext.lookup(<span class="string">"jdbc/dbname"</span>);</div><div class="line">Connection conn = ds.getConnection();</div><div class="line">Statement st = <span class="keyword">null</span>;</div><div class="line">ResultSet rs = <span class="keyword">null</span>;</div><div class="line">st = conn.createStatement();</div><div class="line">rs = st.executeQuery(yoursql);</div></pre></td></tr></table></figure>
<p>注意代码与上两步中的一致；yoursql处写你的sql代码。</p>
<p>通过1-3步就在Tomcat中配置好了MySQL的数据库连接池。</p>
<h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><ul>
<li><a href="http://www.cnblogs.com/hongten/articles/2033987.html" target="_blank" rel="external">Tomcat中配置MySQL数据库连接池</a></li>
<li><a href="http://blog.163.com/jianhoo_lxq/blog/static/161982079201111204734414/" target="_blank" rel="external">tomcat7.0配置mysql连接池</a></li>
<li><a href="http://blog.csdn.net/caiwenfeng_for_23/article/details/8572616" target="_blank" rel="external"> Tomcat7和mysql连接池的配置方法和测试(DBCP方式)</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/11/23/tools_tomcat_conect_to_mysql/" data-id="cj4zx2kkn006oqonhgky2o5lj" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mysql/">mysql</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/tomcat/">tomcat</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-tools_tomcat_install" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/11/23/tools_tomcat_install/" class="article-date">
  <time datetime="2015-11-23T07:04:29.000Z" itemprop="datePublished">2015-11-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/tools/">tools</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/23/tools_tomcat_install/">Tomcat安装详细教程[windows+linux]</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>下面分别介绍Windows和Linux环境下tomcat安装的教程，其实tomcat的安装主要就是一系列的变量的配置，变量配置OK，安装也就算是顺利完成。</p>
<h2 id="安装版本"><a href="#安装版本" class="headerlink" title="安装版本"></a>安装版本</h2><ul>
<li>Windows: jdk1.8.0_51 apache-tomcat-8.0.28-windows-i64</li>
<li>Linux(Ubuntu): jdk-8u60-linux-i586 apache-tomcat-8.0.28<br>说明：安装包根据自己系统的情况在官网下载即可。</li>
</ul>
<h2 id="Windows下的步骤"><a href="#Windows下的步骤" class="headerlink" title="Windows下的步骤"></a>Windows下的步骤</h2><p>1、先安装JDK，跟你平时安装软件一样，非常傻瓜地进行着，在此略过。</p>
<p>2、配置JDK环境变量<br>简单地说，就是相当给你安装的JDK路径取个别名，方便以后在CMD命令行操作编译。<br> 1）打开控制面板主页。<br> 2）进入系统 — 高级系统设置 — 环境变量（win10）。<br> 3）在系统变量中需要新建3个变量。</p>
<ul>
<li>变量名为JAVA_HOME，变量值为：C:\JDK（具体请根据你安装的JDK路径而定，如果是默认应该是这个形式C:\Program Files\Java\jdk1.7）</li>
<li>变量名为CLASSPATH，变量值为.;%JAVA_HOME%\lib;</li>
<li>变量名为PATH，变量值为%JAVA_HOME%\bin</li>
</ul>
<p>说明：至此完成了JDK的环境配置，请在cmd命令行界面下输入java -version测试是否安装成功。下面进行Tomcat服务器的安装与配置。</p>
<p>3.Tomcat的安装与配置<br>解压下载文件包，打开系统环境变量请参考JDK配置的操作。<br>在系统变量中添加以下变量</p>
<ul>
<li>变量名TOMCAT_HOME 变量值c:\tomcat（安装目录）</li>
<li>变量名CATALINA_HOME 变量值c:\tomcat （CATALINA_HOME的变量值与TOMCAT_HOME的变量值是一样的）</li>
<li>PATH 在系统变量path后面追加;%CATALINA_HOME%\bin;%CATALINA_HOME%\lib</li>
</ul>
<p>4.启动Tomcat服务器<br>cmd命令行下进入到tomcat的安装目录下的bin目录下，输入startup.bat启动tomcat。<br>在浏览器中输入<a href="http://http://localhost:8080" target="_blank" rel="external">http://http://localhost:8080</a> 或 <a href="http://127.0.0.1:8080" target="_blank" rel="external">http://127.0.0.1:8080</a> 验证是否安装成功。</p>
<blockquote>
<p>说明：有时候通过localhost以及127.0.0.1不能访问，并不代表没有安装成功，可以试试ipconfig拿到ip，然后访问改ip的8080端口也可以验证。</p>
</blockquote>
<h2 id="Ubuntu下的安装"><a href="#Ubuntu下的安装" class="headerlink" title="Ubuntu下的安装"></a>Ubuntu下的安装</h2><p>1.下载jdk和tomcat的安装包，分别解压缩。将jdk解压缩到/usr/java目录下，将tomcat解压缩到/opt/目录下。（也可以是其他目录，根据自己喜好部署）</p>
<p>2.配置java的环境变量。位置为/etc/enviroment，当然也可以在.bashrc中配置。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">PATH=<span class="string">"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:<span class="variable">$JAVA_HOME</span>/bin"</span></div><div class="line"><span class="built_in">export</span> CLASSPATH=.:<span class="variable">$JAVA_HOME</span>/lib:<span class="variable">$JAVA_HOME</span>/jre/lib</div><div class="line"><span class="built_in">export</span> JAVA_HOME=/usr/java/jdk1.8.0_60</div></pre></td></tr></table></figure></p>
<p>.bashrc中配置：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">export</span> JAVA_HOME=/usr/java/jdk1.8.0_60</div><div class="line"><span class="built_in">export</span> JRE_HOME=<span class="variable">$&#123;JAVA_HOME&#125;</span>/jre</div><div class="line"><span class="built_in">export</span> CLASSPATH=.</div><div class="line"><span class="built_in">export</span> PATH=<span class="variable">$&#123;JAVA_HOME&#125;</span>/bin:<span class="variable">$PATH</span></div></pre></td></tr></table></figure></p>
<blockquote>
<p>注意：配置以后都需要source一下使其生效。（source /etc/enviroment）</p>
</blockquote>
<p>3.tomcat的配置：<br> 打开tomcat目录，进入bin目录。使用右击使用gedit打开startup.sh文件，在文件最下边添加<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">JAVA_HOME=/usr/java/jdk1.8.0_60</div><div class="line">JRE_HOME=<span class="variable">$JAVA_HOME</span>/jre</div><div class="line">PATH=/usr/<span class="built_in">local</span>/sbin:/usr/<span class="built_in">local</span>/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/<span class="built_in">local</span>/games:/usr/java/jdk1.8.0_60/bin</div><div class="line">TOMCAT_HOME=/opt/apache-tomcat-8.0.28</div></pre></td></tr></table></figure></p>
<p>4.启动、关闭tomcat<br>在tomcat的bin目录下右击 在终端中打开 ，打开终端后输入下边命令启动服务器：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo ./startup.sh</div></pre></td></tr></table></figure></p>
<p>输入下边的命令这是关闭服务器：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo ./shutdown.sh</div></pre></td></tr></table></figure></p>
<p>验证是否安装成功同Windows下的验证一样，要是localhost不能访问，有ip访问也是可以的。（ifconfig）</p>
<h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><ul>
<li><a href="http://jingyan.baidu.com/article/624e7459a7d6e734e9ba5a70.html" target="_blank" rel="external">windows 7系统安装与配置Tomcat服务器环境</a></li>
<li><a href="http://blog.sina.com.cn/s/blog_6386bafd0101dppz.html" target="_blank" rel="external">ubuntu 14.04安装TOMCAT配置环境变量</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/11/23/tools_tomcat_install/" data-id="cj4zx2kkn006qqonhbzvmddor" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/tomcat/">tomcat</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-database_mysql_cmd" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/11/23/database_mysql_cmd/" class="article-date">
  <time datetime="2015-11-23T02:48:29.000Z" itemprop="datePublished">2015-11-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/database/">database</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/23/database_mysql_cmd/">MySQL常用命令汇总</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>SQL即结构化查询语言(Structured Query Language)，是一门 ANSI 的标准计算机语言，用来访问和操作数据库系统。是一种数据库查询和程序设计语言，用于存取数据以及查询、更新和管理关系数据库系统；同时也是数据库脚本文件的扩展名。SQL语句无论是种类还是数量都是繁多的，很多语句也是经常要用到的，SQL查询语句就是一个典型的例子，无论是高级查询还是低级查询，SQL查询语句的需求是最频繁的。<br>SQL 可与数据库程序协同工作，比如 MS Access、DB2、Informix、MS SQL Server、Oracle、Sybase 以及其他数据库系统。不幸地是，存在着很多不同版本的 SQL 语言，但是为了与 ANSI 标准相兼容，它们必须以相似的方式共同地来支持一些主要的关键词（比如 SELECT、UPDATE、DELETE、INSERT、WHERE 等等）。</p>
<blockquote>
<p>注释：除了 SQL 标准之外，大部分 SQL 数据库程序都拥有它们自己的私有扩展！</p>
</blockquote>
<h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><p>1.命令行登录mysql<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysql -uusername -ppassword</div></pre></td></tr></table></figure></p>
<p>2.查看当前所有存在数据库<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">show databases;</div></pre></td></tr></table></figure></p>
<p>3.创建数据库<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">create database database-name</div></pre></td></tr></table></figure></p>
<p>4.删除数据库<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">drop database dbname</div></pre></td></tr></table></figure></p>
<p>5.备份数据库<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">//创建备份数据的 device</div><div class="line">USE master</div><div class="line">EXEC sp_addumpdevice <span class="string">'disk'</span>, <span class="string">'testBack'</span>, <span class="string">'c:\mssql7backup\MyNwind_1.dat'</span></div><div class="line">//开始备份</div><div class="line">BACKUP DATABASE pubs TO testBack</div></pre></td></tr></table></figure></p>
<p>6.创建新表<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">create table tabname(col1 type1 [not null] [primary key] ,col2 type2 [not null],..)    </div><div class="line">//identity(起始值,递增量) primary key为主键 identity表示递增数量</div></pre></td></tr></table></figure></p>
<p>7.删除表<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">drop table tabname  //这是将表连同表中信息一起删除但是日志文件中会有记录</div></pre></td></tr></table></figure></p>
<p>8.删除信息<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">delete from table_name  //这是将表中信息删除但是会保留这个表</div></pre></td></tr></table></figure></p>
<p>9.增加列<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Alter table table_name add column_name column_type [default 默认值]  //在表中增加一列，[]内的内容为可选项</div></pre></td></tr></table></figure></p>
<p>10.删除列<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Alter table table_name drop column column_name  //从表中删除一列</div></pre></td></tr></table></figure></p>
<p>11.添加主键和删除主键<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Alter table tabname add primary key(col)</div><div class="line"></div><div class="line">Alter table tabname drop primary key(col)</div></pre></td></tr></table></figure></p>
<p>12.创建索引和删除索引<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">create [unique] index idxname on tabname(col…。)</div><div class="line"></div><div class="line">drop index idxname on tabname</div></pre></td></tr></table></figure></p>
<p>注：索引是不可更改的，想更改必须删除重新建。</p>
<p>13.创建视图和删除视图<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">create view viewname as select statement</div><div class="line"></div><div class="line">drop view viewname</div></pre></td></tr></table></figure></p>
<h2 id="基本语句"><a href="#基本语句" class="headerlink" title="基本语句"></a>基本语句</h2><p>(1) 数据记录筛选：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">sql=<span class="string">"select * from 数据表 where字段名=字段值 order by字段名[desc]"</span>（按某个字段值降序排列。默认升序ASC）</div><div class="line">sql=<span class="string">"select * from 数据表 where字段名like '%字段值%' order by 字段名 [desc]"</span></div><div class="line">sql=<span class="string">"select top 10 * from 数据表 where字段名=字段值 order by 字段名 [desc]"</span></div><div class="line">sql=<span class="string">"select top 10 * from 数据表 order by 字段名 [desc]"</span></div><div class="line">sql=<span class="string">"select * from 数据表 where字段名in ('值1','值2','值3')"</span></div><div class="line">sql=<span class="string">"select * from 数据表 where字段名between 值1 and 值2"</span></div></pre></td></tr></table></figure></p>
<p>(2) 更新数据记录：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sql=<span class="string">"update 数据表 set字段名=字段值 where 条件表达式"</span></div><div class="line">sql=<span class="string">"update 数据表 set 字段1=值1,字段2=值2 …… 字段n=值n where 条件表达式"</span></div></pre></td></tr></table></figure></p>
<p>(3) 删除数据记录：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sql=<span class="string">"delete from 数据表 where 条件表达式"</span></div><div class="line">sql=<span class="string">"delete from 数据表"</span> (将数据表所有记录删除)</div></pre></td></tr></table></figure></p>
<p>(4) 添加数据记录：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sql=<span class="string">"insert into 数据表 (字段1,字段2,字段3 …) values (值1,值2,值3 …)"</span></div><div class="line">sql=<span class="string">"insert into 目标数据表 select * from 源数据表"</span> (把源数据表的记录添加到目标数据表)</div></pre></td></tr></table></figure></p>
<p>(5) 数据记录统计函数：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">AVG(字段名) 得出一个表格栏平均值</div><div class="line">COUNT(*;字段名) 对数据行数的统计或对某一栏有值的数据行数统计</div><div class="line">MAX(字段名) 取得一个表格栏最大的值</div><div class="line">MIN(字段名) 取得一个表格栏最小的值</div><div class="line">SUM(字段名) 把数据栏的值相加</div></pre></td></tr></table></figure></p>
<p>引用以上函数的方法：<br>sql=”select sum(字段名) as 别名 from 数据表 where 条件表达式”<br>set rs=conn.excute(sql)<br>用 rs(“别名”) 获取统计的值，其它函数运用同上。<br>查询去除重复值：select distinct * from table1</p>
<p>(6) 数据表的建立和删除：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">CREATE TABLE 数据表名称(字段1 类型1(长度),字段2 类型2(长度) …… )</div></pre></td></tr></table></figure></p>
<p>(7) 单列求和:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">SELECT SUM(字段名) FROM 数据表</div></pre></td></tr></table></figure></p>
<h2 id="高级查询-待更新"><a href="#高级查询-待更新" class="headerlink" title="高级查询(待更新)"></a>高级查询(待更新)</h2><h3 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h3><ul>
<li><a href="http://www.w3school.com.cn/sql/sql_syntax.asp" target="_blank" rel="external">W3School-SQL语法</a></li>
<li><a href="http://baike.baidu.com/link?url=YBxrNSbAf_mevEAmaVz8ZaiNmre5M2C_EdjT7Y6daJeyFAd_Kn5xenAocsn39P_tn8QHfusxlPt5HnWuSBSFAq" target="_blank" rel="external">百度百科-SQL语法大全</a></li>
<li><a href="http://www.cnblogs.com/yubinfeng/archive/2010/11/02/1867386.html" target="_blank" rel="external">经典SQL语句大全</a></li>
<li><a href="http://www.cnblogs.com/xd502djj/archive/2010/11/23/1885446.html" target="_blank" rel="external">常用SQL语句</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/11/23/database_mysql_cmd/" data-id="cj4zx2kjl004yqonha487jdhp" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/database/">database</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mysql/">mysql</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/page/4/">&laquo; __('prev')</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><a class="page-number" href="/page/7/">7</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/6/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/algorithm/">algorithm</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/android/">android</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/article/">article</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/coding/">coding</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/">database</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/framework/">framework</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/humanism/">humanism</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/message-push/">message_push</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/music/">music</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/ndk/">ndk</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/note/">note</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/protocol/">protocol</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/reading/">reading</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/springmvc/">springmvc</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/string/">string</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/study/">study</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/tools/">tools</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/versioncontroll/">versioncontroll</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/">web</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/好文/">好文</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/电影/">电影</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/AliPay/">AliPay</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Einstein/">Einstein</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GreenDao/">GreenDao</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ORMLite/">ORMLite</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WXPay/">WXPay</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/activity/">activity</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/android-studio/">android_studio</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/android-ui/">android_ui</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/androidstudio/">androidstudio</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/application/">application</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/book/">book</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/broadcast/">broadcast</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bugfix/">bugfix</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/chinese-weman/">chinese_weman</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/code-collection/">code_collection</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/context/">context</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/database/">database</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/decomplication/">decomplication</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/design-model/">design model</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/eclipse/">eclipse</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/eventbus/">eventbus</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/feminism/">feminism</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fullstack/">fullstack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/">github</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/google/">google</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gradle/">gradle</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/handle/">handle</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/handler/">handler</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/http/">http</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/https/">https</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/humanism/">humanism</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iframe/">iframe</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/image/">image</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/imageloader/">imageloader</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/intent/">intent</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/intentflag/">intentflag</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iphone/">iphone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jni/">jni</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/listview/">listview</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/markdown/">markdown</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/material-design/">material_design</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/maven/">maven</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/music/">music</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mvp/">mvp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nd/">nd</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/notification/">notification</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/obfuscation/">obfuscation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/observer/">observer</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/opensource/">opensource</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/otto/">otto</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pageradapter/">pageradapter</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pay/">pay</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/placeholder/">placeholder</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/project-build/">project_build</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pulltorefresh/">pulltorefresh</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pulltorefreshlistview/">pulltorefreshlistview</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/saxophone/">saxophone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/screen-record/">screen-record</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shortkey/">shortkey</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/snack/">snack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/socket/">socket</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sort/">sort</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spannable/">spannable</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/speech/">speech</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/springmvc/">springmvc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sqlite/">sqlite</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssl/">ssl</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sublime/">sublime</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/svg/">svg</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/svn/">svn</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/templates/">templates</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/textview/">textview</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tomcat/">tomcat</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/translate/">translate</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/viewpager/">viewpager</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/volley/">volley</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/website/">website</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webview/">webview</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xpnet/">xpnet</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/书单/">书单</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/史玉柱/">史玉柱</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/感悟/">感悟</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/电影/">电影</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/贾樟柯/">贾樟柯</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/AliPay/" style="font-size: 10px;">AliPay</a> <a href="/tags/Einstein/" style="font-size: 10px;">Einstein</a> <a href="/tags/GreenDao/" style="font-size: 10px;">GreenDao</a> <a href="/tags/ORMLite/" style="font-size: 10px;">ORMLite</a> <a href="/tags/WXPay/" style="font-size: 10px;">WXPay</a> <a href="/tags/activity/" style="font-size: 10px;">activity</a> <a href="/tags/android-studio/" style="font-size: 10px;">android_studio</a> <a href="/tags/android-ui/" style="font-size: 10px;">android_ui</a> <a href="/tags/androidstudio/" style="font-size: 20px;">androidstudio</a> <a href="/tags/animation/" style="font-size: 20px;">animation</a> <a href="/tags/application/" style="font-size: 10px;">application</a> <a href="/tags/book/" style="font-size: 10px;">book</a> <a href="/tags/broadcast/" style="font-size: 10px;">broadcast</a> <a href="/tags/bugfix/" style="font-size: 13.33px;">bugfix</a> <a href="/tags/chinese-weman/" style="font-size: 10px;">chinese_weman</a> <a href="/tags/code-collection/" style="font-size: 10px;">code_collection</a> <a href="/tags/context/" style="font-size: 10px;">context</a> <a href="/tags/database/" style="font-size: 10px;">database</a> <a href="/tags/decomplication/" style="font-size: 10px;">decomplication</a> <a href="/tags/design-model/" style="font-size: 13.33px;">design model</a> <a href="/tags/eclipse/" style="font-size: 10px;">eclipse</a> <a href="/tags/eventbus/" style="font-size: 10px;">eventbus</a> <a href="/tags/feminism/" style="font-size: 10px;">feminism</a> <a href="/tags/fullstack/" style="font-size: 10px;">fullstack</a> <a href="/tags/github/" style="font-size: 13.33px;">github</a> <a href="/tags/google/" style="font-size: 10px;">google</a> <a href="/tags/gradle/" style="font-size: 16.67px;">gradle</a> <a href="/tags/handle/" style="font-size: 10px;">handle</a> <a href="/tags/handler/" style="font-size: 10px;">handler</a> <a href="/tags/hexo/" style="font-size: 16.67px;">hexo</a> <a href="/tags/http/" style="font-size: 10px;">http</a> <a href="/tags/https/" style="font-size: 10px;">https</a> <a href="/tags/humanism/" style="font-size: 10px;">humanism</a> <a href="/tags/iframe/" style="font-size: 10px;">iframe</a> <a href="/tags/image/" style="font-size: 10px;">image</a> <a href="/tags/imageloader/" style="font-size: 20px;">imageloader</a> <a href="/tags/intent/" style="font-size: 10px;">intent</a> <a href="/tags/intentflag/" style="font-size: 13.33px;">intentflag</a> <a href="/tags/iphone/" style="font-size: 10px;">iphone</a> <a href="/tags/jni/" style="font-size: 10px;">jni</a> <a href="/tags/listview/" style="font-size: 10px;">listview</a> <a href="/tags/markdown/" style="font-size: 10px;">markdown</a> <a href="/tags/material-design/" style="font-size: 10px;">material_design</a> <a href="/tags/maven/" style="font-size: 10px;">maven</a> <a href="/tags/music/" style="font-size: 13.33px;">music</a> <a href="/tags/mvp/" style="font-size: 10px;">mvp</a> <a href="/tags/mysql/" style="font-size: 16.67px;">mysql</a> <a href="/tags/nd/" style="font-size: 10px;">nd</a> <a href="/tags/notification/" style="font-size: 10px;">notification</a> <a href="/tags/obfuscation/" style="font-size: 10px;">obfuscation</a> <a href="/tags/observer/" style="font-size: 10px;">observer</a> <a href="/tags/opensource/" style="font-size: 13.33px;">opensource</a> <a href="/tags/otto/" style="font-size: 10px;">otto</a> <a href="/tags/pageradapter/" style="font-size: 10px;">pageradapter</a> <a href="/tags/pay/" style="font-size: 13.33px;">pay</a> <a href="/tags/placeholder/" style="font-size: 10px;">placeholder</a> <a href="/tags/project-build/" style="font-size: 10px;">project_build</a> <a href="/tags/pulltorefresh/" style="font-size: 10px;">pulltorefresh</a> <a href="/tags/pulltorefreshlistview/" style="font-size: 13.33px;">pulltorefreshlistview</a> <a href="/tags/saxophone/" style="font-size: 10px;">saxophone</a> <a href="/tags/screen-record/" style="font-size: 10px;">screen-record</a> <a href="/tags/shortkey/" style="font-size: 10px;">shortkey</a> <a href="/tags/snack/" style="font-size: 10px;">snack</a> <a href="/tags/socket/" style="font-size: 10px;">socket</a> <a href="/tags/sort/" style="font-size: 13.33px;">sort</a> <a href="/tags/spannable/" style="font-size: 10px;">spannable</a> <a href="/tags/speech/" style="font-size: 10px;">speech</a> <a href="/tags/springmvc/" style="font-size: 10px;">springmvc</a> <a href="/tags/sqlite/" style="font-size: 10px;">sqlite</a> <a href="/tags/ssl/" style="font-size: 13.33px;">ssl</a> <a href="/tags/sublime/" style="font-size: 10px;">sublime</a> <a href="/tags/svg/" style="font-size: 13.33px;">svg</a> <a href="/tags/svn/" style="font-size: 13.33px;">svn</a> <a href="/tags/templates/" style="font-size: 10px;">templates</a> <a href="/tags/textview/" style="font-size: 10px;">textview</a> <a href="/tags/tomcat/" style="font-size: 16.67px;">tomcat</a> <a href="/tags/translate/" style="font-size: 10px;">translate</a> <a href="/tags/viewpager/" style="font-size: 13.33px;">viewpager</a> <a href="/tags/volley/" style="font-size: 10px;">volley</a> <a href="/tags/website/" style="font-size: 13.33px;">website</a> <a href="/tags/webview/" style="font-size: 10px;">webview</a> <a href="/tags/xpnet/" style="font-size: 13.33px;">xpnet</a> <a href="/tags/书单/" style="font-size: 10px;">书单</a> <a href="/tags/史玉柱/" style="font-size: 10px;">史玉柱</a> <a href="/tags/感悟/" style="font-size: 10px;">感悟</a> <a href="/tags/电影/" style="font-size: 10px;">电影</a> <a href="/tags/贾樟柯/" style="font-size: 10px;">贾樟柯</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">February 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/11/11/study_my_website_collection/">常用网站收集</a>
          </li>
        
          <li>
            <a href="/2016/05/04/web_develop_config/">WEB开发之环境配置</a>
          </li>
        
          <li>
            <a href="/2016/05/04/web_springmvc1/">Spring MVC入门(一)</a>
          </li>
        
          <li>
            <a href="/2016/04/07/android_network_ssl/">为你的Android App实现自签名的SSL证书</a>
          </li>
        
          <li>
            <a href="/2016/03/28/android_notification_push/">Android实现推送方式解决方案</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 ARESXIONG<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>